/*! For license information please see main.705c1a9f.js.LICENSE.txt */
(()=>{"use strict";var e={0:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function C(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=C.prototype=new y;w.constructor=C,f(w,v.prototype),w.isPureReactComponent=!0;var T=Array.isArray,b=Object.prototype.hasOwnProperty,A={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var o,i={},a=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)b.call(t,o)&&!S.hasOwnProperty(o)&&(i[o]=t[o]);var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(o in c=e.defaultProps)void 0===i[o]&&(i[o]=c[o]);return{$$typeof:n,type:e,key:a,ref:s,props:i,_owner:A.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function k(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function R(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return a=a(c=e),e=""===i?"."+k(c,0):i,T(a)?(o="",null!=e&&(o=e.replace(_,"$&/")+"/"),R(a,t,o,"",function(e){return e})):null!=a&&(I(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(_,"$&/")+"/")+e)),t.push(a)),1;if(c=0,i=""===i?".":i+":",T(e))for(var l=0;l<e.length;l++){var u=i+k(s=e[l],l);c+=R(s,t,o,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=g&&e[g]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(s=e.next()).done;)c+=R(s=s.value,t,o,u=i+k(s,l++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function P(e,t,n){if(null==e)return e;var r=[],o=0;return R(e,r,"","",function(e){return t.call(n,e,o++)}),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},M={transition:null},L={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:M,ReactCurrentOwner:A};function x(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=o,t.Profiler=a,t.PureComponent=C,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=x,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=f({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=A.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)b.call(t,l)&&!S.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}return{$$typeof:n,type:e.type,key:i,ref:a,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=x,t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,n){return N.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,n){return N.current.useReducer(e,t,n)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.current.useTransition()},t.version="18.3.1"},22:(e,t,n)=>{n.d(t,{A:()=>r});const r=class{constructor(e){this.msalInstance=void 0,this.msalInstance=e}async authenticate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["openid","profile","email"];try{return console.log("\ud83d\udd04 Starting redirect authentication..."),await this.msalInstance.loginRedirect({scopes:e,prompt:"select_account"}),{success:!0,method:"redirect",pending:!0}}catch(t){return console.error("\u274c Redirect authentication failed:",t),{success:!1,method:"redirect",error:t.message}}}async handleRedirectCallback(){try{console.log("\ud83d\udd04 Processing redirect callback...");const e=await this.msalInstance.handleRedirectPromise();return e&&e.account?(this.msalInstance.setActiveAccount(e.account),console.log("\u2705 Redirect callback processed successfully"),{success:!0,account:e.account}):{success:!0,noResult:!0}}catch(e){return console.error("\u274c Redirect callback error:",e),{success:!1,error:e.message}}}getAuthState(){const e=this.msalInstance.getAllAccounts(),t=this.msalInstance.getActiveAccount();return{isAuthenticated:e.length>0&&!!t,account:t,accountCount:e.length}}}},31:()=>{},39:(e,t,n)=>{e.exports=n(88)},88:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<o&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else{if(!(l<o&&0>i(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var l=[],u=[],d=1,h=null,g=3,p=!1,f=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,C="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function T(e){if(m=!1,w(e),!f)if(null!==r(l))f=!0,M(b);else{var t=r(u);null!==t&&L(T,t.startTime-e)}}function b(e,n){f=!1,m&&(m=!1,y(I),I=-1),p=!0;var i=g;try{for(w(n),h=r(l);null!==h&&(!(h.expirationTime>n)||e&&!R());){var a=h.callback;if("function"===typeof a){h.callback=null,g=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(l)&&o(l),w(n)}else o(l);h=r(l)}if(null!==h)var c=!0;else{var d=r(u);null!==d&&L(T,d.startTime-n),c=!1}return c}finally{h=null,g=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var A,S=!1,E=null,I=-1,_=5,k=-1;function R(){return!(t.unstable_now()-k<_)}function P(){if(null!==E){var e=t.unstable_now();k=e;var n=!0;try{n=E(!0,e)}finally{n?A():(S=!1,E=null)}}else S=!1}if("function"===typeof C)A=function(){C(P)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,N=O.port2;O.port1.onmessage=P,A=function(){N.postMessage(null)}}else A=function(){v(P,0)};function M(e){E=e,S||(S=!0,A())}function L(e,n){I=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,M(b))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(g){case 1:case 2:case 3:var t=3;break;default:t=g}var n=g;g=t;try{return e()}finally{g=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=g;g=e;try{return t()}finally{g=n}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(l)&&e===r(u)&&(m?(y(I),I=-1):m=!0,L(T,i-a))):(e.sortIndex=s,n(l,e),f||p||(f=!0,M(b))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=g;return function(){var n=g;g=t;try{return e.apply(this,arguments)}finally{g=n}}}},144:(e,t,n)=>{n.d(t,{EB:()=>c,mx:()=>s});var r=n(233),o=n(261);const i=(0,r.createContext)(void 0),a={id:"krishna",name:"Krishna",display_name:"Lord Krishna",domain:"spiritual",time_period:"Ancient India (3000+ BCE)",description:"Divine teacher and guide from the Bhagavad Gita, offering spiritual wisdom and life guidance",expertise_areas:["dharma","karma","devotion","self-realization","divine wisdom"],cultural_context:"Ancient Indian spiritual tradition",quality_score:95,usage_count:1e3,is_active:!0,tags:["spiritual","divine","bhagavad-gita","dharma"]},s=e=>{let{children:t}=e;const[s,c]=(0,r.useState)(null),[l,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(!1),[g,p]=(0,r.useState)([]),f=async()=>{try{console.log("\ud83d\udd04 PersonalityContext: Starting personality load..."),h(!0);const{getApiBaseUrl:e}=await Promise.resolve().then(n.bind(n,872)),t=e();console.log("\ud83d\udd17 PersonalityContext: Using API base URL:",t);const r=new URLSearchParams;r.append("active_only","true");const o="".concat(t,"/personalities/active?").concat(r.toString());console.log("\ud83d\udce4 PersonalityContext: Calling API:",o);const i=await fetch(o);if(console.log("\ud83d\udce5 PersonalityContext: API response status:",i.status,i.statusText),!i.ok)throw new Error("HTTP error! status: ".concat(i.status));const s=await i.json();if(console.log("\ud83d\udcca PersonalityContext: API response data:",s),s.personalities&&Array.isArray(s.personalities)){console.log("\u2705 PersonalityContext: Successfully loaded",s.personalities.length,"personalities");const e=s.personalities.map(e=>({id:e.id,name:e.name,display_name:e.name,domain:e.domain,time_period:"Ancient/Historical",description:e.description,expertise_areas:[],cultural_context:"Historical",quality_score:95,usage_count:0,is_active:!0,tags:[e.domain]}));p(e)}else console.warn("\u26a0\ufe0f PersonalityContext: Failed to load personalities from API - unexpected response format:",s),p([a])}catch(e){console.error("\u274c PersonalityContext: Failed to load personalities:",e),p([a])}finally{h(!1),console.log("\ud83c\udfc1 PersonalityContext: Personality loading complete")}};(0,r.useEffect)(()=>{console.log("\ud83d\ude80 PersonalityContext: useEffect triggered - loading personalities and saved state");try{const e=localStorage.getItem("vimarsh_selected_personality");if(e){const t=JSON.parse(e);console.log("\ud83d\udce6 PersonalityContext: Loaded saved personality from localStorage:",t.name),c(t)}else console.log("\ud83d\udd37 PersonalityContext: No saved personality found, leaving null for user selection"),c(null)}catch(e){console.error("\u274c PersonalityContext: Failed to load saved personality:",e),c(null)}console.log("\ud83d\udd04 PersonalityContext: Calling loadPersonalities()"),f()},[]);const m={selectedPersonality:s,setSelectedPersonality:e=>{if(c(e),e)try{localStorage.setItem("vimarsh_selected_personality",JSON.stringify(e))}catch(t){console.error("Failed to save personality to localStorage:",t)}else try{localStorage.removeItem("vimarsh_selected_personality")}catch(t){console.error("Failed to remove personality from localStorage:",t)}},personalitySwitchNotification:l,setPersonalitySwitchNotification:u,personalityLoading:d,setPersonalityLoading:h,availablePersonalities:g,setAvailablePersonalities:p,loadPersonalities:f};return(0,o.jsx)(i.Provider,{value:m,children:t})},c=()=>{const e=(0,r.useContext)(i);if(void 0===e)throw new Error("usePersonality must be used within a PersonalityProvider");return e}},216:(e,t,n)=>{var r;n.d(t,{BV:()=>L,C5:()=>O,Ix:()=>M,V8:()=>P,Zp:()=>m,qh:()=>N,zy:()=>p});var o=n(233),i=n(387);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}const s=o.createContext(null);const c=o.createContext(null);const l=o.createContext(null);const u=o.createContext(null);const d=o.createContext({outlet:null,matches:[],isDataRoute:!1});const h=o.createContext(null);function g(){return null!=o.useContext(u)}function p(){return g()||(0,i.Oi)(!1),o.useContext(u).location}function f(e){o.useContext(l).static||o.useLayoutEffect(e)}function m(){let{isDataRoute:e}=o.useContext(d);return e?function(){let{router:e}=E(A.UseNavigateStable),t=_(S.UseNavigateStable),n=o.useRef(!1);f(()=>{n.current=!0});let r=o.useCallback(function(r,o){void 0===o&&(o={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,a({fromRouteId:t},o)))},[e,t]);return r}():function(){g()||(0,i.Oi)(!1);let e=o.useContext(s),{basename:t,future:n,navigator:r}=o.useContext(l),{matches:a}=o.useContext(d),{pathname:c}=p(),u=JSON.stringify((0,i.yD)(a,n.v7_relativeSplatPath)),h=o.useRef(!1);return f(()=>{h.current=!0}),o.useCallback(function(n,o){if(void 0===o&&(o={}),!h.current)return;if("number"===typeof n)return void r.go(n);let a=(0,i.Gh)(n,JSON.parse(u),c,"path"===o.relative);null==e&&"/"!==t&&(a.pathname="/"===a.pathname?t:(0,i.HS)([t,a.pathname])),(o.replace?r.replace:r.push)(a,o.state,o)},[t,r,u,c,e])}()}function v(e,t,n,r){g()||(0,i.Oi)(!1);let{navigator:s}=o.useContext(l),{matches:c}=o.useContext(d),h=c[c.length-1],f=h?h.params:{},m=(h&&h.pathname,h?h.pathnameBase:"/");h&&h.route;let v,y=p();if(t){var C;let e="string"===typeof t?(0,i.Rr)(t):t;"/"===m||(null==(C=e.pathname)?void 0:C.startsWith(m))||(0,i.Oi)(!1),v=e}else v=y;let w=v.pathname||"/",T=w;if("/"!==m){let e=m.replace(/^\//,"").split("/");T="/"+w.replace(/^\//,"").split("/").slice(e.length).join("/")}let A=(0,i.ue)(e,{pathname:T});let S=b(A&&A.map(e=>Object.assign({},e,{params:Object.assign({},f,e.params),pathname:(0,i.HS)([m,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?m:(0,i.HS)([m,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),c,n,r);return t&&S?o.createElement(u.Provider,{value:{location:a({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:i.rc.Pop}},S):S}function y(){let e=function(){var e;let t=o.useContext(h),n=I(S.UseRouteError),r=_(S.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=(0,i.pX)(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r};return o.createElement(o.Fragment,null,o.createElement("h2",null,"Unexpected Application Error!"),o.createElement("h3",{style:{fontStyle:"italic"}},t),n?o.createElement("pre",{style:a},n):null,null)}const C=o.createElement(y,null);class w extends o.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?o.createElement(d.Provider,{value:this.props.routeContext},o.createElement(h.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function T(e){let{routeContext:t,match:n,children:r}=e,i=o.useContext(s);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),o.createElement(d.Provider,{value:t},r)}function b(e,t,n,r){var a;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var s;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(s=r)&&s.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let c=e,l=null==(a=n)?void 0:a.errors;if(null!=l){let e=c.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||(0,i.Oi)(!1),c=c.slice(0,Math.min(c.length,e+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let o=0;o<c.length;o++){let e=c[o];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=o),e.route.id){let{loaderData:t,errors:r}=n,o=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||o){u=!0,c=d>=0?c.slice(0,d+1):[c[0]];break}}}return c.reduceRight((e,r,i)=>{let a,s=!1,h=null,g=null;var p;n&&(a=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||C,u&&(d<0&&0===i?(p="route-fallback",!1||k[p]||(k[p]=!0),s=!0,g=null):d===i&&(s=!0,g=r.route.hydrateFallbackElement||null)));let f=t.concat(c.slice(0,i+1)),m=()=>{let t;return t=a?h:s?g:r.route.Component?o.createElement(r.route.Component,null):r.route.element?r.route.element:e,o.createElement(T,{match:r,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?o.createElement(w,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):m()},null)}var A=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(A||{}),S=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(S||{});function E(e){let t=o.useContext(s);return t||(0,i.Oi)(!1),t}function I(e){let t=o.useContext(c);return t||(0,i.Oi)(!1),t}function _(e){let t=function(){let e=o.useContext(d);return e||(0,i.Oi)(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||(0,i.Oi)(!1),n.route.id}const k={};const R=(e,t,n)=>{};function P(e,t){void 0===(null==e?void 0:e.v7_startTransition)&&R("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),void 0!==(null==e?void 0:e.v7_relativeSplatPath)||t&&void 0!==t.v7_relativeSplatPath||R("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),t&&(void 0===t.v7_fetcherPersist&&R("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),void 0===t.v7_normalizeFormMethod&&R("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),void 0===t.v7_partialHydration&&R("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),void 0===t.v7_skipActionErrorRevalidation&&R("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}(r||(r=n.t(o,2))).startTransition;function O(e){let{to:t,replace:n,state:r,relative:a}=e;g()||(0,i.Oi)(!1);let{future:s,static:c}=o.useContext(l),{matches:u}=o.useContext(d),{pathname:h}=p(),f=m(),v=(0,i.Gh)(t,(0,i.yD)(u,s.v7_relativeSplatPath),h,"path"===a),y=JSON.stringify(v);return o.useEffect(()=>f(JSON.parse(y),{replace:n,state:r,relative:a}),[f,y,a,n,r]),null}function N(e){(0,i.Oi)(!1)}function M(e){let{basename:t="/",children:n=null,location:r,navigationType:s=i.rc.Pop,navigator:c,static:d=!1,future:h}=e;g()&&(0,i.Oi)(!1);let p=t.replace(/^\/*/,"/"),f=o.useMemo(()=>({basename:p,navigator:c,static:d,future:a({v7_relativeSplatPath:!1},h)}),[p,h,c,d]);"string"===typeof r&&(r=(0,i.Rr)(r));let{pathname:m="/",search:v="",hash:y="",state:C=null,key:w="default"}=r,T=o.useMemo(()=>{let e=(0,i.pb)(m,p);return null==e?null:{location:{pathname:e,search:v,hash:y,state:C,key:w},navigationType:s}},[p,m,v,y,C,w,s]);return null==T?null:o.createElement(l.Provider,{value:f},o.createElement(u.Provider,{children:n,value:T}))}function L(e){let{children:t,location:n}=e;return v(x(t),n)}new Promise(()=>{});o.Component;function x(e,t){void 0===t&&(t=[]);let n=[];return o.Children.forEach(e,(e,r)=>{if(!o.isValidElement(e))return;let a=[...t,r];if(e.type===o.Fragment)return void n.push.apply(n,x(e.props.children,a));e.type!==N&&(0,i.Oi)(!1),e.props.index&&e.props.children&&(0,i.Oi)(!1);let s={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=x(e.props.children,a)),n.push(s)}),n}},233:(e,t,n)=>{e.exports=n(0)},261:(e,t,n)=>{e.exports=n(935)},291:(e,t,n)=>{n.d(t,{r7:()=>C,XI:()=>T,dk:()=>w});var r=n(233),o=n(854),i=n(552);const a={initialize:()=>Promise.reject((0,o.jz)(i.dg)),acquireTokenPopup:()=>Promise.reject((0,o.jz)(i.dg)),acquireTokenRedirect:()=>Promise.reject((0,o.jz)(i.dg)),acquireTokenSilent:()=>Promise.reject((0,o.jz)(i.dg)),acquireTokenByCode:()=>Promise.reject((0,o.jz)(i.dg)),getAllAccounts:()=>[],getAccount:()=>null,getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject((0,o.jz)(i.dg)),loginPopup:()=>Promise.reject((0,o.jz)(i.dg)),loginRedirect:()=>Promise.reject((0,o.jz)(i.dg)),logout:()=>Promise.reject((0,o.jz)(i.dg)),logoutRedirect:()=>Promise.reject((0,o.jz)(i.dg)),logoutPopup:()=>Promise.reject((0,o.jz)(i.dg)),ssoSilent:()=>Promise.reject((0,o.jz)(i.dg)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw(0,o.jz)(i.dg)},getLogger:()=>{throw(0,o.jz)(i.dg)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw(0,o.jz)(i.dg)},hydrateCache:()=>Promise.reject((0,o.jz)(i.dg)),clearCache:()=>Promise.reject((0,o.jz)(i.dg))};var s=n(648),c=n(623);const l={instance:a,inProgress:s.T$.None,accounts:[],logger:new c.V({})},u=r.createContext(l);u.Consumer;var d=n(555),h=n(498);class g{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case h.B.LOGIN_START:return s.T$.Login;case h.B.SSO_SILENT_START:return s.T$.SsoSilent;case h.B.ACQUIRE_TOKEN_START:if(e.interactionType===s.X8.Redirect||e.interactionType===s.X8.Popup)return s.T$.AcquireToken;break;case h.B.HANDLE_REDIRECT_START:return s.T$.HandleRedirect;case h.B.LOGOUT_START:return s.T$.Logout;case h.B.SSO_SILENT_SUCCESS:case h.B.SSO_SILENT_FAILURE:if(t&&t!==s.T$.SsoSilent)break;return s.T$.None;case h.B.LOGOUT_END:if(t&&t!==s.T$.Logout)break;return s.T$.None;case h.B.HANDLE_REDIRECT_END:if(t&&t!==s.T$.HandleRedirect)break;return s.T$.None;case h.B.LOGIN_SUCCESS:case h.B.LOGIN_FAILURE:case h.B.ACQUIRE_TOKEN_SUCCESS:case h.B.ACQUIRE_TOKEN_FAILURE:case h.B.RESTORE_FROM_BFCACHE:if(e.interactionType===s.X8.Redirect||e.interactionType===s.X8.Popup){if(t&&t!==s.T$.Login&&t!==s.T$.AcquireToken)break;return s.T$.None}}return null}}function p(e,t){if(e.length!==t.length)return!1;const n=[...t];return e.every(e=>{const t=n.shift();return!(!e||!t)&&(e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username)})}const f="@azure/msal-react",m="2.2.0",v={UNBLOCK_INPROGRESS:"UNBLOCK_INPROGRESS",EVENT:"EVENT"},y=(e,t)=>{const{type:n,payload:r}=t;let o=e.inProgress;switch(n){case v.UNBLOCK_INPROGRESS:e.inProgress===s.T$.Startup&&(o=s.T$.None,r.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'"));break;case v.EVENT:const t=r.message,i=g.getInteractionStatusFromEvent(t,e.inProgress);i&&(r.logger.info("MsalProvider - ".concat(t.eventType," results in setting inProgress from ").concat(e.inProgress," to ").concat(i)),o=i);break;default:throw new Error("Unknown action type: ".concat(n))}const i=r.instance.getAllAccounts();return o===e.inProgress||p(i,e.accounts)?o!==e.inProgress?(0,d.A)((0,d.A)({},e),{},{inProgress:o}):p(i,e.accounts)?e:(0,d.A)((0,d.A)({},e),{},{accounts:i}):(0,d.A)((0,d.A)({},e),{},{inProgress:o,accounts:i})};function C(e){let{instance:t,children:n}=e;(0,r.useEffect)(()=>{t.initializeWrapperLibrary(s.f7.React,m)},[t]);const o=(0,r.useMemo)(()=>t.getLogger().clone(f,m),[t]),[i,a]=(0,r.useReducer)(y,void 0,()=>({inProgress:s.T$.Startup,accounts:t.getAllAccounts()}));(0,r.useEffect)(()=>{const e=t.addEventCallback(e=>{a({payload:{instance:t,logger:o,message:e},type:v.EVENT})});return o.verbose("MsalProvider - Registered event callback with id: ".concat(e)),t.initialize().then(()=>{t.handleRedirectPromise().catch(()=>{}).finally(()=>{a({payload:{instance:t,logger:o},type:v.UNBLOCK_INPROGRESS})})}).catch(()=>{}),()=>{e&&(o.verbose("MsalProvider - Removing event callback ".concat(e)),t.removeEventCallback(e))}},[t,o]);const c={instance:t,inProgress:i.inProgress,accounts:i.accounts,logger:o};return r.createElement(u.Provider,{value:c},n)}const w=()=>(0,r.useContext)(u);function T(e){const{accounts:t,inProgress:n}=w(),o=(0,r.useMemo)(()=>n!==s.T$.Startup&&function(e,t){return t&&(t.username||t.homeAccountId||t.localAccountId)?!!function(e,t){return e.length>0&&(t.homeAccountId||t.localAccountId||t.username)&&e.filter(e=>(!t.username||t.username.toLowerCase()===e.username.toLowerCase())&&(!t.homeAccountId||t.homeAccountId.toLowerCase()===e.homeAccountId.toLowerCase())&&(!t.localAccountId||t.localAccountId.toLowerCase()===e.localAccountId.toLowerCase()))[0]||null}(e,t):e.length>0}(t,e),[t,n,e]);return o}var b=n(823);b.lR},335:(e,t,n)=>{n.d(t,{W:()=>r,z:()=>o});const r="unexpected_error",o="post_request_failed"},385:(e,t,n)=>{n.d(t,{$x:()=>m,E_:()=>S,F0:()=>x,Fq:()=>d,GU:()=>w,Gd:()=>l,I:()=>k,IO:()=>I,JR:()=>T,Kk:()=>P,LR:()=>y,Lz:()=>L,OK:()=>c,Qd:()=>v,Rv:()=>M,Tq:()=>R,Xw:()=>_,YM:()=>o,_2:()=>N,_A:()=>s,_M:()=>h,aG:()=>C,aZ:()=>a,gT:()=>E,hB:()=>b,iF:()=>g,jZ:()=>O,p:()=>f,t3:()=>i,u0:()=>A,v2:()=>u,zL:()=>p});var r=n(555);const o={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},i={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},a=[o.OPENID_SCOPE,o.PROFILE_SCOPE,o.OFFLINE_ACCESS_SCOPE],s=[...a,o.EMAIL_SCOPE],c={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},l={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},u={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},d={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},h={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},g={PLAIN:"plain",S256:"S256"},p={QUERY:"query",FRAGMENT:"fragment"},f=(0,r.A)((0,r.A)({},p),{},{FORM_POST:"form_post"}),m={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},v={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},y={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},C={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},w="appmetadata",T="client_info",b="1",A={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:86400},S={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},E={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},I={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},_={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},k={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},R={username:"username",password:"password"},P={httpSuccess:200,httpBadRequest:400},O={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},N={CONFIGURED_MATCHES_DETECTED:"1",CONFIGURED_NO_AUTO_DETECTION:"2",CONFIGURED_NOT_DETECTED:"3",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},M={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},L={Jwt:"JWT",Jwk:"JWK",Pop:"pop"},x=300},387:(e,t,n)=>{function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}var o;n.d(t,{Gh:()=>L,HS:()=>x,Oi:()=>s,Rr:()=>h,pX:()=>F,pb:()=>P,rc:()=>o,tH:()=>q,ue:()=>f,yD:()=>M,zR:()=>a}),function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(o||(o={}));const i="popstate";function a(e){return void 0===e&&(e={}),g(function(e,t){let{pathname:n,search:r,hash:o}=e.location;return u("",{pathname:n,search:r,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:d(t)},null,e)}function s(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function c(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function l(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,n,o){return void 0===n&&(n=null),r({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?h(t):t,{state:n,key:t&&t.key||o||Math.random().toString(36).substr(2,8)})}function d(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function h(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,t,n,a){void 0===a&&(a={});let{window:c=document.defaultView,v5Compat:h=!1}=a,g=c.history,p=o.Pop,f=null,m=v();function v(){return(g.state||{idx:null}).idx}function y(){p=o.Pop;let e=v(),t=null==e?null:e-m;m=e,f&&f({action:p,location:w.location,delta:t})}function C(e){let t="null"!==c.location.origin?c.location.origin:c.location.href,n="string"===typeof e?e:d(e);return n=n.replace(/ $/,"%20"),s(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,g.replaceState(r({},g.state,{idx:m}),""));let w={get action(){return p},get location(){return e(c,g)},listen(e){if(f)throw new Error("A history only accepts one active listener");return c.addEventListener(i,y),f=e,()=>{c.removeEventListener(i,y),f=null}},createHref:e=>t(c,e),createURL:C,encodeLocation(e){let t=C(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){p=o.Push;let r=u(w.location,e,t);n&&n(r,e),m=v()+1;let i=l(r,m),a=w.createHref(r);try{g.pushState(i,"",a)}catch(s){if(s instanceof DOMException&&"DataCloneError"===s.name)throw s;c.location.assign(a)}h&&f&&f({action:p,location:w.location,delta:1})},replace:function(e,t){p=o.Replace;let r=u(w.location,e,t);n&&n(r,e),m=v();let i=l(r,m),a=w.createHref(r);g.replaceState(i,"",a),h&&f&&f({action:p,location:w.location,delta:0})},go:e=>g.go(e)};return w}var p;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function f(e,t,n){return void 0===n&&(n="/"),m(e,t,n,!1)}function m(e,t,n,r){let o=P(("string"===typeof t?h(t):t).pathname||"/",n);if(null==o)return null;let i=v(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let a=null;for(let s=0;null==a&&s<i.length;++s){let e=R(o);a=_(i[s],e,r)}return a}function v(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let o=(e,o,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};a.relativePath.startsWith("/")&&(s(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let c=x([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(s(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+c+'".'),v(e.children,t,l,c)),(null!=e.path||e.index)&&t.push({path:c,score:I(c,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of y(e.path))o(e,t,r);else o(e,t)}),t}function y(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,o=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return o?[i,""]:[i];let a=y(r.join("/")),s=[];return s.push(...a.map(e=>""===e?i:[i,e].join("/"))),o&&s.push(...a),s.map(t=>e.startsWith("/")&&""===t?"/":t)}const C=/^:[\w-]+$/,w=3,T=2,b=1,A=10,S=-2,E=e=>"*"===e;function I(e,t){let n=e.split("/"),r=n.length;return n.some(E)&&(r+=S),t&&(r+=T),n.filter(e=>!E(e)).reduce((e,t)=>e+(C.test(t)?w:""===t?b:A),r)}function _(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,o={},i="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],c=s===r.length-1,l="/"===i?t:t.slice(i.length)||"/",u=k({path:e.relativePath,caseSensitive:e.caseSensitive,end:c},l),d=e.route;if(!u&&c&&n&&!r[r.length-1].route.index&&(u=k({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},l)),!u)return null;Object.assign(o,u.params),a.push({params:o,pathname:x([i,u.pathname]),pathnameBase:U(x([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=x([i,u.pathnameBase]))}return a}function k(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);c("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))");let i=new RegExp(o,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let i=o[0],a=i.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:o}=t;if("*"===r){let e=s[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const c=s[n];return e[r]=o&&!c?void 0:(c||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:a,pattern:e}}function R(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return c(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function O(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function N(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function M(e,t){let n=N(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function L(e,t,n,o){let i;void 0===o&&(o=!1),"string"===typeof e?i=h(e):(i=r({},e),s(!i.pathname||!i.pathname.includes("?"),O("?","pathname","search",i)),s(!i.pathname||!i.pathname.includes("#"),O("#","pathname","hash",i)),s(!i.search||!i.search.includes("#"),O("#","search","hash",i)));let a,c=""===e||""===i.pathname,l=c?"/":i.pathname;if(null==l)a=n;else{let e=t.length-1;if(!o&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}a=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:o=""}="string"===typeof e?h(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:D(r),hash:H(o)}}(i,a),d=l&&"/"!==l&&l.endsWith("/"),g=(c||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!g||(u.pathname+="/"),u}const x=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),D=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",H=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";class q extends Error{}function F(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],K=(new Set(B),["get",...B]);new Set(K),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred")},457:(e,t,n)=>{var r=n(848);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},478:(e,t,n)=>{n.d(t,{As:()=>c,OJ:()=>l});var r=n(233),o=n(291),i=n(22),a=n(261);const s=(0,r.createContext)(void 0),c=()=>{const e=(0,r.useContext)(s);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},l=e=>{let{children:t}=e;const{instance:c}=(0,o.dk)(),l=(0,o.XI)(),[u,d]=(0,r.useState)(!0),[h,g]=(0,r.useState)(null),[p,f]=(0,r.useState)(null),[m]=(0,r.useState)(()=>new i.A(c)),v=(0,r.useCallback)(()=>{const e=c.getAllAccounts(),t=c.getActiveAccount();if(console.log("\ud83d\udd04 AuthProvider: Updating account state",{accountsFound:e.length,activeAccount:null===t||void 0===t?void 0:t.username,isAuthenticated:l,msalInstanceReady:!!c.getConfiguration()}),e.length>0)if(t)g(t);else try{c.setActiveAccount(e[0]),g(e[0]),console.log("\u2705 AuthProvider: Set active account to",e[0].username)}catch(n){console.error("\u274c AuthProvider: Failed to set active account:",n),f("Failed to set active account")}else g(null),l||f(null)},[c,l]),y=(0,r.useCallback)(()=>{const e=c.getAllAccounts(),t=c.getActiveAccount(),r="undefined"!==typeof window?window.location.origin:"unknown";console.log("\ud83d\udd0d Multi-domain authentication validation:",{currentDomain:r,msalAuthenticated:l,accountsCount:e.length,hasActiveAccount:!!t,accountEmail:null===t||void 0===t?void 0:t.username,msalInstanceReady:!!c.getConfiguration()});const{isValidProductionDomain:o}=n(872);if("undefined"!==typeof window&&!o(r)&&!r.includes("localhost"))return console.warn("\u26a0\ufe0f Authentication attempted on unsupported domain:",r),f("Authentication not supported on this domain"),!1;const i=e.length>0&&t;return i!==l&&console.warn("\u26a0\ufe0f MSAL/Provider authentication state mismatch",{hasValidAuth:i,isAuthenticated:l,accountsCount:e.length,hasActiveAccount:!!t}),!0},[c,l]);(0,r.useEffect)(()=>{(async()=>{try{d(!0);let e=0;for(;!c.getConfiguration()&&e<5;)console.log("\u23f3 AuthProvider: Waiting for MSAL initialization...",e+1),await new Promise(e=>setTimeout(e,500)),e++;if(!c.getConfiguration())throw new Error("MSAL instance failed to initialize");v(),y()?f(null):(console.warn("\u26a0\ufe0f AuthProvider: Authentication state inconsistency detected"),f("Authentication state synchronization issue. Please try signing in again."))}catch(e){console.error("\u274c AuthProvider: Initialization error:",e),f(e instanceof Error?e.message:"Failed to initialize authentication")}finally{d(!1)}})()},[c,v,y]),(0,r.useEffect)(()=>{v()},[l,v]);const C=(0,r.useCallback)(async()=>{try{d(!0),f(null);const e=await m.authenticate(["openid","profile","email"]);if(e.success){if(e.pending)return void console.log("\ud83d\udd04 Redirect authentication initiated");console.log("\u2705 Authentication initiated via",e.method)}else console.error("\u274c Authentication failed:",e.error),f(e.error||"Authentication failed")}catch(e){console.error("\u274c AuthProvider: Login error:",e),f(e.message||"Login failed")}finally{d(!1)}},[m]),w=(0,r.useCallback)(async()=>{try{d(!0),f(null);const e=c.getActiveAccount();e&&(await c.logoutRedirect({account:e,postLogoutRedirectUri:window.location.origin}),console.log("\u2705 Logout redirect initiated"))}catch(e){console.error("\u274c AuthProvider: Logout error:",e),f(e.message||"Logout failed")}finally{d(!1)}},[c]),T=(0,r.useCallback)(()=>{f(null)},[]),b=(0,r.useCallback)(async()=>{try{if(d(!0),f(null),console.log("\ud83d\udd04 AuthProvider: Refreshing authentication state..."),v(),!y())return console.warn("\u26a0\ufe0f AuthProvider: Authentication state inconsistency after refresh"),void f("Authentication validation failed. Please sign in again.");const t=c.getActiveAccount();if(t)try{await c.acquireTokenSilent({scopes:["openid","profile","email"],account:t}),console.log("\u2705 AuthProvider: Token refresh successful")}catch(e){console.warn("\u26a0\ufe0f AuthProvider: Token refresh failed (may require re-auth):",e)}console.log("\u2705 AuthProvider: Authentication refresh completed")}catch(t){console.error("\u274c AuthProvider: Auth refresh error:",t),f(t.message||"Authentication refresh failed")}finally{d(!1)}},[c,v,y]),A={isAuthenticated:l,isLoading:u,account:h,error:p,login:C,logout:w,clearError:T,refreshAuth:b};return(0,a.jsx)(s.Provider,{value:A,children:t})}},498:(e,t,n)=>{n.d(t,{B:()=>r});const r={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"}},552:(e,t,n)=>{n.d(t,{dg:()=>o,jE:()=>i,xz:()=>r});const r="storage_not_supported",o="stubbed_public_client_application_called",i="in_mem_redirect_unavailable"},555:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function i(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>s})},623:(e,t,n)=>{n.d(t,{$:()=>r,V:()=>i});var r,o=n(385);!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(r||(r={}));class i{constructor(e,t,n){this.level=r.Info;const a=e||i.createDefaultLoggerOptions();this.localCallback=a.loggerCallback||(()=>{}),this.piiLoggingEnabled=a.piiLoggingEnabled||!1,this.level="number"===typeof a.logLevel?a.logLevel:r.Info,this.correlationId=a.correlationId||o.YM.EMPTY_STRING,this.packageName=t||o.YM.EMPTY_STRING,this.packageVersion=n||o.YM.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:r.Info}}clone(e,t,n){return new i({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const n=(new Date).toUTCString(),o="[".concat(n,"] : [").concat(t.correlationId||this.correlationId||"","]"),i="".concat(o," : ").concat(this.packageName,"@").concat(this.packageVersion," : ").concat(r[t.logLevel]," - ").concat(e);this.executeCallback(t.logLevel,i,t.containsPii||!1)}executeCallback(e,t,n){this.localCallback&&this.localCallback(e,t,n)}error(e,t){this.logMessage(e,{logLevel:r.Error,containsPii:!1,correlationId:t||o.YM.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:r.Error,containsPii:!0,correlationId:t||o.YM.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:r.Warning,containsPii:!1,correlationId:t||o.YM.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:r.Warning,containsPii:!0,correlationId:t||o.YM.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:r.Info,containsPii:!1,correlationId:t||o.YM.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:r.Info,containsPii:!0,correlationId:t||o.YM.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:r.Verbose,containsPii:!1,correlationId:t||o.YM.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:r.Verbose,containsPii:!0,correlationId:t||o.YM.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:r.Trace,containsPii:!1,correlationId:t||o.YM.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:r.Trace,containsPii:!0,correlationId:t||o.YM.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}},648:(e,t,n)=>{n.d(t,{$u:()=>y,Al:()=>s,CC:()=>c,Ct:()=>a,G8:()=>C,H3:()=>d,JD:()=>i,JE:()=>b,L$:()=>A,P3:()=>S,Q1:()=>o,T$:()=>p,WJ:()=>w,X8:()=>g,_p:()=>l,dh:()=>u,f7:()=>v,jb:()=>m,nN:()=>T,sA:()=>h,uq:()=>f});var r=n(385);const o={INTERACTION_IN_PROGRESS_VALUE:"interaction_in_progress",INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},i={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},a={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},s={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},c={GET:"GET",POST:"POST"},l={AUTHORITY:"authority",ACQUIRE_TOKEN_ACCOUNT:"acquireToken.account",SESSION_STATE:"session.state",REQUEST_STATE:"request.state",NONCE_IDTOKEN:"nonce.id_token",ORIGIN_URI:"request.origin",RENEW_STATUS:"token.renew.status",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",SCOPES:"scopes",INTERACTION_STATUS_KEY:"interaction.status",CCS_CREDENTIAL:"ccs.credential",CORRELATION_ID:"request.correlationId",NATIVE_REQUEST:"request.native",REDIRECT_CONTEXT:"request.redirect.context"},u={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys"},d={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},h={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var g;!function(e){e.Redirect="redirect",e.Popup="popup",e.Silent="silent",e.None="none"}(g||(g={}));const p={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},f={scopes:r.aZ},m="jwk",v={React:"@azure/msal-react",Angular:"@azure/msal-angular"},y="msal.db",C=1,w="".concat(y,".keys"),T={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},b=[T.Default,T.Skip,T.RefreshTokenAndNetwork],A="msal.browser.log.level",S="msal.browser.log.pii"},823:(e,t,n)=>{n.d(t,{lR:()=>a,pz:()=>s});var r=n(385),o=n(335);const i={[o.W]:"Unexpected error in authentication.",[o.z]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};o.W,i[o.W],o.z,i[o.z];class a extends Error{constructor(e,t,n){super(t?"".concat(e,": ").concat(t):e),Object.setPrototypeOf(this,a.prototype),this.errorCode=e||r.YM.EMPTY_STRING,this.errorMessage=t||r.YM.EMPTY_STRING,this.subError=n||r.YM.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function s(e,t){return new a(e,t?"".concat(i[e]," ").concat(t):i[e])}},848:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(920)},854:(e,t,n)=>{n.d(t,{jz:()=>s});var r=n(823),o=n(552);const i={[o.xz]:"Given storage configuration option was not supported.",[o.dg]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[o.jE]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};o.xz,i[o.xz],o.dg,i[o.dg],o.jE,i[o.jE];class a extends r.lR{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,a.prototype)}}function s(e){return new a(e,i[e])}},872:(e,t,n)=>{n.r(t),n.d(t,{API_BASE_URL:()=>T,API_CONFIG:()=>f,APP_CONFIG:()=>y,AUTH_CONFIG:()=>p,DOMAIN_CONFIG:()=>l,ENTRA_ID_CONFIG:()=>h,FEATURE_FLAGS:()=>v,default:()=>w,getApiBaseUrl:()=>m,getAuthConfig:()=>g,getCurrentDomainConfig:()=>u,getCurrentRuntimeDomain:()=>c,isDevelopment:()=>i,isProduction:()=>o,isValidProduction:()=>d,isValidProductionDomain:()=>s,validateEnvironmentConfig:()=>C});var r=n(555);const o=!0,i=!1,a=["vimarsh.vedprakash.net","white-forest-05c196d0f.2.azurestaticapps.net"],s=e=>a.some(t=>e.includes(t)),c=()=>"undefined"!==typeof window?window.location.origin:"runtime-domain-placeholder",l={production:{domain:"https://vimarsh.vedprakash.net",redirectUri:"https://vimarsh.vedprakash.net/auth/callback",postLogoutRedirectUri:"https://vimarsh.vedprakash.net"},development:{domain:"http://localhost:3000",redirectUri:"http://localhost:3000/auth/callback",postLogoutRedirectUri:"http://localhost:3000"}},u=()=>{if(i)return l.development;if("undefined"!==typeof window){const e=window.location.origin;return s(e)?(console.info("\u2705 Valid production domain detected:",e),{domain:e,redirectUri:"".concat(e,"/auth/callback"),postLogoutRedirectUri:e}):(console.warn("\u26a0\ufe0f Unknown domain detected, using runtime configuration:",e),{domain:e,redirectUri:"".concat(e,"/auth/callback"),postLogoutRedirectUri:e})}return l.production},d=()=>!!o&&("undefined"===typeof window||s(window.location.origin)),h={tenantId:"80fe68b7-105c-4fb9-ab03-c9a818e35848",authority:"https://login.microsoftonline.com/80fe68b7-105c-4fb9-ab03-c9a818e35848",clientId:"e4bd74b8-9a82-40c6-8d52-3e231733095e",scopes:["openid","profile","email","User.Read"]},g=()=>{const e=u();return(0,r.A)((0,r.A)((0,r.A)({},h),e),{},{enableDebugLogging:i,usePlaceholder:i&&!1})},p=(0,r.A)((0,r.A)({},h),{},{enableDebugLogging:i,usePlaceholder:i&&!1}),f={baseUrl:"https://vimarsh-backend-app.azurewebsites.net/api",scopes:h.scopes,timeout:3e4},m=()=>(console.log("\ud83d\udd17 Using API URL from environment variable:","https://vimarsh-backend-app.azurewebsites.net/api"),"https://vimarsh-backend-app.azurewebsites.net/api"),v={enableAnalytics:o||!0,enablePWA:!0,enableVoice:!0,enableOfflineMode:!0,debugAuth:i&&"true"==={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://vimarsh-backend-app.azurewebsites.net/api",REACT_APP_API_TIMEOUT:"30000",REACT_APP_APP_NAME:"Vimarsh - Divine Spiritual Guidance",REACT_APP_AUTHORITY:"https://login.microsoftonline.com/80fe68b7-105c-4fb9-ab03-c9a818e35848",REACT_APP_CACHE_TTL:"3600000",REACT_APP_CLIENT_ID:"e4bd74b8-9a82-40c6-8d52-3e231733095e",REACT_APP_CSP_ENABLED:"true",REACT_APP_DEBUG_MODE:"false",REACT_APP_DEFAULT_LANGUAGE:"English",REACT_APP_DEFAULT_SCRIPTURE:"bhagavad_gita",REACT_APP_DEV_TOOLS:"false",REACT_APP_ENABLE_ANALYTICS:"true",REACT_APP_ENABLE_AUTH:"true",REACT_APP_ENABLE_OFFLINE:"true",REACT_APP_ENABLE_PWA:"true",REACT_APP_ENABLE_SANSKRIT:"true",REACT_APP_ENABLE_VOICE:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_HTTPS_ONLY:"true",REACT_APP_LOG_LEVEL:"error",REACT_APP_MAX_CHAT_HISTORY:"50",REACT_APP_MOCK_API:"false",REACT_APP_POST_LOGOUT_REDIRECT_URI:"https://vimarsh.vedprakash.net",REACT_APP_REDIRECT_URI:"https://vimarsh.vedprakash.net/auth/callback",REACT_APP_SECURE_COOKIES:"true",REACT_APP_SUPPORTED_LANGUAGES:"English,Hindi",REACT_APP_TENANT_ID:"80fe68b7-105c-4fb9-ab03-c9a818e35848",REACT_APP_VERSION:"1.0.0",REACT_APP_VOICE_LANGUAGE_EN:"en-US",REACT_APP_VOICE_LANGUAGE_HI:"hi-IN",REACT_APP_VOICE_TIMEOUT:"10000"}.REACT_APP_DEBUG_AUTH},y={name:"Vimarsh",description:"AI-powered spiritual guidance from Lord Krishna",version:"1.0.0",domain:"vimarsh.vedprakash.net",supportEmail:"support@vedprakash.net",environment:"production"},C=()=>{const e=[],t=u();t.redirectUri.includes("/auth/callback")||e.push("Redirect URI must include /auth/callback path");return["vedid.onmicrosoft.com","common","consumers"].some(e=>h.authority.includes(e))||e.push("Authority must be vedid.onmicrosoft.com, common, or consumers"),e.length>0?(console.error("\ud83d\udd10 Environment configuration issues:",e),!1):(console.info("\ud83d\udd10 Environment configuration validated successfully"),console.info("\ud83c\udf10 Domain:",t.domain),console.info("\ud83d\udd17 Redirect URI:",t.redirectUri),!0)},w=p,T=f.baseUrl},920:(e,t,n)=>{var r=n(233),o=n(39);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},p={};function f(e,t,n,r,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function C(e,t,n,r){var o=m.hasOwnProperty(t)?m[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!d.call(p,e)||!d.call(g,e)&&(h.test(e)?p[e]=!0:(g[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);m[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);m[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);m[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),b=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),_=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function x(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var U,D=Object.assign;function H(e){if(void 0===U)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||""}return"\n"+U+e}var q=!1;function F(e,t){if(!e||q)return"";q=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var o=l.stack.split("\n"),i=r.stack.split("\n"),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(1!==a||1!==s)do{if(a--,0>--s||o[a]!==i[s]){var c="\n"+o[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=a&&0<=s);break}}}finally{q=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?H(e):""}function B(e){switch(e.tag){case 5:return H(e.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function K(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case A:return"Fragment";case b:return"Portal";case E:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:K(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return K(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function j(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=j(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function V(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=j(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function W(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return D({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&C(e,"checked",t,!1)}function J(e,t){X(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&W(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return D({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ie(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ge={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ge.hasOwnProperty(e)&&ge[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=fe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(ge).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ge[t]=ge[e]})});var ve=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function Ce(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,Ae=null,Se=null;function Ee(e){if(e=wo(e)){if("function"!==typeof be)throw Error(i(280));var t=e.stateNode;t&&(t=bo(t),be(e.stateNode,e.type,t))}}function Ie(e){Ae?Se?Se.push(e):Se=[e]:Ae=e}function _e(){if(Ae){var e=Ae,t=Se;if(Se=Ae=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function ke(e,t){return e(t)}function Re(){}var Pe=!1;function Oe(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return ke(e,t,n)}finally{Pe=!1,(null!==Ae||null!==Se)&&(Re(),_e())}}function Ne(e,t){var n=e.stateNode;if(null===n)return null;var r=bo(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Me=!1;if(u)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ue){Me=!1}function xe(e,t,n,r,o,i,a,s,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var Ue=!1,De=null,He=!1,qe=null,Fe={onError:function(e){Ue=!0,De=e}};function Be(e,t,n,r,o,i,a,s,c){Ue=!1,De=null,xe.apply(Fe,arguments)}function Ke(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(Ke(e)!==e)throw Error(i(188))}function je(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ke(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(r=o.return)){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return Ge(o),e;if(a===r)return Ge(o),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=o,r=a;else{for(var s=!1,c=o.child;c;){if(c===n){s=!0,n=o,r=a;break}if(c===r){s=!0,r=o,n=a;break}c=c.sibling}if(!s){for(c=a.child;c;){if(c===n){s=!0,n=a,r=o;break}if(c===r){s=!0,r=a,n=o;break}c=c.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var Ve=o.unstable_scheduleCallback,We=o.unstable_cancelCallback,Qe=o.unstable_shouldYield,$e=o.unstable_requestPaint,Xe=o.unstable_now,Je=o.unstable_getCurrentPriorityLevel,Ze=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ct|0)|0},st=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~o;0!==s?r=dt(s):0!==(i&=a)&&(r=dt(i))}else 0!==(a=n&~o)?r=dt(a):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(i=t&-t)||16===o&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-at(t)),r|=e[n],t&=~o;return r}function gt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Ct=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Tt,bt,At,St,Et,It=!1,_t=[],kt=null,Rt=null,Pt=null,Ot=new Map,Nt=new Map,Mt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xt(e,t){switch(e){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function Ut(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=wo(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Dt(e){var t=Co(e.target);if(null!==t){var n=Ke(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Et(e.priority,function(){At(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ht(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wo(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function qt(e,t,n){Ht(e)&&n.delete(t)}function Ft(){It=!1,null!==kt&&Ht(kt)&&(kt=null),null!==Rt&&Ht(Rt)&&(Rt=null),null!==Pt&&Ht(Pt)&&(Pt=null),Ot.forEach(qt),Nt.forEach(qt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ft)))}function Kt(e){function t(t){return Bt(t,e)}if(0<_t.length){Bt(_t[0],e);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==kt&&Bt(kt,e),null!==Rt&&Bt(Rt,e),null!==Pt&&Bt(Pt,e),Ot.forEach(t),Nt.forEach(t),n=0;n<Mt.length;n++)(r=Mt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Mt.length&&null===(n=Mt[0]).blockedOn;)Dt(n),null===n.blockedOn&&Mt.shift()}var zt=w.ReactCurrentBatchConfig,Gt=!0;function jt(e,t,n,r){var o=Ct,i=zt.transition;zt.transition=null;try{Ct=1,Vt(e,t,n,r)}finally{Ct=o,zt.transition=i}}function Yt(e,t,n,r){var o=Ct,i=zt.transition;zt.transition=null;try{Ct=4,Vt(e,t,n,r)}finally{Ct=o,zt.transition=i}}function Vt(e,t,n,r){if(Gt){var o=Qt(e,t,n,r);if(null===o)Gr(e,t,r,Wt,n),xt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return kt=Ut(kt,e,t,n,r,o),!0;case"dragenter":return Rt=Ut(Rt,e,t,n,r,o),!0;case"mouseover":return Pt=Ut(Pt,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Ot.set(i,Ut(Ot.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Nt.set(i,Ut(Nt.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(xt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==o;){var i=wo(o);if(null!==i&&Tt(i),null===(i=Qt(e,t,n,r))&&Gr(e,t,r,Wt,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Wt=null;function Qt(e,t,n,r){if(Wt=null,null!==(e=Co(e=Te(r))))if(null===(t=Ke(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,o="value"in Xt?Xt.value:Xt.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return Zt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(ln),dn=D({},ln,{view:0,detail:0}),hn=on(dn),gn=D({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(an=e.screenX-cn.screenX,sn=e.screenY-cn.screenY):sn=an=0,cn=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(gn),fn=on(D({},gn,{dataTransfer:0})),mn=on(D({},dn,{relatedTarget:0})),vn=on(D({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=D({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Cn=on(yn),wn=on(D({},ln,{data:0})),Tn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},An={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=An[e])&&!!t[e]}function En(){return Sn}var In=D({},dn,{key:function(e){if(e.key){var t=Tn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),_n=on(In),kn=on(D({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=on(D({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Pn=on(D({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=D({},gn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=on(On),Mn=[9,13,27,32],Ln=u&&"CompositionEvent"in window,xn=null;u&&"documentMode"in document&&(xn=document.documentMode);var Un=u&&"TextEvent"in window&&!xn,Dn=u&&(!Ln||xn&&8<xn&&11>=xn),Hn=String.fromCharCode(32),qn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Kn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function jn(e,t,n,r){Ie(r),0<(t=Yr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Vn=null;function Wn(e){Hr(e,0)}function Qn(e){if(V(To(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Yn&&(Yn.detachEvent("onpropertychange",nr),Vn=Yn=null)}function nr(e){if("value"===e.propertyName&&Qn(Vn)){var t=[];jn(t,Vn,e,Te(e)),Oe(Wn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Vn=n,(Yn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Vn)}function ir(e,t){if("click"===e)return Qn(t)}function ar(e,t){if("input"===e||"change"===e)return Qn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!d.call(t,o)||!sr(e[o],t[o]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=W();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=W((e=t.contentWindow).document)}return t}function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&gr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=ur(n,i);var a=ur(n,r);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,yr=null,Cr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Cr||null==mr||mr!==W(r)||("selectionStart"in(r=mr)&&gr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&cr(yr,r)||(yr=r,0<(r=Yr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function Tr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:Tr("Animation","AnimationEnd"),animationiteration:Tr("Animation","AnimationIteration"),animationstart:Tr("Animation","AnimationStart"),transitionend:Tr("Transition","TransitionEnd")},Ar={},Sr={};function Er(e){if(Ar[e])return Ar[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Ar[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Ir=Er("animationend"),_r=Er("animationiteration"),kr=Er("animationstart"),Rr=Er("transitionend"),Pr=new Map,Or="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){Pr.set(e,t),c(t,[e])}for(var Mr=0;Mr<Or.length;Mr++){var Lr=Or[Mr];Nr(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Nr(Ir,"onAnimationEnd"),Nr(_r,"onAnimationIteration"),Nr(kr,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(Rr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ur=new Set("cancel close invalid load scroll toggle".split(" ").concat(xr));function Dr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,a,s,c,l){if(Be.apply(this,arguments),Ue){if(!Ue)throw Error(i(198));var u=De;Ue=!1,De=null,He||(He=!0,qe=u)}}(r,t,void 0,e),e.currentTarget=null}function Hr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==i&&o.isPropagationStopped())break e;Dr(o,s,l),i=c}else for(a=0;a<r.length;a++){if(c=(s=r[a]).instance,l=s.currentTarget,s=s.listener,c!==i&&o.isPropagationStopped())break e;Dr(o,s,l),i=c}}}if(He)throw e=qe,He=!1,qe=null,e}function qr(e,t){var n=t[mo];void 0===n&&(n=t[mo]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Fr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Kr(e){if(!e[Br]){e[Br]=!0,a.forEach(function(t){"selectionchange"!==t&&(Ur.has(t)||Fr(t,!1,e),Fr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Fr("selectionchange",!1,t))}}function zr(e,t,n,r){switch($t(t)){case 1:var o=jt;break;case 4:o=Yt;break;default:o=Vt}n=o.bind(null,t,n,e),o=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,o){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&((c=a.stateNode.containerInfo)===o||8===c.nodeType&&c.parentNode===o))return;a=a.return}for(;null!==s;){if(null===(a=Co(s)))return;if(5===(c=a.tag)||6===c){r=i=a;continue e}s=s.parentNode}}r=r.return}Oe(function(){var r=i,o=Te(n),a=[];e:{var s=Pr.get(e);if(void 0!==s){var c=un,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=_n;break;case"focusin":l="focus",c=mn;break;case"focusout":l="blur",c=mn;break;case"beforeblur":case"afterblur":c=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Rn;break;case Ir:case _r:case kr:c=vn;break;case Rr:c=Pn;break;case"scroll":c=hn;break;case"wheel":c=Nn;break;case"copy":case"cut":case"paste":c=Cn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=kn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var g,p=r;null!==p;){var f=(g=p).stateNode;if(5===g.tag&&null!==f&&(g=f,null!==h&&(null!=(f=Ne(p,h))&&u.push(jr(p,f,g)))),d)break;p=p.return}0<u.length&&(s=new c(s,l,null,n,o),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(l=n.relatedTarget||n.fromElement)||!Co(l)&&!l[fo])&&(c||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?Co(l):null)&&(l!==(d=Ke(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=pn,f="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=kn,f="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==c?s:To(c),g=null==l?s:To(l),(s=new u(f,p+"leave",c,n,o)).target=d,s.relatedTarget=g,f=null,Co(o)===r&&((u=new u(h,p+"enter",l,n,o)).target=g,u.relatedTarget=d,f=u),d=f,c&&l)e:{for(h=l,p=0,g=u=c;g;g=Vr(g))p++;for(g=0,f=h;f;f=Vr(f))g++;for(;0<p-g;)u=Vr(u),p--;for(;0<g-p;)h=Vr(h),g--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Vr(u),h=Vr(h)}u=null}else u=null;null!==c&&Wr(a,s,c,u,!1),null!==l&&null!==d&&Wr(a,d,l,u,!0)}if("select"===(c=(s=r?To(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var m=$n;else if(Gn(s))if(Xn)m=ar;else{m=or;var v=rr}else(c=s.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ir);switch(m&&(m=m(e,r))?jn(a,m,n,o):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?To(r):window,e){case"focusin":(Gn(v)||"true"===v.contentEditable)&&(mr=v,vr=r,yr=null);break;case"focusout":yr=vr=mr=null;break;case"mousedown":Cr=!0;break;case"contextmenu":case"mouseup":case"dragend":Cr=!1,wr(a,n,o);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":wr(a,n,o)}var y;if(Ln)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Kn?Fn(e,n)&&(C="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(C="onCompositionStart");C&&(Dn&&"ko"!==n.locale&&(Kn||"onCompositionStart"!==C?"onCompositionEnd"===C&&Kn&&(y=en()):(Jt="value"in(Xt=o)?Xt.value:Xt.textContent,Kn=!0)),0<(v=Yr(r,C)).length&&(C=new wn(C,e,null,n,o),a.push({event:C,listeners:v}),y?C.data=y:null!==(y=Bn(n))&&(C.data=y))),(y=Un?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(qn=!0,Hn);case"textInput":return(e=t.data)===Hn&&qn?null:e;default:return null}}(e,n):function(e,t){if(Kn)return"compositionend"===e||!Ln&&Fn(e,t)?(e=en(),Zt=Jt=Xt=null,Kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Yr(r,"onBeforeInput")).length&&(o=new wn("onBeforeInput","beforeinput",null,n,o),a.push({event:o,listeners:r}),o.data=y))}Hr(a,t)})}function jr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=Ne(e,n))&&r.unshift(jr(e,i,o)),null!=(i=Ne(e,t))&&r.push(jr(e,i,o))),e=e.return}return r}function Vr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Wr(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(null!==c&&c===r)break;5===s.tag&&null!==l&&(s=l,o?null!=(c=Ne(n,i))&&a.unshift(jr(n,c,s)):o||null!=(c=Ne(n,i))&&a.push(jr(n,c,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Qr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(i(425))}function Zr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,io="function"===typeof Promise?Promise:void 0,ao="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof io?function(e){return io.resolve(null).then(e).catch(so)}:ro;function so(e){setTimeout(function(){throw e})}function co(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void Kt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);Kt(t)}function lo(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ho=Math.random().toString(36).slice(2),go="__reactFiber$"+ho,po="__reactProps$"+ho,fo="__reactContainer$"+ho,mo="__reactEvents$"+ho,vo="__reactListeners$"+ho,yo="__reactHandles$"+ho;function Co(e){var t=e[go];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fo]||n[go]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uo(e);null!==e;){if(n=e[go])return n;e=uo(e)}return t}n=(e=n).parentNode}return null}function wo(e){return!(e=e[go]||e[fo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function To(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function bo(e){return e[po]||null}var Ao=[],So=-1;function Eo(e){return{current:e}}function Io(e){0>So||(e.current=Ao[So],Ao[So]=null,So--)}function _o(e,t){So++,Ao[So]=e.current,e.current=t}var ko={},Ro=Eo(ko),Po=Eo(!1),Oo=ko;function No(e,t){var n=e.type.contextTypes;if(!n)return ko;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Mo(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Lo(){Io(Po),Io(Ro)}function xo(e,t,n){if(Ro.current!==ko)throw Error(i(168));_o(Ro,t),_o(Po,n)}function Uo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(i(108,z(e)||"Unknown",o));return D({},n,r)}function Do(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ko,Oo=Ro.current,_o(Ro,e),_o(Po,Po.current),!0}function Ho(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Uo(e,t,Oo),r.__reactInternalMemoizedMergedChildContext=e,Io(Po),Io(Ro),_o(Ro,e)):Io(Po),_o(Po,n)}var qo=null,Fo=!1,Bo=!1;function Ko(e){null===qo?qo=[e]:qo.push(e)}function zo(){if(!Bo&&null!==qo){Bo=!0;var e=0,t=Ct;try{var n=qo;for(Ct=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}qo=null,Fo=!1}catch(o){throw null!==qo&&(qo=qo.slice(e+1)),Ve(Ze,zo),o}finally{Ct=t,Bo=!1}}return null}var Go=[],jo=0,Yo=null,Vo=0,Wo=[],Qo=0,$o=null,Xo=1,Jo="";function Zo(e,t){Go[jo++]=Vo,Go[jo++]=Yo,Yo=e,Vo=t}function ei(e,t,n){Wo[Qo++]=Xo,Wo[Qo++]=Jo,Wo[Qo++]=$o,$o=e;var r=Xo;e=Jo;var o=32-at(r)-1;r&=~(1<<o),n+=1;var i=32-at(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Xo=1<<32-at(t)+o|n<<o|r,Jo=i+e}else Xo=1<<i|n<<o|r,Jo=e}function ti(e){null!==e.return&&(Zo(e,1),ei(e,1,0))}function ni(e){for(;e===Yo;)Yo=Go[--jo],Go[jo]=null,Vo=Go[--jo],Go[jo]=null;for(;e===$o;)$o=Wo[--Qo],Wo[Qo]=null,Jo=Wo[--Qo],Wo[Qo]=null,Xo=Wo[--Qo],Wo[Qo]=null}var ri=null,oi=null,ii=!1,ai=null;function si(e,t){var n=Ol(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ci(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ri=e,oi=lo(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ri=e,oi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$o?{id:Xo,overflow:Jo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ol(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ri=e,oi=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ui(e){if(ii){var t=oi;if(t){var n=t;if(!ci(e,t)){if(li(e))throw Error(i(418));t=lo(n.nextSibling);var r=ri;t&&ci(e,t)?si(r,n):(e.flags=-4097&e.flags|2,ii=!1,ri=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,ri=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ri=e}function hi(e){if(e!==ri)return!1;if(!ii)return di(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oi)){if(li(e))throw gi(),Error(i(418));for(;t;)si(e,t),t=lo(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oi=lo(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oi=null}}else oi=ri?lo(e.stateNode.nextSibling):null;return!0}function gi(){for(var e=oi;e;)e=lo(e.nextSibling)}function pi(){oi=ri=null,ii=!1}function fi(e){null===ai?ai=[e]:ai.push(e)}var mi=w.ReactCurrentBatchConfig;function vi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var o=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=o.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ci(e){return(0,e._init)(e._payload)}function wi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Ml(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Dl(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function l(e,t,n,r){var i=n.type;return i===A?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===N&&Ci(i)===t.type)?((r=o(t,n.props)).ref=vi(e,t,n),r.return=e,r):((r=Ll(n.type,n.key,n.props,null,e.mode,r)).ref=vi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Hl(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=xl(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Dl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case T:return(n=Ll(t.type,t.key,t.props,null,e.mode,n)).ref=vi(e,null,t),n.return=e,n;case b:return(t=Hl(t,e.mode,n)).return=e,t;case N:return h(e,(0,t._init)(t._payload),n)}if(te(t)||x(t))return(t=xl(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function g(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case T:return n.key===o?l(e,t,n,r):null;case b:return n.key===o?u(e,t,n,r):null;case N:return g(e,t,(o=n._init)(n._payload),r)}if(te(n)||x(n))return null!==o?null:d(e,t,n,r,null);yi(e,n)}return null}function p(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case T:return l(t,e=e.get(null===r.key?n:r.key)||null,r,o);case b:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case N:return p(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||x(r))return d(t,e=e.get(n)||null,r,o,null);yi(t,r)}return null}function f(o,i,s,c){for(var l=null,u=null,d=i,f=i=0,m=null;null!==d&&f<s.length;f++){d.index>f?(m=d,d=null):m=d.sibling;var v=g(o,d,s[f],c);if(null===v){null===d&&(d=m);break}e&&d&&null===v.alternate&&t(o,d),i=a(v,i,f),null===u?l=v:u.sibling=v,u=v,d=m}if(f===s.length)return n(o,d),ii&&Zo(o,f),l;if(null===d){for(;f<s.length;f++)null!==(d=h(o,s[f],c))&&(i=a(d,i,f),null===u?l=d:u.sibling=d,u=d);return ii&&Zo(o,f),l}for(d=r(o,d);f<s.length;f++)null!==(m=p(d,o,f,s[f],c))&&(e&&null!==m.alternate&&d.delete(null===m.key?f:m.key),i=a(m,i,f),null===u?l=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(o,e)}),ii&&Zo(o,f),l}function m(o,s,c,l){var u=x(c);if("function"!==typeof u)throw Error(i(150));if(null==(c=u.call(c)))throw Error(i(151));for(var d=u=null,f=s,m=s=0,v=null,y=c.next();null!==f&&!y.done;m++,y=c.next()){f.index>m?(v=f,f=null):v=f.sibling;var C=g(o,f,y.value,l);if(null===C){null===f&&(f=v);break}e&&f&&null===C.alternate&&t(o,f),s=a(C,s,m),null===d?u=C:d.sibling=C,d=C,f=v}if(y.done)return n(o,f),ii&&Zo(o,m),u;if(null===f){for(;!y.done;m++,y=c.next())null!==(y=h(o,y.value,l))&&(s=a(y,s,m),null===d?u=y:d.sibling=y,d=y);return ii&&Zo(o,m),u}for(f=r(o,f);!y.done;m++,y=c.next())null!==(y=p(f,o,m,y.value,l))&&(e&&null!==y.alternate&&f.delete(null===y.key?m:y.key),s=a(y,s,m),null===d?u=y:d.sibling=y,d=y);return e&&f.forEach(function(e){return t(o,e)}),ii&&Zo(o,m),u}return function e(r,i,a,c){if("object"===typeof a&&null!==a&&a.type===A&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case T:e:{for(var l=a.key,u=i;null!==u;){if(u.key===l){if((l=a.type)===A){if(7===u.tag){n(r,u.sibling),(i=o(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===N&&Ci(l)===u.type){n(r,u.sibling),(i=o(u,a.props)).ref=vi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===A?((i=xl(a.props.children,r.mode,c,a.key)).return=r,r=i):((c=Ll(a.type,a.key,a.props,null,r.mode,c)).ref=vi(r,i,a),c.return=r,r=c)}return s(r);case b:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=o(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Hl(a,r.mode,c)).return=r,r=i}return s(r);case N:return e(r,i,(u=a._init)(a._payload),c)}if(te(a))return f(r,i,a,c);if(x(a))return m(r,i,a,c);yi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=o(i,a)).return=r,r=i):(n(r,i),(i=Dl(a,r.mode,c)).return=r,r=i),s(r)):n(r,i)}}var Ti=wi(!0),bi=wi(!1),Ai=Eo(null),Si=null,Ei=null,Ii=null;function _i(){Ii=Ei=Si=null}function ki(e){var t=Ai.current;Io(Ai),e._currentValue=t}function Ri(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Pi(e,t){Si=e,Ii=Ei=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Cs=!0),e.firstContext=null)}function Oi(e){var t=e._currentValue;if(Ii!==e)if(e={context:e,memoizedValue:t,next:null},null===Ei){if(null===Si)throw Error(i(308));Ei=e,Si.dependencies={lanes:0,firstContext:e}}else Ei=Ei.next=e;return t}var Ni=null;function Mi(e){null===Ni?Ni=[e]:Ni.push(e)}function Li(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Mi(t)):(n.next=o.next,o.next=n),t.interleaved=n,xi(e,r)}function xi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ui=!1;function Di(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&kc)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,xi(e,n)}return null===(o=r.interleaved)?(t.next=t,Mi(r)):(t.next=o.next,o.next=t),r.interleaved=t,xi(e,n)}function Bi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ki(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zi(e,t,n,r){var o=e.updateQueue;Ui=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var c=s,l=c.next;c.next=null,null===a?i=l:a.next=l,a=c;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(null!==i){var d=o.baseState;for(a=0,u=l=c=null,s=i;;){var h=s.lane,g=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:g,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,f=s;switch(h=t,g=n,f.tag){case 1:if("function"===typeof(p=f.payload)){d=p.call(g,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=f.payload)?p.call(g,d,h):p)||void 0===h)break e;d=D({},d,h);break e;case 2:Ui=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[s]:h.push(s))}else g={eventTime:g,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(l=u=g,c=d):u=u.next=g,a|=h;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(h=s).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===u&&(c=d),o.baseState=c,o.firstBaseUpdate=l,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{a|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);Uc|=a,e.lanes=a,e.memoizedState=d}}function Gi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(i(191,o));o.call(r)}}}var ji={},Yi=Eo(ji),Vi=Eo(ji),Wi=Eo(ji);function Qi(e){if(e===ji)throw Error(i(174));return e}function $i(e,t){switch(_o(Wi,t),_o(Vi,e),_o(Yi,ji),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Io(Yi),_o(Yi,t)}function Xi(){Io(Yi),Io(Vi),Io(Wi)}function Ji(e){Qi(Wi.current);var t=Qi(Yi.current),n=ce(t,e.type);t!==n&&(_o(Vi,e),_o(Yi,n))}function Zi(e){Vi.current===e&&(Io(Yi),Io(Vi))}var ea=Eo(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var oa=w.ReactCurrentDispatcher,ia=w.ReactCurrentBatchConfig,aa=0,sa=null,ca=null,la=null,ua=!1,da=!1,ha=0,ga=0;function pa(){throw Error(i(321))}function fa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,o,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oa.current=null===e||null===e.memoizedState?Za:es,e=n(r,o),da){a=0;do{if(da=!1,ha=0,25<=a)throw Error(i(301));a+=1,la=ca=null,t.updateQueue=null,oa.current=ts,e=n(r,o)}while(da)}if(oa.current=Ja,t=null!==ca&&null!==ca.next,aa=0,la=ca=sa=null,ua=!1,t)throw Error(i(300));return e}function va(){var e=0!==ha;return ha=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?sa.memoizedState=la=e:la=la.next=e,la}function Ca(){if(null===ca){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=ca.next;var t=null===la?sa.memoizedState:la.next;if(null!==t)la=t,ca=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ca=e).memoizedState,baseState:ca.baseState,baseQueue:ca.baseQueue,queue:ca.queue,next:null},null===la?sa.memoizedState=la=e:la=la.next=e}return la}function wa(e,t){return"function"===typeof t?t(e):t}function Ta(e){var t=Ca(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ca,o=r.baseQueue,a=n.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}r.baseQueue=o=a,n.pending=null}if(null!==o){a=o.next,r=r.baseState;var c=s=null,l=null,u=a;do{var d=u.lane;if((aa&d)===d)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=h,s=r):l=l.next=h,sa.lanes|=d,Uc|=d}u=u.next}while(null!==u&&u!==a);null===l?s=r:l.next=c,sr(r,t.memoizedState)||(Cs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{a=o.lane,sa.lanes|=a,Uc|=a,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ba(e){var t=Ca(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{a=e(a,s.action),s=s.next}while(s!==o);sr(a,t.memoizedState)||(Cs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Aa(){}function Sa(e,t){var n=sa,r=Ca(),o=t(),a=!sr(r.memoizedState,o);if(a&&(r.memoizedState=o,Cs=!0),r=r.queue,Ua(_a.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Oa(9,Ia.bind(null,n,r,o,t),void 0,null),null===Rc)throw Error(i(349));0!==(30&aa)||Ea(n,t,o)}return o}function Ea(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ia(e,t,n,r){t.value=n,t.getSnapshot=r,ka(t)&&Ra(e)}function _a(e,t,n){return n(function(){ka(t)&&Ra(e)})}function ka(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ra(e){var t=xi(e,1);null!==t&&nl(t,e,1,-1)}function Pa(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},t.queue=e,e=e.dispatch=Wa.bind(null,sa,e),[t.memoizedState,e]}function Oa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Na(){return Ca().memoizedState}function Ma(e,t,n,r){var o=ya();sa.flags|=e,o.memoizedState=Oa(1|t,n,void 0,void 0===r?null:r)}function La(e,t,n,r){var o=Ca();r=void 0===r?null:r;var i=void 0;if(null!==ca){var a=ca.memoizedState;if(i=a.destroy,null!==r&&fa(r,a.deps))return void(o.memoizedState=Oa(t,n,i,r))}sa.flags|=e,o.memoizedState=Oa(1|t,n,i,r)}function xa(e,t){return Ma(8390656,8,e,t)}function Ua(e,t){return La(2048,8,e,t)}function Da(e,t){return La(4,2,e,t)}function Ha(e,t){return La(4,4,e,t)}function qa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,La(4,4,qa.bind(null,t,e),n)}function Ba(){}function Ka(e,t){var n=Ca();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function za(e,t){var n=Ca();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ga(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,Cs=!0),e.memoizedState=n):(sr(n,t)||(n=ft(),sa.lanes|=n,Uc|=n,e.baseState=!0),t)}function ja(e,t){var n=Ct;Ct=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{Ct=n,ia.transition=r}}function Ya(){return Ca().memoizedState}function Va(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qa(e))$a(t,n);else if(null!==(n=Li(e,t,n,r))){nl(n,e,r,el()),Xa(n,t,r)}}function Wa(e,t,n){var r=tl(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))$a(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,sr(s,a)){var c=t.interleaved;return null===c?(o.next=o,Mi(t)):(o.next=c.next,c.next=o),void(t.interleaved=o)}}catch(l){}null!==(n=Li(e,t,o,r))&&(nl(n,e,r,o=el()),Xa(n,t,r))}}function Qa(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function $a(e,t){da=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Ja={readContext:Oi,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Za={readContext:Oi,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:Oi,useEffect:xa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ma(4194308,4,qa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ma(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ma(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Va.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:Pa,useDebugValue:Ba,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=Pa(!1),t=e[0];return e=ja.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,o=ya();if(ii){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Rc)throw Error(i(349));0!==(30&aa)||Ea(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,xa(_a.bind(null,r,a,e),[e]),r.flags|=2048,Oa(9,Ia.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=Rc.identifierPrefix;if(ii){var n=Jo;t=":"+t+"R"+(n=(Xo&~(1<<32-at(Xo)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ga++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Oi,useCallback:Ka,useContext:Oi,useEffect:Ua,useImperativeHandle:Fa,useInsertionEffect:Da,useLayoutEffect:Ha,useMemo:za,useReducer:Ta,useRef:Na,useState:function(){return Ta(wa)},useDebugValue:Ba,useDeferredValue:function(e){return Ga(Ca(),ca.memoizedState,e)},useTransition:function(){return[Ta(wa)[0],Ca().memoizedState]},useMutableSource:Aa,useSyncExternalStore:Sa,useId:Ya,unstable_isNewReconciler:!1},ts={readContext:Oi,useCallback:Ka,useContext:Oi,useEffect:Ua,useImperativeHandle:Fa,useInsertionEffect:Da,useLayoutEffect:Ha,useMemo:za,useReducer:ba,useRef:Na,useState:function(){return ba(wa)},useDebugValue:Ba,useDeferredValue:function(e){var t=Ca();return null===ca?t.memoizedState=e:Ga(t,ca.memoizedState,e)},useTransition:function(){return[ba(wa)[0],Ca().memoizedState]},useMutableSource:Aa,useSyncExternalStore:Sa,useId:Ya,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=D({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:D({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var os={isMounted:function(e){return!!(e=e._reactInternals)&&Ke(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),o=tl(e),i=qi(r,o);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Fi(e,i,o))&&(nl(t,e,o,r),Bi(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),o=tl(e),i=qi(r,o);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Fi(e,i,o))&&(nl(t,e,o,r),Bi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),o=qi(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Fi(e,o,r))&&(nl(t,e,r,n),Bi(t,e,r))}};function is(e,t,n,r,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(o,i))}function as(e,t,n){var r=!1,o=ko,i=t.contextType;return"object"===typeof i&&null!==i?i=Oi(i):(o=Mo(t)?Oo:Ro.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?No(e,o):ko),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=os,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&os.enqueueReplaceState(t,t.state,null)}function cs(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Di(e);var i=t.contextType;"object"===typeof i&&null!==i?o.context=Oi(i):(i=Mo(t)?Oo:Ro.current,o.context=No(e,i)),o.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(rs(e,t,i,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&os.enqueueReplaceState(o,o.state,null),zi(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function ls(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var o=n}catch(i){o="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:o,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hs="function"===typeof WeakMap?WeakMap:Map;function gs(e,t,n){(n=qi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gc||(Gc=!0,jc=r),ds(0,t)},n}function ps(e,t,n){(n=qi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){ds(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===Yc?Yc=new Set([this]):Yc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=El.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=qi(-1,1)).tag=2,Fi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var ys=w.ReactCurrentOwner,Cs=!1;function ws(e,t,n,r){t.child=null===e?bi(t,null,n,r):Ti(t,e.child,n,r)}function Ts(e,t,n,r,o){n=n.render;var i=t.ref;return Pi(t,o),r=ma(e,t,n,r,i,o),n=va(),null===e||Cs?(ii&&n&&ti(t),t.flags|=1,ws(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Gs(e,t,o))}function bs(e,t,n,r,o){if(null===e){var i=n.type;return"function"!==typeof i||Nl(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ll(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,As(e,t,i,r,o))}if(i=e.child,0===(e.lanes&o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(a,r)&&e.ref===t.ref)return Gs(e,t,o)}return t.flags|=1,(e=Ml(i,r)).ref=t.ref,e.return=t,t.child=e}function As(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(cr(i,r)&&e.ref===t.ref){if(Cs=!1,t.pendingProps=r=i,0===(e.lanes&o))return t.lanes=e.lanes,Gs(e,t,o);0!==(131072&e.flags)&&(Cs=!0)}}return Is(e,t,n,r,o)}function Ss(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_o(Mc,Nc),Nc|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_o(Mc,Nc),Nc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,_o(Mc,Nc),Nc|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,_o(Mc,Nc),Nc|=r;return ws(e,t,o,n),t.child}function Es(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Is(e,t,n,r,o){var i=Mo(n)?Oo:Ro.current;return i=No(t,i),Pi(t,o),n=ma(e,t,n,r,i,o),r=va(),null===e||Cs?(ii&&r&&ti(t),t.flags|=1,ws(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Gs(e,t,o))}function _s(e,t,n,r,o){if(Mo(n)){var i=!0;Do(t)}else i=!1;if(Pi(t,o),null===t.stateNode)zs(e,t),as(t,n,r),cs(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var c=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=Oi(l):l=No(t,l=Mo(n)?Oo:Ro.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||c!==l)&&ss(t,a,r,l),Ui=!1;var h=t.memoizedState;a.state=h,zi(t,r,a,o),c=t.memoizedState,s!==r||h!==c||Po.current||Ui?("function"===typeof u&&(rs(t,n,u,r),c=t.memoizedState),(s=Ui||is(t,n,s,r,h,c,l))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=l,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Hi(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:ns(t.type,s),a.props=l,d=t.pendingProps,h=a.context,"object"===typeof(c=n.contextType)&&null!==c?c=Oi(c):c=No(t,c=Mo(n)?Oo:Ro.current);var g=n.getDerivedStateFromProps;(u="function"===typeof g||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==c)&&ss(t,a,r,c),Ui=!1,h=t.memoizedState,a.state=h,zi(t,r,a,o);var p=t.memoizedState;s!==d||h!==p||Po.current||Ui?("function"===typeof g&&(rs(t,n,g,r),p=t.memoizedState),(l=Ui||is(t,n,l,r,h,p,c)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return ks(e,t,n,r,i,o)}function ks(e,t,n,r,o,i){Es(e,t);var a=0!==(128&t.flags);if(!r&&!a)return o&&Ho(t,n,!1),Gs(e,t,i);r=t.stateNode,ys.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ti(t,e.child,null,i),t.child=Ti(t,null,s,i)):ws(e,t,s,i),t.memoizedState=r.state,o&&Ho(t,n,!0),t.child}function Rs(e){var t=e.stateNode;t.pendingContext?xo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&xo(0,t.context,!1),$i(e,t.containerInfo)}function Ps(e,t,n,r,o){return pi(),fi(o),t.flags|=256,ws(e,t,n,r),t.child}var Os,Ns,Ms,Ls,xs={dehydrated:null,treeContext:null,retryLane:0};function Us(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ds(e,t,n){var r,o=t.pendingProps,a=ea.current,s=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),_o(ea,1&a),null===e)return ui(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=o.children,e=o.fallback,s?(o=t.mode,s=t.child,c={mode:"hidden",children:c},0===(1&o)&&null!==s?(s.childLanes=0,s.pendingProps=c):s=Ul(c,o,0,null),e=xl(e,o,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Us(n),t.memoizedState=xs,e):Hs(t,c));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,o,a,s){if(n)return 256&t.flags?(t.flags&=-257,qs(e,t,s,r=us(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=Ul({mode:"visible",children:r.children},o,0,null),(a=xl(a,o,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Ti(t,e.child,null,s),t.child.memoizedState=Us(s),t.memoizedState=xs,a);if(0===(1&t.mode))return qs(e,t,s,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var c=r.dgst;return r=c,qs(e,t,s,r=us(a=Error(i(419)),r,void 0))}if(c=0!==(s&e.childLanes),Cs||c){if(null!==(r=Rc)){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|s))?0:o)&&o!==a.retryLane&&(a.retryLane=o,xi(e,o),nl(r,e,o,-1))}return fl(),qs(e,t,s,r=us(Error(i(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=_l.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,oi=lo(o.nextSibling),ri=t,ii=!0,ai=null,null!==e&&(Wo[Qo++]=Xo,Wo[Qo++]=Jo,Wo[Qo++]=$o,Xo=e.id,Jo=e.overflow,$o=t),t=Hs(t,r.children),t.flags|=4096,t)}(e,t,c,o,r,a,n);if(s){s=o.fallback,c=t.mode,r=(a=e.child).sibling;var l={mode:"hidden",children:o.children};return 0===(1&c)&&t.child!==a?((o=t.child).childLanes=0,o.pendingProps=l,t.deletions=null):(o=Ml(a,l)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Ml(r,s):(s=xl(s,c,n,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,c=null===(c=e.child.memoizedState)?Us(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},s.memoizedState=c,s.childLanes=e.childLanes&~n,t.memoizedState=xs,o}return e=(s=e.child).sibling,o=Ml(s,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Hs(e,t){return(t=Ul({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function qs(e,t,n,r){return null!==r&&fi(r),Ti(t,e.child,null,n),(e=Hs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ri(e.return,t,n)}function Bs(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Ks(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fs(e,n,t);else if(19===e.tag)Fs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_o(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Bs(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ta(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Bs(t,!0,n,null,i);break;case"together":Bs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Uc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Ml(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ml(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function js(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ys(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Vs(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ys(t),null;case 1:case 17:return Mo(t.type)&&Lo(),Ys(t),null;case 3:return r=t.stateNode,Xi(),Io(Po),Io(Ro),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ai&&(al(ai),ai=null))),Ns(e,t),Ys(t),null;case 5:Zi(t);var o=Qi(Wi.current);if(n=t.type,null!==e&&null!=t.stateNode)Ms(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Ys(t),null}if(e=Qi(Yi.current),hi(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[go]=t,r[po]=a,e=0!==(1&t.mode),n){case"dialog":qr("cancel",r),qr("close",r);break;case"iframe":case"object":case"embed":qr("load",r);break;case"video":case"audio":for(o=0;o<xr.length;o++)qr(xr[o],r);break;case"source":qr("error",r);break;case"img":case"image":case"link":qr("error",r),qr("load",r);break;case"details":qr("toggle",r);break;case"input":$(r,a),qr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},qr("invalid",r);break;case"textarea":oe(r,a),qr("invalid",r)}for(var c in ye(n,a),o=null,a)if(a.hasOwnProperty(c)){var l=a[c];"children"===c?"string"===typeof l?r.textContent!==l&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,l,e),o=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,l,e),o=["children",""+l]):s.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&qr("scroll",r)}switch(n){case"input":Y(r),Z(r,a,!0);break;case"textarea":Y(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[go]=t,e[po]=r,Os(e,t,!1,!1),t.stateNode=e;e:{switch(c=Ce(n,r),n){case"dialog":qr("cancel",e),qr("close",e),o=r;break;case"iframe":case"object":case"embed":qr("load",e),o=r;break;case"video":case"audio":for(o=0;o<xr.length;o++)qr(xr[o],e);o=r;break;case"source":qr("error",e),o=r;break;case"img":case"image":case"link":qr("error",e),qr("load",e),o=r;break;case"details":qr("toggle",e),o=r;break;case"input":$(e,r),o=Q(e,r),qr("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=D({},r,{value:void 0}),qr("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),qr("invalid",e)}for(a in ye(n,o),l=o)if(l.hasOwnProperty(a)){var u=l[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&qr("scroll",e):null!=u&&C(e,a,u,c))}switch(n){case"input":Y(e),Z(e,r,!1);break;case"textarea":Y(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ys(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Qi(Wi.current),Qi(Yi.current),hi(t)){if(r=t.stateNode,n=t.memoizedProps,r[go]=t,(a=r.nodeValue!==n)&&null!==(e=ri))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[go]=t,t.stateNode=r}return Ys(t),null;case 13:if(Io(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==oi&&0!==(1&t.mode)&&0===(128&t.flags))gi(),pi(),t.flags|=98560,a=!1;else if(a=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[go]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ys(t),a=!1}else null!==ai&&(al(ai),ai=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Lc&&(Lc=3):fl())),null!==t.updateQueue&&(t.flags|=4),Ys(t),null);case 4:return Xi(),Ns(e,t),null===e&&Kr(t.stateNode.containerInfo),Ys(t),null;case 10:return ki(t.type._context),Ys(t),null;case 19:if(Io(ea),null===(a=t.memoizedState))return Ys(t),null;if(r=0!==(128&t.flags),null===(c=a.rendering))if(r)js(a,!1);else{if(0!==Lc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=ta(e))){for(t.flags|=128,js(a,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(c=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,e=c.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _o(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>Kc&&(t.flags|=128,r=!0,js(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),js(a,!0),null===a.tail&&"hidden"===a.tailMode&&!c.alternate&&!ii)return Ys(t),null}else 2*Xe()-a.renderingStartTime>Kc&&1073741824!==n&&(t.flags|=128,r=!0,js(a,!1),t.lanes=4194304);a.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=a.last)?n.sibling=c:t.child=c,a.last=c)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=ea.current,_o(ea,r?1&n|2:1&n),t):(Ys(t),null);case 22:case 23:return dl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Nc)&&(Ys(t),6&t.subtreeFlags&&(t.flags|=8192)):Ys(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ws(e,t){switch(ni(t),t.tag){case 1:return Mo(t.type)&&Lo(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xi(),Io(Po),Io(Ro),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zi(t),null;case 13:if(Io(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Io(ea),null;case 4:return Xi(),null;case 10:return ki(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}Os=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ns=function(){},Ms=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Qi(Yi.current);var i,a=null;switch(n){case"input":o=Q(e,o),r=Q(e,r),a=[];break;case"select":o=D({},o,{value:void 0}),r=D({},r,{value:void 0}),a=[];break;case"textarea":o=re(e,o),r=re(e,r),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var c=o[u];for(i in c)c.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(i in c)!c.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&c[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(a||(a=[]),a.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(a=a||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(a=a||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&qr("scroll",e),a||c===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qs=!1,$s=!1,Xs="function"===typeof WeakSet?WeakSet:Set,Js=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sl(e,t,r)}else n.current=null}function ec(e,t,n){try{n()}catch(r){Sl(e,t,r)}}var tc=!1;function nc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&ec(t,n,i)}o=o.next}while(o!==r)}}function rc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function oc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ic(e){var t=e.alternate;null!==t&&(e.alternate=null,ic(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[go],delete t[po],delete t[mo],delete t[vo],delete t[yo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ac(e){return 5===e.tag||3===e.tag||4===e.tag}function sc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ac(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cc(e,t,n),e=e.sibling;null!==e;)cc(e,t,n),e=e.sibling}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}var uc=null,dc=!1;function hc(e,t,n){for(n=n.child;null!==n;)gc(e,t,n),n=n.sibling}function gc(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(ot,n)}catch(s){}switch(n.tag){case 5:$s||Zs(n,t);case 6:var r=uc,o=dc;uc=null,hc(e,t,n),dc=o,null!==(uc=r)&&(dc?(e=uc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):uc.removeChild(n.stateNode));break;case 18:null!==uc&&(dc?(e=uc,n=n.stateNode,8===e.nodeType?co(e.parentNode,n):1===e.nodeType&&co(e,n),Kt(e)):co(uc,n.stateNode));break;case 4:r=uc,o=dc,uc=n.stateNode.containerInfo,dc=!0,hc(e,t,n),uc=r,dc=o;break;case 0:case 11:case 14:case 15:if(!$s&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&ec(n,t,a),o=o.next}while(o!==r)}hc(e,t,n);break;case 1:if(!$s&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Sl(n,t,s)}hc(e,t,n);break;case 21:hc(e,t,n);break;case 22:1&n.mode?($s=(r=$s)||null!==n.memoizedState,hc(e,t,n),$s=r):hc(e,t,n);break;default:hc(e,t,n)}}function pc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach(function(t){var r=kl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function fc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var a=e,s=t,c=s;e:for(;null!==c;){switch(c.tag){case 5:uc=c.stateNode,dc=!1;break e;case 3:case 4:uc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===uc)throw Error(i(160));gc(a,s,o),uc=null,dc=!1;var l=o.alternate;null!==l&&(l.return=null),o.return=null}catch(u){Sl(o,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mc(t,e),t=t.sibling}function mc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fc(t,e),vc(e),4&r){try{nc(3,e,e.return),rc(3,e)}catch(m){Sl(e,e.return,m)}try{nc(5,e,e.return)}catch(m){Sl(e,e.return,m)}}break;case 1:fc(t,e),vc(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(fc(t,e),vc(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var o=e.stateNode;try{he(o,"")}catch(m){Sl(e,e.return,m)}}if(4&r&&null!=(o=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===a.type&&null!=a.name&&X(o,a),Ce(c,s);var u=Ce(c,a);for(s=0;s<l.length;s+=2){var d=l[s],h=l[s+1];"style"===d?me(o,h):"dangerouslySetInnerHTML"===d?de(o,h):"children"===d?he(o,h):C(o,d,h,u)}switch(c){case"input":J(o,a);break;case"textarea":ie(o,a);break;case"select":var g=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(o,!!a.multiple,p,!1):g!==!!a.multiple&&(null!=a.defaultValue?ne(o,!!a.multiple,a.defaultValue,!0):ne(o,!!a.multiple,a.multiple?[]:"",!1))}o[po]=a}catch(m){Sl(e,e.return,m)}}break;case 6:if(fc(t,e),vc(e),4&r){if(null===e.stateNode)throw Error(i(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(m){Sl(e,e.return,m)}}break;case 3:if(fc(t,e),vc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Kt(t.containerInfo)}catch(m){Sl(e,e.return,m)}break;case 4:default:fc(t,e),vc(e);break;case 13:fc(t,e),vc(e),8192&(o=e.child).flags&&(a=null!==o.memoizedState,o.stateNode.isHidden=a,!a||null!==o.alternate&&null!==o.alternate.memoizedState||(Bc=Xe())),4&r&&pc(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?($s=(u=$s)||d,fc(t,e),$s=u):fc(t,e),vc(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Js=e,d=e.child;null!==d;){for(h=Js=d;null!==Js;){switch(p=(g=Js).child,g.tag){case 0:case 11:case 14:case 15:nc(4,g,g.return);break;case 1:Zs(g,g.return);var f=g.stateNode;if("function"===typeof f.componentWillUnmount){r=g,n=g.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(m){Sl(r,n,m)}}break;case 5:Zs(g,g.return);break;case 22:if(null!==g.memoizedState){Tc(h);continue}}null!==p?(p.return=g,Js=p):Tc(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{o=h.stateNode,u?"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none":(c=h.stateNode,s=void 0!==(l=h.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=fe("display",s))}catch(m){Sl(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Sl(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fc(t,e),vc(e),4&r&&pc(e);case 21:}}function vc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ac(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(he(o,""),r.flags&=-33),lc(e,sc(e),o);break;case 3:case 4:var a=r.stateNode.containerInfo;cc(e,sc(e),a);break;default:throw Error(i(161))}}catch(s){Sl(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yc(e,t,n){Js=e,Cc(e,t,n)}function Cc(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var o=Js,i=o.child;if(22===o.tag&&r){var a=null!==o.memoizedState||Qs;if(!a){var s=o.alternate,c=null!==s&&null!==s.memoizedState||$s;s=Qs;var l=$s;if(Qs=a,($s=c)&&!l)for(Js=o;null!==Js;)c=(a=Js).child,22===a.tag&&null!==a.memoizedState?bc(o):null!==c?(c.return=a,Js=c):bc(o);for(;null!==i;)Js=i,Cc(i,t,n),i=i.sibling;Js=o,Qs=s,$s=l}wc(e)}else 0!==(8772&o.subtreeFlags)&&null!==i?(i.return=o,Js=i):wc(e)}}function wc(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$s||rc(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$s)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Gi(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Gi(t,s,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Kt(h)}}}break;default:throw Error(i(163))}$s||512&t.flags&&oc(t)}catch(g){Sl(t,t.return,g)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function Tc(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function bc(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rc(4,t)}catch(c){Sl(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(c){Sl(t,o,c)}}var i=t.return;try{oc(t)}catch(c){Sl(t,i,c)}break;case 5:var a=t.return;try{oc(t)}catch(c){Sl(t,a,c)}}}catch(c){Sl(t,t.return,c)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var Ac,Sc=Math.ceil,Ec=w.ReactCurrentDispatcher,Ic=w.ReactCurrentOwner,_c=w.ReactCurrentBatchConfig,kc=0,Rc=null,Pc=null,Oc=0,Nc=0,Mc=Eo(0),Lc=0,xc=null,Uc=0,Dc=0,Hc=0,qc=null,Fc=null,Bc=0,Kc=1/0,zc=null,Gc=!1,jc=null,Yc=null,Vc=!1,Wc=null,Qc=0,$c=0,Xc=null,Jc=-1,Zc=0;function el(){return 0!==(6&kc)?Xe():-1!==Jc?Jc:Jc=Xe()}function tl(e){return 0===(1&e.mode)?1:0!==(2&kc)&&0!==Oc?Oc&-Oc:null!==mi.transition?(0===Zc&&(Zc=ft()),Zc):0!==(e=Ct)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nl(e,t,n,r){if(50<$c)throw $c=0,Xc=null,Error(i(185));vt(e,n,r),0!==(2&kc)&&e===Rc||(e===Rc&&(0===(2&kc)&&(Dc|=n),4===Lc&&sl(e,Oc)),rl(e,r),1===n&&0===kc&&0===(1&t.mode)&&(Kc=Xe()+500,Fo&&zo()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),s=1<<a,c=o[a];-1===c?0!==(s&n)&&0===(s&r)||(o[a]=gt(s,t)):c<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=ht(e,e===Rc?Oc:0);if(0===r)null!==n&&We(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&We(n),1===t)0===e.tag?function(e){Fo=!0,Ko(e)}(cl.bind(null,e)):Ko(cl.bind(null,e)),ao(function(){0===(6&kc)&&zo()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rl(n,ol.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ol(e,t){if(Jc=-1,Zc=0,0!==(6&kc))throw Error(i(327));var n=e.callbackNode;if(bl()&&e.callbackNode!==n)return null;var r=ht(e,e===Rc?Oc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ml(e,r);else{t=r;var o=kc;kc|=2;var a=pl();for(Rc===e&&Oc===t||(zc=null,Kc=Xe()+500,hl(e,t));;)try{yl();break}catch(c){gl(e,c)}_i(),Ec.current=a,kc=o,null!==Pc?t=0:(Rc=null,Oc=0,t=Lc)}if(0!==t){if(2===t&&(0!==(o=pt(e))&&(r=o,t=il(e,o))),1===t)throw n=xc,hl(e,0),sl(e,r),rl(e,Xe()),n;if(6===t)sl(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!sr(i(),o))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=ml(e,r))&&(0!==(a=pt(e))&&(r=a,t=il(e,a))),1===t))throw n=xc,hl(e,0),sl(e,r),rl(e,Xe()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:Tl(e,Fc,zc);break;case 3:if(sl(e,r),(130023424&r)===r&&10<(t=Bc+500-Xe())){if(0!==ht(e,0))break;if(((o=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(Tl.bind(null,e,Fc,zc),t);break}Tl(e,Fc,zc);break;case 4:if(sl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>o&&(o=s),r&=~a}if(r=o,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sc(r/1960))-r)){e.timeoutHandle=ro(Tl.bind(null,e,Fc,zc),r);break}Tl(e,Fc,zc);break;default:throw Error(i(329))}}}return rl(e,Xe()),e.callbackNode===n?ol.bind(null,e):null}function il(e,t){var n=qc;return e.current.memoizedState.isDehydrated&&(hl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=Fc,Fc=n,null!==t&&al(t)),e}function al(e){null===Fc?Fc=e:Fc.push.apply(Fc,e)}function sl(e,t){for(t&=~Hc,t&=~Dc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function cl(e){if(0!==(6&kc))throw Error(i(327));bl();var t=ht(e,0);if(0===(1&t))return rl(e,Xe()),null;var n=ml(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=il(e,r))}if(1===n)throw n=xc,hl(e,0),sl(e,t),rl(e,Xe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tl(e,Fc,zc),rl(e,Xe()),null}function ll(e,t){var n=kc;kc|=1;try{return e(t)}finally{0===(kc=n)&&(Kc=Xe()+500,Fo&&zo())}}function ul(e){null!==Wc&&0===Wc.tag&&0===(6&kc)&&bl();var t=kc;kc|=1;var n=_c.transition,r=Ct;try{if(_c.transition=null,Ct=1,e)return e()}finally{Ct=r,_c.transition=n,0===(6&(kc=t))&&zo()}}function dl(){Nc=Mc.current,Io(Mc)}function hl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Pc)for(n=Pc.return;null!==n;){var r=n;switch(ni(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Lo();break;case 3:Xi(),Io(Po),Io(Ro),ra();break;case 5:Zi(r);break;case 4:Xi();break;case 13:case 19:Io(ea);break;case 10:ki(r.type._context);break;case 22:case 23:dl()}n=n.return}if(Rc=e,Pc=e=Ml(e.current,null),Oc=Nc=t,Lc=0,xc=null,Hc=Dc=Uc=0,Fc=qc=null,null!==Ni){for(t=0;t<Ni.length;t++)if(null!==(r=(n=Ni[t]).interleaved)){n.interleaved=null;var o=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=o,r.next=a}n.pending=r}Ni=null}return e}function gl(e,t){for(;;){var n=Pc;try{if(_i(),oa.current=Ja,ua){for(var r=sa.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ua=!1}if(aa=0,la=ca=sa=null,da=!1,ha=0,Ic.current=null,null===n||null===n.return){Lc=1,xc=t,Pc=null;break}e:{var a=e,s=n.return,c=n,l=t;if(t=Oc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,d=c,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,vs(p,s,c,0,t),1&p.mode&&fs(a,u,t),l=u;var f=(t=p).updateQueue;if(null===f){var m=new Set;m.add(l),t.updateQueue=m}else f.add(l);break e}if(0===(1&t)){fs(a,u,t),fl();break e}l=Error(i(426))}else if(ii&&1&c.mode){var v=ms(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vs(v,s,c,0,t),fi(ls(l,c));break e}}a=l=ls(l,c),4!==Lc&&(Lc=2),null===qc?qc=[a]:qc.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Ki(a,gs(0,l,t));break e;case 1:c=l;var y=a.type,C=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==C&&"function"===typeof C.componentDidCatch&&(null===Yc||!Yc.has(C)))){a.flags|=65536,t&=-t,a.lanes|=t,Ki(a,ps(a,c,t));break e}}a=a.return}while(null!==a)}wl(n)}catch(w){t=w,Pc===n&&null!==n&&(Pc=n=n.return);continue}break}}function pl(){var e=Ec.current;return Ec.current=Ja,null===e?Ja:e}function fl(){0!==Lc&&3!==Lc&&2!==Lc||(Lc=4),null===Rc||0===(268435455&Uc)&&0===(268435455&Dc)||sl(Rc,Oc)}function ml(e,t){var n=kc;kc|=2;var r=pl();for(Rc===e&&Oc===t||(zc=null,hl(e,t));;)try{vl();break}catch(o){gl(e,o)}if(_i(),kc=n,Ec.current=r,null!==Pc)throw Error(i(261));return Rc=null,Oc=0,Lc}function vl(){for(;null!==Pc;)Cl(Pc)}function yl(){for(;null!==Pc&&!Qe();)Cl(Pc)}function Cl(e){var t=Ac(e.alternate,e,Nc);e.memoizedProps=e.pendingProps,null===t?wl(e):Pc=t,Ic.current=null}function wl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Vs(n,t,Nc)))return void(Pc=n)}else{if(null!==(n=Ws(n,t)))return n.flags&=32767,void(Pc=n);if(null===e)return Lc=6,void(Pc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pc=t);Pc=t=e}while(null!==t);0===Lc&&(Lc=5)}function Tl(e,t,n){var r=Ct,o=_c.transition;try{_c.transition=null,Ct=1,function(e,t,n,r){do{bl()}while(null!==Wc);if(0!==(6&kc))throw Error(i(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-at(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}(e,a),e===Rc&&(Pc=Rc=null,Oc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Vc||(Vc=!0,Rl(tt,function(){return bl(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=_c.transition,_c.transition=null;var s=Ct;Ct=1;var c=kc;kc|=4,Ic.current=null,function(e,t){if(eo=Gt,gr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(T){n=null;break e}var s=0,c=-1,l=-1,u=0,d=0,h=e,g=null;t:for(;;){for(var p;h!==n||0!==o&&3!==h.nodeType||(c=s+o),h!==a||0!==r&&3!==h.nodeType||(l=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)g=h,h=p;for(;;){if(h===e)break t;if(g===n&&++u===o&&(c=s),g===a&&++d===r&&(l=s),null!==(p=h.nextSibling))break;g=(h=g).parentNode}h=p}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Gt=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var m=f.memoizedProps,v=f.memoizedState,y=t.stateNode,C=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ns(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(i(163))}}catch(T){Sl(t,t.return,T)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}f=tc,tc=!1}(e,n),mc(n,e),pr(to),Gt=!!eo,to=eo=null,e.current=n,yc(n,e,o),$e(),kc=c,Ct=s,_c.transition=a}else e.current=n;if(Vc&&(Vc=!1,Wc=e,Qc=o),a=e.pendingLanes,0===a&&(Yc=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Gc)throw Gc=!1,e=jc,jc=null,e;0!==(1&Qc)&&0!==e.tag&&bl(),a=e.pendingLanes,0!==(1&a)?e===Xc?$c++:($c=0,Xc=e):$c=0,zo()}(e,t,n,r)}finally{_c.transition=o,Ct=r}return null}function bl(){if(null!==Wc){var e=wt(Qc),t=_c.transition,n=Ct;try{if(_c.transition=null,Ct=16>e?16:e,null===Wc)var r=!1;else{if(e=Wc,Wc=null,Qc=0,0!==(6&kc))throw Error(i(331));var o=kc;for(kc|=4,Js=e.current;null!==Js;){var a=Js,s=a.child;if(0!==(16&Js.flags)){var c=a.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Js=u;null!==Js;){var d=Js;switch(d.tag){case 0:case 11:case 15:nc(8,d,a)}var h=d.child;if(null!==h)h.return=d,Js=h;else for(;null!==Js;){var g=(d=Js).sibling,p=d.return;if(ic(d),d===u){Js=null;break}if(null!==g){g.return=p,Js=g;break}Js=p}}}var f=a.alternate;if(null!==f){var m=f.child;if(null!==m){f.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Js=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Js=s;else e:for(;null!==Js;){if(0!==(2048&(a=Js).flags))switch(a.tag){case 0:case 11:case 15:nc(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Js=y;break e}Js=a.return}}var C=e.current;for(Js=C;null!==Js;){var w=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Js=w;else e:for(s=C;null!==Js;){if(0!==(2048&(c=Js).flags))try{switch(c.tag){case 0:case 11:case 15:rc(9,c)}}catch(b){Sl(c,c.return,b)}if(c===s){Js=null;break e}var T=c.sibling;if(null!==T){T.return=c.return,Js=T;break e}Js=c.return}}if(kc=o,zo(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(ot,e)}catch(b){}r=!0}return r}finally{Ct=n,_c.transition=t}}return!1}function Al(e,t,n){e=Fi(e,t=gs(0,t=ls(n,t),1),1),t=el(),null!==e&&(vt(e,1,t),rl(e,t))}function Sl(e,t,n){if(3===e.tag)Al(e,e,n);else for(;null!==t;){if(3===t.tag){Al(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Yc||!Yc.has(r))){t=Fi(t,e=ps(t,e=ls(n,e),1),1),e=el(),null!==t&&(vt(t,1,e),rl(t,e));break}}t=t.return}}function El(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Rc===e&&(Oc&n)===n&&(4===Lc||3===Lc&&(130023424&Oc)===Oc&&500>Xe()-Bc?hl(e,0):Hc|=n),rl(e,t)}function Il(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=el();null!==(e=xi(e,t))&&(vt(e,t,n),rl(e,n))}function _l(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Il(e,n)}function kl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Il(e,n)}function Rl(e,t){return Ve(e,t)}function Pl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ol(e,t,n,r){return new Pl(e,t,n,r)}function Nl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ml(e,t){var n=e.alternate;return null===n?((n=Ol(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ll(e,t,n,r,o,a){var s=2;if(r=e,"function"===typeof e)Nl(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case A:return xl(n.children,o,a,t);case S:s=8,o|=8;break;case E:return(e=Ol(12,n,t,2|o)).elementType=E,e.lanes=a,e;case R:return(e=Ol(13,n,t,o)).elementType=R,e.lanes=a,e;case P:return(e=Ol(19,n,t,o)).elementType=P,e.lanes=a,e;case M:return Ul(n,o,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:s=10;break e;case _:s=9;break e;case k:s=11;break e;case O:s=14;break e;case N:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Ol(s,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function xl(e,t,n,r){return(e=Ol(7,e,r,t)).lanes=n,e}function Ul(e,t,n,r){return(e=Ol(22,e,r,t)).elementType=M,e.lanes=n,e.stateNode={isHidden:!1},e}function Dl(e,t,n){return(e=Ol(6,e,null,t)).lanes=n,e}function Hl(e,t,n){return(t=Ol(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ql(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Fl(e,t,n,r,o,i,a,s,c){return e=new ql(e,t,n,s,c),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Ol(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Di(i),e}function Bl(e){if(!e)return ko;e:{if(Ke(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Mo(n))return Uo(e,n,t)}return t}function Kl(e,t,n,r,o,i,a,s,c){return(e=Fl(n,r,!0,e,0,i,0,s,c)).context=Bl(null),n=e.current,(i=qi(r=el(),o=tl(n))).callback=void 0!==t&&null!==t?t:null,Fi(n,i,o),e.current.lanes=o,vt(e,o,r),rl(e,r),e}function zl(e,t,n,r){var o=t.current,i=el(),a=tl(o);return n=Bl(n),null===t.context?t.context=n:t.pendingContext=n,(t=qi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fi(o,t,a))&&(nl(e,o,a,i),Bi(e,o,a)),a}function Gl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function jl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yl(e,t){jl(e,t),(e=e.alternate)&&jl(e,t)}Ac=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Po.current)Cs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Cs=!1,function(e,t,n){switch(t.tag){case 3:Rs(t),pi();break;case 5:Ji(t);break;case 1:Mo(t.type)&&Do(t);break;case 4:$i(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;_o(Ai,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_o(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ds(e,t,n):(_o(ea,1&ea.current),null!==(e=Gs(e,t,n))?e.sibling:null);_o(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ks(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),_o(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,n)}return Gs(e,t,n)}(e,t,n);Cs=0!==(131072&e.flags)}else Cs=!1,ii&&0!==(1048576&t.flags)&&ei(t,Vo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zs(e,t),e=t.pendingProps;var o=No(t,Ro.current);Pi(t,n),o=ma(null,t,r,e,o,n);var a=va();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mo(r)?(a=!0,Do(t)):a=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Di(t),o.updater=os,t.stateNode=o,o._reactInternals=t,cs(t,r,e,n),t=ks(null,t,r,!0,a,n)):(t.tag=0,ii&&a&&ti(t),ws(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zs(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Nl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===k)return 11;if(e===O)return 14}return 2}(r),e=ns(r,e),o){case 0:t=Is(null,t,r,e,n);break e;case 1:t=_s(null,t,r,e,n);break e;case 11:t=Ts(null,t,r,e,n);break e;case 14:t=bs(null,t,r,ns(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Is(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 1:return r=t.type,o=t.pendingProps,_s(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 3:e:{if(Rs(t),null===e)throw Error(i(387));r=t.pendingProps,o=(a=t.memoizedState).element,Hi(e,t),zi(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ps(e,t,r,n,o=ls(Error(i(423)),t));break e}if(r!==o){t=Ps(e,t,r,n,o=ls(Error(i(424)),t));break e}for(oi=lo(t.stateNode.containerInfo.firstChild),ri=t,ii=!0,ai=null,n=bi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),r===o){t=Gs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return Ji(t),null===e&&ui(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,no(r,o)?s=null:null!==a&&no(r,a)&&(t.flags|=32),Es(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ui(t),null;case 13:return Ds(e,t,n);case 4:return $i(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ti(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,Ts(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,a=t.memoizedProps,s=o.value,_o(Ai,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===o.children&&!Po.current){t=Gs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var c=a.dependencies;if(null!==c){s=a.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===a.tag){(l=qi(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ri(a.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(i(341));s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Ri(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}ws(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Pi(t,n),r=r(o=Oi(o)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return o=ns(r=t.type,t.pendingProps),bs(e,t,r,o=ns(r.type,o),n);case 15:return As(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ns(r,o),zs(e,t),t.tag=1,Mo(r)?(e=!0,Do(t)):e=!1,Pi(t,n),as(t,r,o),cs(t,r,o,n),ks(null,t,r,!0,e,n);case 19:return Ks(e,t,n);case 22:return Ss(e,t,n)}throw Error(i(156,t.tag))};var Vl="function"===typeof reportError?reportError:function(e){console.error(e)};function Wl(e){this._internalRoot=e}function Ql(e){this._internalRoot=e}function $l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jl(){}function Zl(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof o){var s=o;o=function(){var e=Gl(a);s.call(e)}}zl(t,a,e,o)}else a=function(e,t,n,r,o){if(o){if("function"===typeof r){var i=r;r=function(){var e=Gl(a);i.call(e)}}var a=Kl(t,r,e,0,null,!1,0,"",Jl);return e._reactRootContainer=a,e[fo]=a.current,Kr(8===e.nodeType?e.parentNode:e),ul(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var s=r;r=function(){var e=Gl(c);s.call(e)}}var c=Fl(e,0,!1,null,0,!1,0,"",Jl);return e._reactRootContainer=c,e[fo]=c.current,Kr(8===e.nodeType?e.parentNode:e),ul(function(){zl(t,c,n,r)}),c}(n,t,e,o,r);return Gl(a)}Ql.prototype.render=Wl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));zl(e,t,null,null)},Ql.prototype.unmount=Wl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ul(function(){zl(null,e,null,null)}),t[fo]=null}},Ql.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&0!==t&&t<Mt[n].priority;n++);Mt.splice(n,0,e),0===n&&Dt(e)}},Tt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rl(t,Xe()),0===(6&kc)&&(Kc=Xe()+500,zo()))}break;case 13:ul(function(){var t=xi(e,1);if(null!==t){var n=el();nl(t,e,1,n)}}),Yl(e,1)}},bt=function(e){if(13===e.tag){var t=xi(e,134217728);if(null!==t)nl(t,e,134217728,el());Yl(e,134217728)}},At=function(e){if(13===e.tag){var t=tl(e),n=xi(e,t);if(null!==n)nl(n,e,t,el());Yl(e,t)}},St=function(){return Ct},Et=function(e,t){var n=Ct;try{return Ct=e,t()}finally{Ct=n}},be=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=bo(r);if(!o)throw Error(i(90));V(r),J(r,o)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},ke=ll,Re=ul;var eu={usingClientEntryPoint:!1,Events:[wo,To,bo,Ie,_e,ll]},tu={findFiberByHostInstance:Co,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=je(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{ot=ru.inject(nu),it=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$l(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$l(e))throw Error(i(299));var n=!1,r="",o=Vl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Fl(e,1,!1,null,0,n,0,r,o),e[fo]=t.current,Kr(8===e.nodeType?e.parentNode:e),new Wl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=je(t))?null:e.stateNode},t.flushSync=function(e){return ul(e)},t.hydrate=function(e,t,n){if(!Xl(t))throw Error(i(200));return Zl(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$l(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,o=!1,a="",s=Vl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Kl(t,null,e,1,null!=n?n:null,o,0,a,s),e[fo]=t.current,Kr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Ql(t)},t.render=function(e,t,n){if(!Xl(t))throw Error(i(200));return Zl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xl(e))throw Error(i(40));return!!e._reactRootContainer&&(ul(function(){Zl(null,null,e,!1,function(){e._reactRootContainer=null,e[fo]=null})}),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xl(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Zl(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},935:(e,t,n)=>{var r=n(233),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,i={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!c.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:l,ref:u,props:i,_owner:s.current}}t.Fragment=i,t.jsx=l,t.jsxs=l},986:(e,t,n)=>{function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}n.d(t,{A:()=>r})}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(i,a),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{128:"ef08620f",446:"93c16f96",484:"880b6729"}[e]+".chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="vimarsh-frontend:";n.l=(r,o,i,a)=>{if(e[r])e[r].push(o);else{var s,c;if(void 0!==i)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[o];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(g);var o=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach(e=>e(n)),t)return t(n)},g=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),c&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var i=new Promise((n,r)=>o=e[t]=[n,r]);r.push(o[2]=i);var a=n.p+n.u(t),s=new Error;n.l(a,r=>{if(n.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,o[1](s)}},"chunk-"+t,t)}};var t=(t,r)=>{var o,i,a=r[0],s=r[1],c=r[2],l=0;if(a.some(t=>0!==e[t])){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(c)c(n)}for(t&&t(r);l<a.length;l++)i=a[l],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkvimarsh_frontend=self.webpackChunkvimarsh_frontend||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(233),o=n.t(r,2),i=n(457),a=(n(31),n(848)),s=n.t(a,2),c=n(216),l=n(387);new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(Cs){}new Map;const u=o.startTransition;s.flushSync,o.useId;function d(e){let{basename:t,children:n,future:o,window:i}=e,a=r.useRef();null==a.current&&(a.current=(0,l.zR)({window:i,v5Compat:!0}));let s=a.current,[d,h]=r.useState({action:s.action,location:s.location}),{v7_startTransition:g}=o||{},p=r.useCallback(e=>{g&&u?u(()=>h(e)):h(e)},[h,g]);return r.useLayoutEffect(()=>s.listen(p),[s,p]),r.useEffect(()=>(0,c.V8)(o),[o]),r.createElement(c.Ix,{basename:t,children:n,location:d.location,navigationType:d.action,navigator:s,future:o})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var h,g;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(h||(h={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(g||(g={}));var p=n(291),f=n(555),m=n(623),v=n(385);const y="AAD",C="OIDC",w="none";var T=n(823);const b="client_info_decoding_error",A="client_info_empty_error",S="token_parsing_error",E="null_or_empty_token",I="endpoints_resolution_error",_="network_error",k="openid_config_error",R="hash_not_deserialized",P="invalid_state",O="state_mismatch",N="state_not_found",M="nonce_mismatch",L="auth_time_not_found",x="max_age_transpired",U="multiple_matching_tokens",D="multiple_matching_accounts",H="multiple_matching_appMetadata",q="request_cannot_be_made",F="cannot_remove_empty_scope",B="cannot_append_scopeset",K="empty_input_scopeset",z="device_code_polling_cancelled",G="device_code_expired",j="device_code_unknown_error",Y="no_account_in_silent_request",V="invalid_cache_record",W="invalid_cache_environment",Q="no_account_found",$="no_crypto_object",X="unexpected_credential_type",J="invalid_assertion",Z="invalid_client_credential",ee="token_refresh_required",te="user_timeout_reached",ne="token_claims_cnf_required_for_signedjwt",re="authorization_code_missing_from_server_response",oe="binding_key_not_removed",ie="end_session_endpoint_not_supported",ae="key_id_missing",se="no_network_connectivity",ce="user_canceled",le="missing_tenant_id_error",ue="method_not_implemented",de="nested_app_auth_bridge_disabled",he={[b]:"The client info could not be parsed/decoded correctly",[A]:"The client info was empty",[S]:"Token cannot be parsed",[E]:"The token is null or empty",[I]:"Endpoints cannot be resolved",[_]:"Network request failed",[k]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[R]:"The hash parameters could not be deserialized",[P]:"State was not the expected format",[O]:"State mismatch error",[N]:"State not found",[M]:"Nonce mismatch error",[L]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[x]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[U]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[D]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[H]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[q]:"Token request cannot be made without authorization code or refresh token.",[F]:"Cannot remove null or empty scope from ScopeSet",[B]:"Cannot append ScopeSet",[K]:"Empty input ScopeSet cannot be processed",[z]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[G]:"Device code is expired.",[j]:"Device code stopped polling for unknown reasons.",[Y]:"Please pass an account object, silent flow is not supported without account information",[V]:"Cache record object was null or undefined.",[W]:"Invalid environment when attempting to create cache entry",[Q]:"No account found in cache for given key.",[$]:"No crypto object detected.",[X]:"Unexpected credential type.",[J]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[Z]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[ee]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[te]:"User defined timeout for device code polling reached",[ne]:"Cannot generate a POP jwt if the token_claims are not populated",[re]:"Server response does not contain an authorization code to proceed",[oe]:"Could not remove the credential's binding key from storage.",[ie]:"The provided authority does not support logout",[ae]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[se]:"No network connectivity. Check your internet connection.",[ce]:"User cancelled the flow.",[le]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[ue]:"This method has not been implemented",[de]:"The nested app auth bridge is disabled"};class ge extends T.lR{constructor(e,t){super(e,t?"".concat(he[e],": ").concat(t):he[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,ge.prototype)}}function pe(e,t){return new ge(e,t)}const fe={createNewGuid:()=>{throw pe(ue)},base64Decode:()=>{throw pe(ue)},base64Encode:()=>{throw pe(ue)},base64UrlEncode:()=>{throw pe(ue)},encodeKid:()=>{throw pe(ue)},async getPublicKeyThumbprint(){throw pe(ue)},async removeTokenBindingKey(){throw pe(ue)},async clearKeystore(){throw pe(ue)},async signJwt(){throw pe(ue)},async hashString(){throw pe(ue)}},me="@azure/msal-common",ve="14.16.0";function ye(e,t){const n=function(e){if(!e)throw pe(E);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);if(!t||t.length<4)throw pe(S);return t[2]}(e);try{const e=t(n);return JSON.parse(e)}catch(r){throw pe(S)}}function Ce(e,t){if(0===t||Date.now()-3e5>e+t)throw pe(x)}function we(){return Math.round((new Date).getTime()/1e3)}function Te(e,t){const n=Number(e)||0;return we()+t>n}function be(e){return[Pe(e),Oe(e),Ne(e),Me(e),Le(e)].join(v.LR.CACHE_KEY_SEPARATOR).toLowerCase()}function Ae(e,t,n,r,o){return{credentialType:v.aG.ID_TOKEN,homeAccountId:e,environment:t,clientId:r,secret:n,realm:o}}function Se(e,t,n,r,o,i,a,s,c,l,u,d,h,g,p){var f,m;const y={homeAccountId:e,credentialType:v.aG.ACCESS_TOKEN,secret:n,cachedAt:we().toString(),expiresOn:a.toString(),extendedExpiresOn:s.toString(),environment:t,clientId:r,realm:o,target:i,tokenType:u||v.IO.BEARER};if(d&&(y.userAssertionHash=d),l&&(y.refreshOn=l.toString()),g&&(y.requestedClaims=g,y.requestedClaimsHash=p),(null===(f=y.tokenType)||void 0===f?void 0:f.toLowerCase())!==v.IO.BEARER.toLowerCase())switch(y.credentialType=v.aG.ACCESS_TOKEN_WITH_AUTH_SCHEME,y.tokenType){case v.IO.POP:const e=ye(n,c);if(null===e||void 0===e||null===(m=e.cnf)||void 0===m||!m.kid)throw pe(ne);y.keyId=e.cnf.kid;break;case v.IO.SSH:y.keyId=h}return y}function Ee(e,t,n,r,o,i,a){const s={credentialType:v.aG.REFRESH_TOKEN,homeAccountId:e,environment:t,clientId:r,secret:n};return i&&(s.userAssertionHash=i),o&&(s.familyId=o),a&&(s.expiresOn=a.toString()),s}function Ie(e){return e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")}function _e(e){return!!e&&(Ie(e)&&e.hasOwnProperty("realm")&&e.hasOwnProperty("target")&&(e.credentialType===v.aG.ACCESS_TOKEN||e.credentialType===v.aG.ACCESS_TOKEN_WITH_AUTH_SCHEME))}function ke(e){return!!e&&(Ie(e)&&e.hasOwnProperty("realm")&&e.credentialType===v.aG.ID_TOKEN)}function Re(e){return!!e&&(Ie(e)&&e.credentialType===v.aG.REFRESH_TOKEN)}function Pe(e){return[e.homeAccountId,e.environment].join(v.LR.CACHE_KEY_SEPARATOR).toLowerCase()}function Oe(e){const t=e.credentialType===v.aG.REFRESH_TOKEN&&e.familyId||e.clientId;return[e.credentialType,t,e.realm||""].join(v.LR.CACHE_KEY_SEPARATOR).toLowerCase()}function Ne(e){return(e.target||"").toLowerCase()}function Me(e){return(e.requestedClaimsHash||"").toLowerCase()}function Le(e){return e.tokenType&&e.tokenType.toLowerCase()!==v.IO.BEARER.toLowerCase()?e.tokenType.toLowerCase():""}function xe(){return we()+v.u0.REFRESH_TIME_SECONDS}function Ue(e,t,n){e.authorization_endpoint=t.authorization_endpoint,e.token_endpoint=t.token_endpoint,e.end_session_endpoint=t.end_session_endpoint,e.issuer=t.issuer,e.endpointsFromNetwork=n,e.jwks_uri=t.jwks_uri}function De(e,t,n){e.aliases=t.aliases,e.preferred_cache=t.preferred_cache,e.preferred_network=t.preferred_network,e.aliasesFromNetwork=n}function He(e){return e.expiresAt<=we()}const qe="redirect_uri_empty",Fe="claims_request_parsing_error",Be="authority_uri_insecure",Ke="url_parse_error",ze="empty_url_error",Ge="empty_input_scopes_error",je="invalid_prompt_value",Ye="invalid_claims",Ve="token_request_empty",We="logout_request_empty",Qe="invalid_code_challenge_method",$e="pkce_params_missing",Xe="invalid_cloud_discovery_metadata",Je="invalid_authority_metadata",Ze="untrusted_authority",et="missing_ssh_jwk",tt="missing_ssh_kid",nt="missing_nonce_authentication_header",rt="invalid_authentication_header",ot="cannot_set_OIDCOptions",it="cannot_allow_native_broker",at="authority_mismatch",st={[qe]:"A redirect URI is required for all calls, and none has been set.",[Fe]:"Could not parse the given claims request object.",[Be]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Ke]:"URL could not be parsed into appropriate segments.",[ze]:"URL was empty or null.",[Ge]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[je]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[Ye]:"Given claims parameter must be a stringified JSON object.",[Ve]:"Token request was empty and not found in cache.",[We]:"The logout request was null or undefined.",[Qe]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[$e]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Xe]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Je]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Ze]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[et]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[tt]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[nt]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[rt]:"Invalid authentication header provided",[ot]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[it]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[at]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class ct extends T.lR{constructor(e){super(e,st[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,ct.prototype)}}function lt(e){return new ct(e)}class ut{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return 0===Object.keys(t).length}catch(Cs){}return!0}static startsWith(e,t){return 0===e.indexOf(t)}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},n=e.split("&"),r=e=>decodeURIComponent(e.replace(/\+/g," "));return n.forEach(e=>{if(e.trim()){const[n,o]=e.split(/=(.+)/g,2);n&&o&&(t[r(n)]=r(o))}}),t}static trimArrayEntries(e){return e.map(e=>e.trim())}static removeEmptyStringsFromArray(e){return e.filter(e=>!!e)}static jsonParseHelper(e){try{return JSON.parse(e)}catch(Cs){return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}class dt{constructor(e){const t=e?ut.trimArrayEntries([...e]):[],n=t?ut.removeEmptyStringsFromArray(t):[];this.validateInputScopes(n),this.scopes=new Set,n.forEach(e=>this.scopes.add(e))}static fromString(e){const t=(e||v.YM.EMPTY_STRING).split(" ");return new dt(t)}static createSearchScopes(e){const t=new dt(e);return t.containsOnlyOIDCScopes()?t.removeScope(v.YM.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}validateInputScopes(e){if(!e||e.length<1)throw lt(Ge)}containsScope(e){const t=this.printScopesLowerCase().split(" "),n=new dt(t);return!!e&&n.scopes.has(e.toLowerCase())}containsScopeSet(e){return!(!e||e.scopes.size<=0)&&(this.scopes.size>=e.scopes.size&&e.asArray().every(e=>this.containsScope(e)))}containsOnlyOIDCScopes(){let e=0;return v._A.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(e=>this.appendScope(e))}catch(Cs){throw pe(B)}}removeScope(e){if(!e)throw pe(F);this.scopes.delete(e.trim())}removeOIDCScopes(){v._A.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw pe(K);const t=new Set;return e.scopes.forEach(e=>t.add(e.toLowerCase())),this.scopes.forEach(e=>t.add(e.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw pe(K);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),n=e.getScopeCount(),r=this.getScopeCount();return t.size<r+n}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){if(this.scopes){return this.asArray().join(" ")}return v.YM.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function ht(e,t){if(!e)throw pe(A);try{const n=t(e);return JSON.parse(n)}catch(Cs){throw pe(b)}}function gt(e){if(!e)throw pe(b);const t=e.split(v.LR.CLIENT_INFO_SEPARATOR,2);return{uid:t[0],utid:t.length<2?v.YM.EMPTY_STRING:t[1]}}var pt=n(986);const ft=["isHomeTenant"],mt=["isHomeTenant"];function vt(e,t){return!!e&&!!t&&e===t.split(".")[1]}function yt(e,t,n,r){if(r){const{oid:t,sub:n,tid:o,name:i,tfp:a,acr:s}=r,c=o||a||s||"";return{tenantId:c,localAccountId:t||n||"",name:i,isHomeTenant:vt(c,e)}}return{tenantId:n,localAccountId:t,isHomeTenant:vt(n,e)}}function Ct(e,t,n,r){let o=e;if(t){const{isHomeTenant:n}=t,r=(0,pt.A)(t,ft);o=(0,f.A)((0,f.A)({},e),r)}if(n){const t=yt(e.homeAccountId,e.localAccountId,e.tenantId,n),{isHomeTenant:i}=t,a=(0,pt.A)(t,mt);return o=(0,f.A)((0,f.A)((0,f.A)({},o),a),{},{idTokenClaims:n,idToken:r}),o}return o}const wt=0,Tt=1,bt=2,At=3;function St(e){if(e){return e.tid||e.tfp||e.acr||null}return null}class Et{generateAccountId(){return[this.homeAccountId,this.environment].join(v.LR.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return Et.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(v.LR.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,t,n){var r,o,i,a,s,c,l,u;const d=new Et;let h;t.authorityType===Tt?d.authorityType=v.Qd.ADFS_ACCOUNT_TYPE:t.protocolMode===y?d.authorityType=v.Qd.MSSTS_ACCOUNT_TYPE:d.authorityType=v.Qd.GENERIC_ACCOUNT_TYPE,e.clientInfo&&n&&(h=ht(e.clientInfo,n)),d.clientInfo=e.clientInfo,d.homeAccountId=e.homeAccountId,d.nativeAccountId=e.nativeAccountId;const g=e.environment||t&&t.getPreferredCache();if(!g)throw pe(W);d.environment=g,d.realm=(null===(r=h)||void 0===r?void 0:r.utid)||St(e.idTokenClaims)||"",d.localAccountId=(null===(o=h)||void 0===o?void 0:o.uid)||(null===(i=e.idTokenClaims)||void 0===i?void 0:i.oid)||(null===(a=e.idTokenClaims)||void 0===a?void 0:a.sub)||"";const p=(null===(s=e.idTokenClaims)||void 0===s?void 0:s.preferred_username)||(null===(c=e.idTokenClaims)||void 0===c?void 0:c.upn),f=null!==(l=e.idTokenClaims)&&void 0!==l&&l.emails?e.idTokenClaims.emails[0]:null;if(d.username=p||f||"",d.name=(null===(u=e.idTokenClaims)||void 0===u?void 0:u.name)||"",d.cloudGraphHostName=e.cloudGraphHostName,d.msGraphHost=e.msGraphHost,e.tenantProfiles)d.tenantProfiles=e.tenantProfiles;else{const t=yt(e.homeAccountId,d.localAccountId,d.realm,e.idTokenClaims);d.tenantProfiles=[t]}return d}static createFromAccountInfo(e,t,n){var r;const o=new Et;return o.authorityType=e.authorityType||v.Qd.GENERIC_ACCOUNT_TYPE,o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.cloudGraphHostName=t,o.msGraphHost=n,o.tenantProfiles=Array.from((null===(r=e.tenantProfiles)||void 0===r?void 0:r.values())||[]),o}static generateHomeAccountId(e,t,n,r,o){if(t!==Tt&&t!==bt){if(e)try{const t=ht(e,r.base64Decode);if(t.uid&&t.utid)return"".concat(t.uid,".").concat(t.utid)}catch(Cs){}n.warning("No client info in response")}return(null===o||void 0===o?void 0:o.sub)||""}static isAccountEntity(e){return!!e&&(e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"))}static accountInfoIsEqual(e,t,n){if(!e||!t)return!1;let r=!0;if(n){const n=e.idTokenClaims||{},o=t.idTokenClaims||{};r=n.iat===o.iat&&n.nonce===o.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&r}}function It(e){return e.startsWith("#/")?e.substring(2):e.startsWith("#")||e.startsWith("?")?e.substring(1):e}function _t(e){if(!e||e.indexOf("=")<0)return null;try{const t=It(e),n=Object.fromEntries(new URLSearchParams(t));if(n.code||n.error||n.error_description||n.state)return n}catch(Cs){throw pe(R)}return null}class kt{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw lt(ze);e.includes("#")||(this._urlString=kt.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return ut.endsWith(t,"?")?t=t.slice(0,-1):ut.endsWith(t,"?/")&&(t=t.slice(0,-2)),ut.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch(Cs){throw lt(Ke)}if(!e.HostNameAndPort||!e.PathSegments)throw lt(Ke);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw lt(Be)}static appendQueryString(e,t){return t?e.indexOf("?")<0?"".concat(e,"?").concat(t):"".concat(e,"&").concat(t):e}static removeHashFromUrl(e){return kt.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),n=t.PathSegments;return!e||0===n.length||n[0]!==v.v2.COMMON&&n[0]!==v.v2.ORGANIZATIONS||(n[0]=e),kt.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw lt(Ke);const n={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let r=n.AbsolutePath.split("/");return r=r.filter(e=>e&&e.length>0),n.PathSegments=r,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(t);if(!n)throw lt(Ke);return n[2]}static getAbsoluteUrl(e,t){if(e[0]===v.YM.FORWARD_SLASH){const n=new kt(t).getUrlComponents();return n.Protocol+"//"+n.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new kt(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!_t(e)}}const Rt={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},Pt={tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},Ot=new Set;function Nt(e,t,n,r){if(null===r||void 0===r||r.trace("getAliasesFromMetadata called with source: ".concat(n)),e&&t){const o=Mt(t,e);if(o)return null===r||void 0===r||r.trace("getAliasesFromMetadata: found cloud discovery metadata in ".concat(n,", returning aliases")),o.aliases;null===r||void 0===r||r.trace("getAliasesFromMetadata: did not find cloud discovery metadata in ".concat(n))}return null}function Mt(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r.aliases.includes(t))return r}return null}Pt.metadata.forEach(e=>{e.aliases.forEach(e=>{Ot.add(e)})});const Lt="cache_quota_exceeded",xt="cache_error_unknown",Ut={[Lt]:"Exceeded cache storage capacity.",[xt]:"Unexpected error occurred when using cache storage."};class Dt extends Error{constructor(e,t){const n=t||(Ut[e]?Ut[e]:Ut[xt]);super("".concat(e,": ").concat(n)),Object.setPrototypeOf(this,Dt.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}}class Ht{constructor(e,t,n,r){this.clientId=e,this.cryptoImpl=t,this.commonLogger=n.clone(me,ve),this.staticAuthorityOptions=r}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){const t=this.getAllAccounts(e);if(t.length>1){return t.sort(e=>e.idTokenClaims?-1:1)[0]}return 1===t.length?t[0]:null}getBaseAccountInfo(e){const t=this.getAccountsFilteredBy(e);return t.length>0?t[0].getAccountInfo():null}buildTenantProfiles(e,t){return e.flatMap(e=>this.getTenantProfilesFromAccountEntity(e,null===t||void 0===t?void 0:t.tenantId,t))}getTenantedAccountInfoByFilter(e,t,n,r){let o,i=null;if(r&&!this.tenantProfileMatchesFilter(n,r))return null;const a=this.getIdToken(e,t,n.tenantId);return a&&(o=ye(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(o,r))?null:(i=Ct(e,n,o,null===a||void 0===a?void 0:a.secret),i)}getTenantProfilesFromAccountEntity(e,t,n){const r=e.getAccountInfo();let o=r.tenantProfiles||new Map;const i=this.getTokenKeys();if(t){const e=o.get(t);if(!e)return[];o=new Map([[t,e]])}const a=[];return o.forEach(e=>{const t=this.getTenantedAccountInfoByFilter(r,i,e,n);t&&a.push(t)}),a}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId))&&((!t.name||e.name===t.name)&&(void 0===t.isHomeTenant||e.isHomeTenant===t.isHomeTenant))}idTokenClaimsMatchTenantProfileFilter(e,t){if(t){if(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId))return!1;if(t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint))return!1;if(t.username&&!this.matchUsername(e.preferred_username,t.username))return!1;if(t.name&&!this.matchName(e,t.name))return!1;if(t.sid&&!this.matchSid(e,t.sid))return!1}return!0}async saveCacheRecord(e,t,n){if(!e)throw pe(V);try{e.account&&this.setAccount(e.account),e.idToken&&!1!==(null===t||void 0===t?void 0:t.idToken)&&this.setIdTokenCredential(e.idToken),e.accessToken&&!1!==(null===t||void 0===t?void 0:t.accessToken)&&await this.saveAccessToken(e.accessToken),e.refreshToken&&!1!==(null===t||void 0===t?void 0:t.refreshToken)&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(Cs){var r,o;if(null===(r=this.commonLogger)||void 0===r||r.error("CacheManager.saveCacheRecord: failed"),Cs instanceof Error){var i,a;if(null===(i=this.commonLogger)||void 0===i||i.errorPii("CacheManager.saveCacheRecord: ".concat(Cs.message),n),"QuotaExceededError"===Cs.name||"NS_ERROR_DOM_QUOTA_REACHED"===Cs.name||Cs.message.includes("exceeded the quota"))throw null===(a=this.commonLogger)||void 0===a||a.error("CacheManager.saveCacheRecord: exceeded storage quota",n),new Dt(Lt);throw new Dt(Cs.name,Cs.message)}throw null===(o=this.commonLogger)||void 0===o||o.errorPii("CacheManager.saveCacheRecord: ".concat(Cs),n),new Dt(xt)}}async saveAccessToken(e){const t={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},n=this.getTokenKeys(),r=dt.fromString(e.target),o=[];n.accessToken.forEach(e=>{if(!this.accessTokenKeyMatchesFilter(e,t,!1))return;const n=this.getAccessTokenCredential(e);if(n&&this.credentialMatchesFilter(n,t)){dt.fromString(n.target).intersectingScopeSets(r)&&o.push(this.removeAccessToken(e))}}),await Promise.all(o),this.setAccessTokenCredential(e)}getAccountsFilteredBy(e){const t=this.getAccountKeys(),n=[];return t.forEach(t=>{var r;if(!this.isAccountKey(t,e.homeAccountId))return;const o=this.getAccount(t,this.commonLogger);if(!o)return;if(e.homeAccountId&&!this.matchHomeAccountId(o,e.homeAccountId))return;if(e.username&&!this.matchUsername(o.username,e.username))return;if(e.environment&&!this.matchEnvironment(o,e.environment))return;if(e.realm&&!this.matchRealm(o,e.realm))return;if(e.nativeAccountId&&!this.matchNativeAccountId(o,e.nativeAccountId))return;if(e.authorityType&&!this.matchAuthorityType(o,e.authorityType))return;const i={localAccountId:null===e||void 0===e?void 0:e.localAccountId,name:null===e||void 0===e?void 0:e.name},a=null===(r=o.tenantProfiles)||void 0===r?void 0:r.filter(e=>this.tenantProfileMatchesFilter(e,i));a&&0===a.length||n.push(o)}),n}isAccountKey(e,t,n){return!(e.split(v.LR.CACHE_KEY_SEPARATOR).length<3)&&(!(t&&!e.toLowerCase().includes(t.toLowerCase()))&&!(n&&!e.toLowerCase().includes(n.toLowerCase())))}isCredentialKey(e){if(e.split(v.LR.CACHE_KEY_SEPARATOR).length<6)return!1;const t=e.toLowerCase();if(-1===t.indexOf(v.aG.ID_TOKEN.toLowerCase())&&-1===t.indexOf(v.aG.ACCESS_TOKEN.toLowerCase())&&-1===t.indexOf(v.aG.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())&&-1===t.indexOf(v.aG.REFRESH_TOKEN.toLowerCase()))return!1;if(t.indexOf(v.aG.REFRESH_TOKEN.toLowerCase())>-1){const e="".concat(v.aG.REFRESH_TOKEN).concat(v.LR.CACHE_KEY_SEPARATOR).concat(this.clientId).concat(v.LR.CACHE_KEY_SEPARATOR),n="".concat(v.aG.REFRESH_TOKEN).concat(v.LR.CACHE_KEY_SEPARATOR).concat(v.hB).concat(v.LR.CACHE_KEY_SEPARATOR);if(-1===t.indexOf(e.toLowerCase())&&-1===t.indexOf(n.toLowerCase()))return!1}else if(-1===t.indexOf(this.clientId.toLowerCase()))return!1;return!0}credentialMatchesFilter(e,t){if(t.clientId&&!this.matchClientId(e,t.clientId))return!1;if(t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash))return!1;if("string"===typeof t.homeAccountId&&!this.matchHomeAccountId(e,t.homeAccountId))return!1;if(t.environment&&!this.matchEnvironment(e,t.environment))return!1;if(t.realm&&!this.matchRealm(e,t.realm))return!1;if(t.credentialType&&!this.matchCredentialType(e,t.credentialType))return!1;if(t.familyId&&!this.matchFamilyId(e,t.familyId))return!1;if(t.target&&!this.matchTarget(e,t.target))return!1;if((t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash)return!1;if(e.credentialType===v.aG.ACCESS_TOKEN_WITH_AUTH_SCHEME){if(t.tokenType&&!this.matchTokenType(e,t.tokenType))return!1;if(t.tokenType===v.IO.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId))return!1}return!0}getAppMetadataFilteredBy(e){const t=this.getKeys(),n={};return t.forEach(t=>{if(!this.isAppMetadata(t))return;const r=this.getAppMetadata(t);r&&(e.environment&&!this.matchEnvironment(r,e.environment)||e.clientId&&!this.matchClientId(r,e.clientId)||(n[t]=r))}),n}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let n=null;return t.forEach(t=>{if(!this.isAuthorityMetadata(t)||-1===t.indexOf(this.clientId))return;const r=this.getAuthorityMetadata(t);r&&-1!==r.aliases.indexOf(e)&&(n=r)}),n}async removeAllAccounts(){const e=this.getAccountKeys(),t=[];e.forEach(e=>{t.push(this.removeAccount(e))}),await Promise.all(t)}async removeAccount(e){const t=this.getAccount(e,this.commonLogger);t&&(await this.removeAccountContext(t),this.removeItem(e))}async removeAccountContext(e){const t=this.getTokenKeys(),n=e.generateAccountId(),r=[];t.idToken.forEach(e=>{0===e.indexOf(n)&&this.removeIdToken(e)}),t.accessToken.forEach(e=>{0===e.indexOf(n)&&r.push(this.removeAccessToken(e))}),t.refreshToken.forEach(e=>{0===e.indexOf(n)&&this.removeRefreshToken(e)}),await Promise.all(r)}updateOutdatedCachedAccount(e,t,n){if(t&&t.isSingleTenant()){var r;null===(r=this.commonLogger)||void 0===r||r.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");const o=this.getAccountKeys().filter(e=>e.startsWith(t.homeAccountId)),i=[];o.forEach(e=>{const t=this.getCachedAccountEntity(e);t&&i.push(t)});const a=i.find(e=>vt(e.realm,e.homeAccountId))||i[0];a.tenantProfiles=i.map(e=>({tenantId:e.realm,localAccountId:e.localAccountId,name:e.name,isHomeTenant:vt(e.realm,e.homeAccountId)}));const s=Ht.toObject(new Et,(0,f.A)({},a)),c=s.generateAccountKey();return o.forEach(t=>{t!==c&&this.removeOutdatedAccount(e)}),this.setAccount(s),null===n||void 0===n||n.verbose("Updated an outdated account entity in the cache"),s}return t}async removeAccessToken(e){const t=this.getAccessTokenCredential(e);if(t){if(t.credentialType.toLowerCase()===v.aG.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&t.tokenType===v.IO.POP){const e=t.keyId;if(e)try{await this.cryptoImpl.removeTokenBindingKey(e)}catch(n){throw pe(oe)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach(e=>{this.isAppMetadata(e)&&this.removeItem(e)}),!0}readAccountFromCache(e){const t=Et.generateAccountCacheKey(e);return this.getAccount(t,this.commonLogger)}getIdToken(e,t,n,r,o){this.commonLogger.trace("CacheManager - getIdToken called");const i={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:v.aG.ID_TOKEN,clientId:this.clientId,realm:n},a=this.getIdTokensByFilter(i,t),s=a.size;if(s<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(s>1){let t=a;if(!n){const n=new Map;a.forEach((t,r)=>{t.realm===e.tenantId&&n.set(r,t)});const r=n.size;if(r<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(1===r)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),n.values().next().value;t=n}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),t.forEach((e,t)=>{this.removeIdToken(t)}),r&&o&&r.addFields({multiMatchedID:a.size},o),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t){const n=t&&t.idToken||this.getTokenKeys().idToken,r=new Map;return n.forEach(t=>{if(!this.idTokenKeyMatchesFilter(t,(0,f.A)({clientId:this.clientId},e)))return;const n=this.getIdTokenCredential(t);n&&this.credentialMatchesFilter(n,e)&&r.set(t,n)}),r}idTokenKeyMatchesFilter(e,t){const n=e.toLowerCase();return(!t.clientId||-1!==n.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==n.indexOf(t.homeAccountId.toLowerCase()))}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,t,n,r,o,i){this.commonLogger.trace("CacheManager - getAccessToken called");const a=dt.createSearchScopes(t.scopes),s=t.authenticationScheme||v.IO.BEARER,c=s&&s.toLowerCase()!==v.IO.BEARER.toLowerCase()?v.aG.ACCESS_TOKEN_WITH_AUTH_SCHEME:v.aG.ACCESS_TOKEN,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:r||e.tenantId,target:a,tokenType:s,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},u=n&&n.accessToken||this.getTokenKeys().accessToken,d=[];u.forEach(e=>{if(this.accessTokenKeyMatchesFilter(e,l,!0)){const t=this.getAccessTokenCredential(e);t&&this.credentialMatchesFilter(t,l)&&d.push(t)}});const h=d.length;return h<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):h>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),d.forEach(e=>{this.removeAccessToken(be(e))}),o&&i&&o.addFields({multiMatchedAT:d.length},i),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),d[0])}accessTokenKeyMatchesFilter(e,t,n){const r=e.toLowerCase();if(t.clientId&&-1===r.indexOf(t.clientId.toLowerCase()))return!1;if(t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))return!1;if(t.realm&&-1===r.indexOf(t.realm.toLowerCase()))return!1;if(t.requestedClaimsHash&&-1===r.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target){const e=t.target.asArray();for(let t=0;t<e.length;t++){if(n&&!r.includes(e[t].toLowerCase()))return!1;if(!n&&r.includes(e[t].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){const t=this.getTokenKeys(),n=[];return t.accessToken.forEach(t=>{if(!this.accessTokenKeyMatchesFilter(t,e,!0))return;const r=this.getAccessTokenCredential(t);r&&this.credentialMatchesFilter(r,e)&&n.push(r)}),n}getRefreshToken(e,t,n,r,o){this.commonLogger.trace("CacheManager - getRefreshToken called");const i=t?v.hB:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:v.aG.REFRESH_TOKEN,clientId:this.clientId,familyId:i},s=n&&n.refreshToken||this.getTokenKeys().refreshToken,c=[];s.forEach(e=>{if(this.refreshTokenKeyMatchesFilter(e,a)){const t=this.getRefreshTokenCredential(e);t&&this.credentialMatchesFilter(t,a)&&c.push(t)}});const l=c.length;return l<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(l>1&&r&&o&&r.addFields({multiMatchedRT:l},o),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),c[0])}refreshTokenKeyMatchesFilter(e,t){const n=e.toLowerCase();return(!t.familyId||-1!==n.indexOf(t.familyId.toLowerCase()))&&(!(!t.familyId&&t.clientId&&-1===n.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==n.indexOf(t.homeAccountId.toLowerCase())))}readAppMetadataFromCache(e){const t={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(t),r=Object.keys(n).map(e=>n[e]),o=r.length;if(o<1)return null;if(o>1)throw pe(H);return r[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!(!t||t.familyId!==v.hB)}matchHomeAccountId(e,t){return!("string"!==typeof e.homeAccountId||t!==e.homeAccountId)}matchLocalAccountIdFromTokenClaims(e,t){return t===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){var n;return!(t.toLowerCase()!==(null===(n=e.name)||void 0===n?void 0:n.toLowerCase()))}matchUsername(e,t){return!(!e||"string"!==typeof e||(null===t||void 0===t?void 0:t.toLowerCase())!==e.toLowerCase())}matchUserAssertionHash(e,t){return!(!e.userAssertionHash||t!==e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const n=function(e,t){let n;const r=e.canonicalAuthority;if(r){var o;const i=new kt(r).getUrlComponents().HostNameAndPort;n=Nt(i,null===(o=e.cloudDiscoveryMetadata)||void 0===o?void 0:o.metadata,v.E_.CONFIG,t)||Nt(i,Pt.metadata,v.E_.HARDCODED_VALUES,t)||e.knownAuthorities}return n||[]}(this.staticAuthorityOptions,this.commonLogger);if(n.includes(t)&&n.includes(e.environment))return!0}const n=this.getAuthorityMetadataByAlias(t);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!(!e.clientId||t!==e.clientId)}matchFamilyId(e,t){return!(!e.familyId||t!==e.familyId)}matchRealm(e,t){var n;return!((null===(n=e.realm)||void 0===n?void 0:n.toLowerCase())!==t.toLowerCase())}matchNativeAccountId(e,t){return!(!e.nativeAccountId||t!==e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||(e.preferred_username===t||e.upn===t)}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!(!e.authorityType||t.toLowerCase()!==e.authorityType.toLowerCase())}matchTarget(e,t){if(e.credentialType!==v.aG.ACCESS_TOKEN&&e.credentialType!==v.aG.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)return!1;return dt.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!(!e.tokenType||e.tokenType!==t)}matchKeyId(e,t){return!(!e.keyId||e.keyId!==t)}isAppMetadata(e){return-1!==e.indexOf(v.GU)}isAuthorityMetadata(e){return-1!==e.indexOf(v.u0.CACHE_KEY)}generateAuthorityMetadataCacheKey(e){return"".concat(v.u0.CACHE_KEY,"-").concat(this.clientId,"-").concat(e)}static toObject(e,t){for(const n in t)e[n]=t[n];return e}}class qt extends Ht{setAccount(){throw pe(ue)}getAccount(){throw pe(ue)}getCachedAccountEntity(){throw pe(ue)}setIdTokenCredential(){throw pe(ue)}getIdTokenCredential(){throw pe(ue)}setAccessTokenCredential(){throw pe(ue)}getAccessTokenCredential(){throw pe(ue)}setRefreshTokenCredential(){throw pe(ue)}getRefreshTokenCredential(){throw pe(ue)}setAppMetadata(){throw pe(ue)}getAppMetadata(){throw pe(ue)}setServerTelemetry(){throw pe(ue)}getServerTelemetry(){throw pe(ue)}setAuthorityMetadata(){throw pe(ue)}getAuthorityMetadata(){throw pe(ue)}getAuthorityMetadataKeys(){throw pe(ue)}setThrottlingCache(){throw pe(ue)}getThrottlingCache(){throw pe(ue)}removeItem(){throw pe(ue)}getKeys(){throw pe(ue)}getAccountKeys(){throw pe(ue)}getTokenKeys(){throw pe(ue)}updateCredentialCacheKey(){throw pe(ue)}removeOutdatedAccount(){throw pe(ue)}}const Ft={tokenRenewalOffsetSeconds:v.F0,preventCorsPreflight:!1},Bt={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:m.$.Info,correlationId:v.YM.EMPTY_STRING},Kt={claimsBasedCachingEnabled:!1},zt={async sendGetRequestAsync(){throw pe(ue)},async sendPostRequestAsync(){throw pe(ue)}},Gt={sku:v.YM.SKU,version:ve,cpu:v.YM.EMPTY_STRING,os:v.YM.EMPTY_STRING},jt={clientSecret:v.YM.EMPTY_STRING,clientAssertion:void 0},Yt={azureCloudInstance:w,tenant:"".concat(v.YM.DEFAULT_COMMON_TENANT)},Vt={application:{appName:"",appVersion:""}};function Wt(e){return e.authOptions.authority.options.protocolMode===C}const Qt={sendGetRequestAsync:()=>Promise.reject(pe(ue)),sendPostRequestAsync:()=>Promise.reject(pe(ue))},$t="acquireTokenByCode",Xt="acquireTokenByRefreshToken",Jt="acquireTokenSilent",Zt="acquireTokenSilentAsync",en="acquireTokenPopup",tn="acquireTokenPreRedirect",nn="acquireTokenRedirect",rn="cryptoOptsGetPublicKeyThumbprint",on="cryptoOptsSignJwt",an="silentCacheClientAcquireToken",sn="silentIframeClientAcquireToken",cn="awaitConcurrentIframe",ln="silentRefreshClientAcquireToken",un="ssoSilent",dn="standardInteractionClientGetDiscoveredAuthority",hn="fetchAccountIdWithNativeBroker",gn="nativeInteractionClientAcquireToken",pn="networkClientSendPostRequestAsync",fn="refreshTokenClientExecutePostToTokenEndpoint",mn="authorizationCodeClientExecutePostToTokenEndpoint",vn="refreshTokenClientExecuteTokenRequest",yn="refreshTokenClientAcquireToken",Cn="refreshTokenClientAcquireTokenWithCachedRefreshToken",wn="refreshTokenClientAcquireTokenByRefreshToken",Tn="refreshTokenClientCreateTokenRequestBody",bn="acquireTokenFromCache",An="silentFlowClientAcquireCachedToken",Sn="silentFlowClientGenerateResultFromCacheRecord",En="acquireTokenBySilentIframe",In="initializeBaseRequest",_n="initializeSilentRequest",kn="initializeClientApplication",Rn="silentIframeClientTokenHelper",Pn="silentHandlerInitiateAuthRequest",On="silentHandlerMonitorIframeForHash",Nn="silentHandlerLoadFrame",Mn="silentHandlerLoadFrameSync",Ln="standardInteractionClientCreateAuthCodeClient",xn="standardInteractionClientGetClientConfiguration",Un="standardInteractionClientInitializeAuthorizationRequest",Dn="standardInteractionClientInitializeAuthorizationCodeRequest",Hn="getAuthCodeUrl",qn="handleCodeResponseFromServer",Fn="handleCodeResponse",Bn="updateTokenEndpointAuthority",Kn="authClientAcquireToken",zn="authClientExecuteTokenRequest",Gn="authClientCreateTokenRequestBody",jn="authClientCreateQueryString",Yn="popTokenGenerateCnf",Vn="popTokenGenerateKid",Wn="handleServerTokenResponse",Qn="deserializeResponse",$n="authorityFactoryCreateDiscoveredInstance",Xn="authorityResolveEndpointsAsync",Jn="authorityGetCloudDiscoveryMetadataFromNetwork",Zn="authorityUpdateCloudDiscoveryMetadata",er="authorityGetEndpointMetadataFromNetwork",tr="authorityUpdateEndpointMetadata",nr="authorityUpdateMetadataWithRegionalInformation",rr="regionDiscoveryDetectRegion",or="regionDiscoveryGetRegionFromIMDS",ir="regionDiscoveryGetCurrentVersion",ar="acquireTokenByCodeAsync",sr="handleRedirectPromise",cr="handleNativeRedirectPromise",lr="nativeMessageHandlerHandshake",ur="removeHiddenIframe",dr="clearTokensAndKeysWithClaims",hr="cacheManagerGetRefreshToken",gr="generatePkceCodes",pr="generateCodeVerifier",fr="generateCodeChallengeFromVerifier",mr="sha256Digest",vr="getRandomValues",yr=(new Map([[$t,"ATByCode"],[Xt,"ATByRT"],[Jt,"ATS"],[Zt,"ATSAsync"],[en,"ATPopup"],[nn,"ATRedirect"],[rn,"CryptoGetPKThumb"],[on,"CryptoSignJwt"],[an,"SltCacheClientAT"],[sn,"SltIframeClientAT"],[ln,"SltRClientAT"],[un,"SsoSlt"],[dn,"StdIntClientGetDiscAuth"],[hn,"FetchAccIdWithNtvBroker"],[gn,"NtvIntClientAT"],["baseClientCreateTokenRequestHeaders","BaseClientCreateTReqHead"],[pn,"NetClientSendPost"],[fn,"RTClientExecPost"],[mn,"AuthCodeClientExecPost"],["brokerHandshake","BrokerHandshake"],["acquireTokenByRefreshTokenInBroker","ATByRTInBroker"],["acquireTokenByBroker","ATByBroker"],[vn,"RTClientExecTReq"],[yn,"RTClientAT"],[Cn,"RTClientATWithCachedRT"],[wn,"RTClientATByRT"],[Tn,"RTClientCreateTReqBody"],[bn,"ATFromCache"],[An,"SltFlowClientATCached"],[Sn,"SltFlowClientGenResFromCache"],[En,"ATBySltIframe"],[In,"InitBaseReq"],[_n,"InitSltReq"],[kn,"InitClientApplication"],[Rn,"SIClientTHelper"],[Pn,"SHandlerInitAuthReq"],[On,"SltHandlerMonitorIframeForHash"],[Nn,"SHandlerLoadFrame"],[Mn,"SHandlerLoadFrameSync"],[Ln,"StdIntClientCreateAuthCodeClient"],[xn,"StdIntClientGetClientConf"],[Un,"StdIntClientInitAuthReq"],[Dn,"StdIntClientInitAuthCodeReq"],[Hn,"GetAuthCodeUrl"],[qn,"HandleCodeResFromServer"],[Fn,"HandleCodeResp"],[Bn,"UpdTEndpointAuth"],[Kn,"AuthClientAT"],[zn,"AuthClientExecTReq"],[Gn,"AuthClientCreateTReqBody"],[jn,"AuthClientCreateQueryStr"],[Yn,"PopTGenCnf"],[Vn,"PopTGenKid"],[Wn,"HandleServerTRes"],[Qn,"DeserializeRes"],[$n,"AuthFactCreateDiscInst"],[Xn,"AuthResolveEndpointsAsync"],["authorityResolveEndpointsFromLocalSources","AuthResolveEndpointsFromLocal"],[Jn,"AuthGetCDMetaFromNet"],[Zn,"AuthUpdCDMeta"],[er,"AuthUpdCDMetaFromNet"],[tr,"AuthUpdEndpointMeta"],[nr,"AuthUpdMetaWithRegInfo"],[rr,"RegDiscDetectReg"],[or,"RegDiscGetRegFromIMDS"],[ir,"RegDiscGetCurrentVer"],[ar,"ATByCodeAsync"],["getEndpointMetadataFromNetwork","GetEndpointMetaFromNet"],["getCloudDiscoveryMetadataFromNetworkMeasurement","GetCDMetaFromNet"],[sr,"HandleRedirectPromise"],[cr,"HandleNtvRedirectPromise"],["updateCloudDiscoveryMetadataMeasurement","UpdateCDMeta"],["usernamePasswordClientAcquireToken","UserPassClientAT"],[lr,"NtvMsgHandlerHandshake"],["nativeGenerateAuthResult","NtvGenAuthRes"],[ur,"RemoveHiddenIframe"],[dr,"ClearTAndKeysWithClaims"],[hr,"CacheManagerGetRT"],[gr,"GenPkceCodes"],[pr,"GenCodeVerifier"],[fr,"GenCodeChallengeFromVerifier"],[mr,"Sha256Digest"],[vr,"GetRandomValues"]]),1);new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status","multiMatchedAT","multiMatchedID","multiMatchedRT"]);class Cr{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class wr{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:yr,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new Cr}}startPerformanceMeasurement(){return new Cr}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}var Tr=n(648);class br{navigateInternal(e,t){return br.defaultNavigateWindow(e,t)}navigateExternal(e,t){return br.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise(e=>{setTimeout(()=>{e(!0)},t.timeout)})}}class Ar extends T.lR{constructor(e,t,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,Ar.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=n}}function Sr(e,t,n){return new Ar(e,t,n)}const Er="pkce_not_created",Ir="crypto_nonexistent",_r="empty_navigate_uri",kr="hash_empty_error",Rr="no_state_in_hash",Pr="hash_does_not_contain_known_properties",Or="unable_to_parse_state",Nr="state_interaction_type_mismatch",Mr="interaction_in_progress",Lr="popup_window_error",xr="empty_window_error",Ur="user_cancelled",Dr="monitor_popup_timeout",Hr="monitor_window_timeout",qr="redirect_in_iframe",Fr="block_iframe_reload",Br="block_nested_popups",Kr="iframe_closed_prematurely",zr="silent_logout_unsupported",Gr="no_account_error",jr="silent_prompt_value_error",Yr="no_token_request_cache_error",Vr="unable_to_parse_token_request_cache_error",Wr="no_cached_authority_error",Qr="auth_request_not_set_error",$r="invalid_cache_type",Xr="non_browser_environment",Jr="database_not_open",Zr="no_network_connectivity",eo="post_request_failed",to="get_request_failed",no="failed_to_parse_response",ro="unable_to_load_token",oo="crypto_key_not_found",io="auth_code_required",ao="auth_code_or_nativeAccountId_required",so="spa_code_and_nativeAccountId_present",co="database_unavailable",lo="unable_to_acquire_token_from_native_platform",uo="native_handshake_timeout",ho="native_extension_not_installed",go="native_connection_not_established",po="uninitialized_public_client_application",fo="native_prompt_not_supported",mo="invalid_base64_string",vo="invalid_pop_token_request",yo="failed_to_build_headers",Co="failed_to_parse_headers",wo="For more visit: aka.ms/msaljs/browser-errors",To={[Er]:"The PKCE code challenge and verifier could not be generated.",[Ir]:"The crypto object or function is not available.",[_r]:"Navigation URI is empty. Please check stack trace for more info.",[kr]:"Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ".concat(wo),[Rr]:"Hash does not contain state. Please verify that the request originated from msal.",[Pr]:"Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ".concat(wo),[Or]:"Unable to parse state. Please verify that the request originated from msal.",[Nr]:"Hash contains state but the interaction type does not match the caller.",[Mr]:"Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ".concat(wo),[Lr]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[xr]:"window.open returned null or undefined window object.",[Ur]:"User cancelled the flow.",[Dr]:"Token acquisition in popup failed due to timeout.  ".concat(wo),[Hr]:"Token acquisition in iframe failed due to timeout.  ".concat(wo),[qr]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[Fr]:"Request was blocked inside an iframe because MSAL detected an authentication response.  ".concat(wo),[Br]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[Kr]:"The iframe being monitored was closed prematurely.",[zr]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[Gr]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[jr]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[Yr]:"No token request found in cache.",[Vr]:"The cached token request could not be parsed.",[Wr]:"No cached authority found.",[Qr]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[$r]:"Invalid cache type",[Xr]:"Login and token requests are not supported in non-browser environments.",[Jr]:"Database is not open!",[Zr]:"No network connectivity. Check your internet connection.",[eo]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[to]:"Network request failed. Please check the network trace to determine root cause.",[no]:"Failed to parse network response. Check network trace.",[ro]:"Error loading token to cache.",[oo]:"Cryptographic Key or Keypair not found in browser storage.",[io]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[ao]:"An authorization code or nativeAccountId must be provided to this flow.",[so]:"Request cannot contain both spa code and native account id.",[co]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[lo]:"Unable to acquire token from native platform.  ".concat(wo),[uo]:"Timed out while attempting to establish connection to browser extension",[ho]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[go]:"Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ".concat(wo),[po]:"You must call and await the initialize function before attempting to call any other MSAL API.  ".concat(wo),[fo]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[mo]:"Invalid base64 encoded string.",[vo]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[yo]:"Failed to build request headers object.",[Co]:"Failed to parse response headers"};class bo extends T.lR{constructor(e,t){super(e,To[e],t),Object.setPrototypeOf(this,bo.prototype),this.name="BrowserAuthError"}}function Ao(e,t){return new bo(e,t)}class So{async sendGetRequestAsync(e,t){let n,r={},o=0;const i=Eo(t);try{n=await fetch(e,{method:Tr.CC.GET,headers:i})}catch(Cs){throw Ao(window.navigator.onLine?to:Zr)}r=Io(n.headers);try{return o=n.status,{headers:r,body:await n.json(),status:o}}catch(Cs){throw Sr(Ao(no),o,r)}}async sendPostRequestAsync(e,t){const n=t&&t.body||"",r=Eo(t);let o,i=0,a={};try{o=await fetch(e,{method:Tr.CC.POST,headers:r,body:n})}catch(Cs){throw Ao(window.navigator.onLine?eo:Zr)}a=Io(o.headers);try{return i=o.status,{headers:a,body:await o.json(),status:i}}catch(Cs){throw Sr(Ao(no),i,a)}}}function Eo(e){try{const t=new Headers;if(!e||!e.headers)return t;const n=e.headers;return Object.entries(n).forEach(e=>{let[n,r]=e;t.append(n,r)}),t}catch(Cs){throw Ao(yo)}}function Io(e){try{const t={};return e.forEach((e,n)=>{t[n]=e}),t}catch(Cs){throw Ao(Co)}}function _o(e){return encodeURIComponent(Ro(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function ko(e){return Po(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ro(e){return Po((new TextEncoder).encode(e))}function Po(e){const t=Array.from(e,e=>String.fromCodePoint(e)).join("");return btoa(t)}const Oo="SHA-256",No=new Uint8Array([1,0,1]),Mo="0123456789abcdef",Lo=new Uint32Array(1),xo={name:"RSASSA-PKCS1-v1_5",hash:Oo,modulusLength:2048,publicExponent:No};async function Uo(e,t,n){null===t||void 0===t||t.addQueueMeasurement(mr,n);const r=(new TextEncoder).encode(e);return window.crypto.subtle.digest(Oo,r)}function Do(e){return window.crypto.getRandomValues(e)}function Ho(){return window.crypto.getRandomValues(Lo),Lo[0]}function qo(){const e=Date.now(),t=1024*Ho()+(1023&Ho()),n=new Uint8Array(16),r=Math.trunc(t/2**30),o=t&2**30-1,i=Ho();n[0]=e/2**40,n[1]=e/2**32,n[2]=e/2**24,n[3]=e/65536,n[4]=e/256,n[5]=e,n[6]=112|r>>>8,n[7]=r,n[8]=128|o>>>24,n[9]=o>>>16,n[10]=o>>>8,n[11]=o,n[12]=i>>>24,n[13]=i>>>16,n[14]=i>>>8,n[15]=i;let a="";for(let s=0;s<n.length;s++)a+=Mo.charAt(n[s]>>>4),a+=Mo.charAt(15&n[s]),3!==s&&5!==s&&7!==s&&9!==s||(a+="-");return a}async function Fo(e){return window.crypto.subtle.exportKey(Tr.jb,e)}async function Bo(e){const t=await Uo(e);return ko(new Uint8Array(t))}var Ko=n(854),zo=n(552);function Go(){return window.parent!==window}function jo(){return"undefined"!==typeof window&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function Yo(){if("undefined"!==typeof window&&window.opener&&window.opener!==window&&"string"===typeof window.name&&0===window.name.indexOf("".concat(Tr.Q1.POPUP_NAME_PREFIX,".")))throw Ao(Br)}function Vo(){if("undefined"===typeof window)throw Ao(Xr)}function Wo(e){if(!e)throw Ao(po)}function Qo(e){Vo(),function(){if(kt.hashContainsKnownProperties(window.location.hash)&&Go())throw Ao(Fr)}(),Yo(),Wo(e)}function $o(e,t){if(Qo(e),function(e){if(Go()&&!e)throw Ao(qr)}(t.system.allowRedirectInIframe),t.cache.cacheLocation===Tr.Al.MemoryStorage&&!t.cache.storeAuthStateInCookie)throw(0,Ko.jz)(zo.jE)}function Xo(e){const t=document.createElement("link");t.rel="preconnect",t.href=new URL(e).origin,t.crossOrigin="anonymous",document.head.appendChild(t),window.setTimeout(()=>{try{document.head.removeChild(t)}catch(e){}},1e4)}const Jo=1e4;const Zo="3.28.1";class ei{static loggerCallback(e,t){switch(e){case m.$.Error:return void console.error(t);case m.$.Info:return void console.info(t);case m.$.Verbose:return void console.debug(t);case m.$.Warning:return void console.warn(t);default:return void console.log(t)}}constructor(e){var t,n;let r;this.browserEnvironment="undefined"!==typeof window,this.config=function(e,t){let{auth:n,cache:r,system:o,telemetry:i}=e;const a={clientId:v.YM.EMPTY_STRING,authority:"".concat(v.YM.DEFAULT_AUTHORITY),knownAuthorities:[],cloudDiscoveryMetadata:v.YM.EMPTY_STRING,authorityMetadata:v.YM.EMPTY_STRING,redirectUri:"undefined"!==typeof window?jo():"",postLogoutRedirectUri:v.YM.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:y,OIDCOptions:{serverResponseType:v.zL.FRAGMENT,defaultScopes:[v.YM.OPENID_SCOPE,v.YM.PROFILE_SCOPE,v.YM.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:w,tenant:v.YM.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1},s={cacheLocation:Tr.Al.SessionStorage,temporaryCacheLocation:Tr.Al.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!r||r.cacheLocation!==Tr.Al.LocalStorage),claimsBasedCachingEnabled:!1},c={loggerCallback:()=>{},logLevel:m.$.Info,piiLoggingEnabled:!1},l=(0,f.A)((0,f.A)({},Ft),{},{loggerOptions:c,networkClient:t?new So:Qt,navigationClient:new br,loadFrameTimeout:0,windowHashTimeout:(null===o||void 0===o?void 0:o.loadFrameTimeout)||6e4,iframeHashTimeout:(null===o||void 0===o?void 0:o.loadFrameTimeout)||Jo,navigateFrameWait:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:(null===o||void 0===o?void 0:o.nativeBrokerHandshakeTimeout)||2e3,pollIntervalMilliseconds:Tr.Q1.DEFAULT_POLL_INTERVAL_MS}),u=(0,f.A)((0,f.A)((0,f.A)({},l),o),{},{loggerOptions:(null===o||void 0===o?void 0:o.loggerOptions)||c}),d={application:{appName:v.YM.EMPTY_STRING,appVersion:v.YM.EMPTY_STRING},client:new wr};(null===n||void 0===n?void 0:n.protocolMode)!==C&&null!==n&&void 0!==n&&n.OIDCOptions&&new m.V(u.loggerOptions).warning(JSON.stringify(lt(ot)));if(null!==n&&void 0!==n&&n.protocolMode&&n.protocolMode!==y&&null!==u&&void 0!==u&&u.allowNativeBroker)throw lt(it);return{auth:(0,f.A)((0,f.A)((0,f.A)({},a),n),{},{OIDCOptions:(0,f.A)((0,f.A)({},a.OIDCOptions),null===n||void 0===n?void 0:n.OIDCOptions)}),cache:(0,f.A)((0,f.A)({},s),r),system:u,telemetry:(0,f.A)((0,f.A)({},d),i)}}(e,this.browserEnvironment);try{r=window[Tr.Al.SessionStorage]}catch(Cs){}const o=null===(t=r)||void 0===t?void 0:t.getItem(Tr.L$),i=null===(n=r)||void 0===n||null===(n=n.getItem(Tr.P3))||void 0===n?void 0:n.toLowerCase(),a="true"===i||"false"!==i&&void 0,s=(0,f.A)({},this.config.system.loggerOptions),c=o&&Object.keys(m.$).includes(o)?m.$[o]:void 0;c&&(s.loggerCallback=ei.loggerCallback,s.logLevel=c),void 0!==a&&(s.piiLoggingEnabled=a),this.logger=new m.V(s,"@azure/msal-browser",Zo),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}class ti extends ei{getModuleName(){return ti.MODULE_NAME}getId(){return ti.ID}async initialize(){return this.available="undefined"!==typeof window,this.available}}ti.MODULE_NAME="",ti.ID="StandardOperatingContext";const ni="missing_kid_error",ri="missing_alg_error",oi={[ni]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[ri]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class ii extends T.lR{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,ii.prototype)}}function ai(e){return new ii(e,oi[e])}class si{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw ai(ni);if(!e.alg)throw ai(ri);const t=new si({typ:e.typ||v.Lz.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(t)}}function ci(e){return(new TextDecoder).decode(function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Ao(mo)}const n=atob(t);return Uint8Array.from(n,e=>e.codePointAt(0)||0)}(e))}class li{constructor(){this.dbName=Tr.$u,this.version=Tr.G8,this.tableName=Tr.WJ,this.dbOpen=!1}async open(){return new Promise((e,t)=>{const n=window.indexedDB.open(this.dbName,this.version);n.addEventListener("upgradeneeded",e=>{e.target.result.createObjectStore(this.tableName)}),n.addEventListener("success",t=>{const n=t;this.db=n.target.result,this.dbOpen=!0,e()}),n.addEventListener("error",()=>t(Ao(co)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((t,n)=>{if(!this.db)return n(Ao(Jr));const r=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);r.addEventListener("success",e=>{const n=e;this.closeConnection(),t(n.target.result)}),r.addEventListener("error",e=>{this.closeConnection(),n(e)})})}async setItem(e,t){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(Ao(Jr));const o=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);o.addEventListener("success",()=>{this.closeConnection(),n()}),o.addEventListener("error",e=>{this.closeConnection(),r(e)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((t,n)=>{if(!this.db)return n(Ao(Jr));const r=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);r.addEventListener("success",()=>{this.closeConnection(),t()}),r.addEventListener("error",e=>{this.closeConnection(),n(e)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,t)=>{if(!this.db)return t(Ao(Jr));const n=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();n.addEventListener("success",t=>{const n=t;this.closeConnection(),e(n.target.result)}),n.addEventListener("error",e=>{this.closeConnection(),t(e)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((t,n)=>{if(!this.db)return n(Ao(Jr));const r=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);r.addEventListener("success",e=>{const n=e;this.closeConnection(),t(1===n.target.result)}),r.addEventListener("error",e=>{this.closeConnection(),n(e)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,t)=>{const n=window.indexedDB.deleteDatabase(Tr.$u),r=setTimeout(()=>t(!1),200);n.addEventListener("success",()=>(clearTimeout(r),e(!0))),n.addEventListener("blocked",()=>(clearTimeout(r),e(!0))),n.addEventListener("error",()=>(clearTimeout(r),t(!1)))})}}class ui{constructor(){this.cache=new Map}getItem(e){return this.cache.get(e)||null}setItem(e,t){this.cache.set(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((t,n)=>{e.push(n)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}class di{constructor(e){this.inMemoryCache=new ui,this.indexedDBCache=new li,this.logger=e}handleDatabaseAccessError(e){if(!(e instanceof bo&&e.errorCode===co))throw e;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")}async getItem(e){const t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(Cs){this.handleDatabaseAccessError(Cs)}return t}async setItem(e,t){this.inMemoryCache.setItem(e,t);try{await this.indexedDBCache.setItem(e,t)}catch(Cs){this.handleDatabaseAccessError(Cs)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(Cs){this.handleDatabaseAccessError(Cs)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(0===e.length)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(Cs){this.handleDatabaseAccessError(Cs)}return e}async containsKey(e){const t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(Cs){this.handleDatabaseAccessError(Cs)}return t}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(Cs){return this.handleDatabaseAccessError(Cs),!1}}}class hi{constructor(e,t,n){this.logger=e,function(e){if(!window)throw Ao(Xr);if(!window.crypto)throw Ao(Ir);if(!e&&!window.crypto.subtle)throw Ao(Ir,"crypto_subtle_undefined")}(null!==n&&void 0!==n&&n),this.cache=new di(this.logger),this.performanceClient=t}createNewGuid(){return qo()}base64Encode(e){return Ro(e)}base64Decode(e){return ci(e)}base64UrlEncode(e){return _o(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var t;const n=null===(t=this.performanceClient)||void 0===t?void 0:t.startMeasurement(rn,e.correlationId),r=await async function(e,t){return window.crypto.subtle.generateKey(xo,e,t)}(hi.EXTRACTABLE,hi.POP_KEY_USAGES),o=await Fo(r.publicKey),i=gi({e:o.e,kty:o.kty,n:o.n}),a=await this.hashString(i),s=await Fo(r.privateKey),c=await async function(e,t,n){return window.crypto.subtle.importKey(Tr.jb,e,xo,t,n)}(s,!1,["sign"]);return await this.cache.setItem(a,{privateKey:c,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),n&&n.end({success:!0}),a}async removeTokenBindingKey(e){await this.cache.removeItem(e);return!await this.cache.containsKey(e)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(Cs){return Cs instanceof Error?this.logger.error("Clearing keystore failed with error: ".concat(Cs.message)):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,t,n,r){var o;const i=null===(o=this.performanceClient)||void 0===o?void 0:o.startMeasurement(on,r),a=await this.cache.getItem(t);if(!a)throw Ao(oo);const s=await Fo(a.publicKey),c=gi(s),l=_o(JSON.stringify({kid:t})),u=_o(si.getShrHeaderString((0,f.A)((0,f.A)({},null===n||void 0===n?void 0:n.header),{},{alg:s.alg,kid:l})));e.cnf={jwk:JSON.parse(c)};const d=_o(JSON.stringify(e)),h="".concat(u,".").concat(d),g=(new TextEncoder).encode(h),p=await async function(e,t){return window.crypto.subtle.sign(xo,e,t)}(a.privateKey,g),m=ko(new Uint8Array(p)),v="".concat(h,".").concat(m);return i&&i.end({success:!0}),v}async hashString(e){return Bo(e)}}function gi(e){return JSON.stringify(e,Object.keys(e).sort())}hi.POP_KEY_USAGES=["sign","verify"],hi.EXTRACTABLE=!0;const pi=(e,t,n,r,o)=>function(){n.trace("Executing function ".concat(t));const i=null===r||void 0===r?void 0:r.startMeasurement(t,o);if(o){const e=t+"CallCount";null===r||void 0===r||r.incrementFields({[e]:1},o)}try{const r=e(...arguments);return null===i||void 0===i||i.end({success:!0}),n.trace("Returning result from ".concat(t)),r}catch(Cs){n.trace("Error occurred in ".concat(t));try{n.trace(JSON.stringify(Cs))}catch(Cs){n.trace("Unable to print error message.")}throw null===i||void 0===i||i.end({success:!1},Cs),Cs}},fi=(e,t,n,r,o)=>function(){n.trace("Executing function ".concat(t));const i=null===r||void 0===r?void 0:r.startMeasurement(t,o);if(o){const e=t+"CallCount";null===r||void 0===r||r.incrementFields({[e]:1},o)}return null===r||void 0===r||r.setPreQueueTime(t,o),e(...arguments).then(e=>(n.trace("Returning result from ".concat(t)),null===i||void 0===i||i.end({success:!0}),e)).catch(e=>{n.trace("Error occurred in ".concat(t));try{n.trace(JSON.stringify(e))}catch(e){n.trace("Unable to print error message.")}throw null===i||void 0===i||i.end({success:!1},e),e})};class mi{constructor(e,t,n,r){this.networkInterface=e,this.logger=t,this.performanceClient=n,this.correlationId=r}async detectRegion(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(rr,this.correlationId);let r=e;if(r)t.region_source=v.jZ.ENVIRONMENT_VARIABLE;else{const e=mi.IMDS_OPTIONS;try{const n=await fi(this.getRegionFromIMDS.bind(this),or,this.logger,this.performanceClient,this.correlationId)(v.YM.IMDS_VERSION,e);if(n.status===v.Kk.httpSuccess&&(r=n.body,t.region_source=v.jZ.IMDS),n.status===v.Kk.httpBadRequest){const n=await fi(this.getCurrentVersion.bind(this),ir,this.logger,this.performanceClient,this.correlationId)(e);if(!n)return t.region_source=v.jZ.FAILED_AUTO_DETECTION,null;const o=await fi(this.getRegionFromIMDS.bind(this),or,this.logger,this.performanceClient,this.correlationId)(n,e);o.status===v.Kk.httpSuccess&&(r=o.body,t.region_source=v.jZ.IMDS)}}catch(Cs){return t.region_source=v.jZ.FAILED_AUTO_DETECTION,null}}return r||(t.region_source=v.jZ.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(e,t){var n;return null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(or,this.correlationId),this.networkInterface.sendGetRequestAsync("".concat(v.YM.IMDS_ENDPOINT,"?api-version=").concat(e,"&format=text"),t,v.YM.IMDS_TIMEOUT)}async getCurrentVersion(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(ir,this.correlationId);try{const t=await this.networkInterface.sendGetRequestAsync("".concat(v.YM.IMDS_ENDPOINT,"?format=json"),e);return t.status===v.Kk.httpBadRequest&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0?t.body["newest-versions"][0]:null}catch(Cs){return null}}}mi.IMDS_OPTIONS={headers:{Metadata:"true"}};class vi{constructor(e,t,n,r,o,i,a,s){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=n,this.authorityOptions=r,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=o,this.performanceClient=a,this.correlationId=i,this.managedIdentity=s||!1,this.regionDiscovery=new mi(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(v.YM.CIAM_AUTH_URL))return At;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case v.YM.ADFS:return Tt;case v.YM.DSTS:return bt}return wt}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new kt(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw pe(I)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw pe(I)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw pe(I)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw pe(ie);return this.replacePath(this.metadata.end_session_endpoint)}throw pe(I)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw pe(I)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw pe(I)}canReplaceTenant(e){return 1===e.PathSegments.length&&!vi.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===wt&&this.protocolMode===y}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const n=new kt(this.metadata.canonical_authority).getUrlComponents(),r=n.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((e,o)=>{let i=r[o];if(0===o&&this.canReplaceTenant(n)){const e=new kt(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];i!==e&&(this.logger.verbose("Replacing tenant domain name ".concat(i," with id ").concat(e)),i=e)}e!==i&&(t=t.replace("/".concat(i,"/"),"/".concat(e,"/")))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Tt||this.protocolMode!==y&&!this.isAliasOfKnownMicrosoftAuthority(e)?"".concat(this.canonicalAuthority,".well-known/openid-configuration"):"".concat(this.canonicalAuthority,"v2.0/.well-known/openid-configuration")}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var e,t;null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(Xn,this.correlationId);const n=this.getCurrentMetadataEntity(),r=await fi(this.updateCloudDiscoveryMetadata.bind(this),Zn,this.logger,this.performanceClient,this.correlationId)(n);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,n.preferred_network);const o=await fi(this.updateEndpointMetadata.bind(this),tr,this.logger,this.performanceClient,this.correlationId)(n);this.updateCachedMetadata(n,r,{source:o}),null===(t=this.performanceClient)||void 0===t||t.addFields({cloudDiscoverySource:r,authorityEndpointSource:o},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:xe(),jwks_uri:""}),e}updateCachedMetadata(e,t,n){t!==v.E_.CACHE&&(null===n||void 0===n?void 0:n.source)!==v.E_.CACHE&&(e.expiresAt=xe(),e.canonical_authority=this.canonicalAuthority);const r=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(r,e),this.metadata=e}async updateEndpointMetadata(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(tr,this.correlationId);const n=this.updateEndpointMetadataFromLocalSources(e);if(n){var r;if(n.source===v.E_.HARDCODED_VALUES)if(null!==(r=this.authorityOptions.azureRegionConfiguration)&&void 0!==r&&r.azureRegion&&n.metadata){Ue(e,await fi(this.updateMetadataWithRegionalInformation.bind(this),nr,this.logger,this.performanceClient,this.correlationId)(n.metadata),!1),e.canonical_authority=this.canonicalAuthority}return n.source}let o=await fi(this.getEndpointMetadataFromNetwork.bind(this),er,this.logger,this.performanceClient,this.correlationId)();var i;if(o)return null!==(i=this.authorityOptions.azureRegionConfiguration)&&void 0!==i&&i.azureRegion&&(o=await fi(this.updateMetadataWithRegionalInformation.bind(this),nr,this.logger,this.performanceClient,this.correlationId)(o)),Ue(e,o,!0),v.E_.NETWORK;throw pe(k,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),Ue(e,t,!1),{source:v.E_.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const t=this.getEndpointMetadataFromHardcodedValues();if(t)return Ue(e,t,!1),{source:v.E_.HARDCODED_VALUES,metadata:t};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const n=He(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:v.E_.CACHE}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new kt(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(Cs){throw lt(Je)}return null}async getEndpointMetadataFromNetwork(){var e;null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(er,this.correlationId);const t={},n=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose("Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ".concat(n));try{const e=await this.networkInterface.sendGetRequestAsync(n,t),r=function(e){return e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("jwks_uri")}(e.body);return r?e.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(Cs){return this.logger.verbose("Authority.getEndpointMetadataFromNetwork: ".concat(Cs)),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Rt?Rt[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var t,n;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(nr,this.correlationId);const r=null===(n=this.authorityOptions.azureRegionConfiguration)||void 0===n?void 0:n.azureRegion;if(r){var o;if(r!==v.YM.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=v._2.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=r,vi.replaceWithRegionalInformation(e,r);const t=await fi(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),rr,this.logger,this.performanceClient,this.correlationId)(null===(o=this.authorityOptions.azureRegionConfiguration)||void 0===o?void 0:o.environmentRegion,this.regionDiscoveryMetadata);if(t)return this.regionDiscoveryMetadata.region_outcome=v._2.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=t,vi.replaceWithRegionalInformation(e,t);this.regionDiscoveryMetadata.region_outcome=v._2.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Zn,this.correlationId);const n=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(n)return n;const r=await fi(this.getCloudDiscoveryMetadataFromNetwork.bind(this),Jn,this.logger,this.performanceClient,this.correlationId)();if(r)return De(e,r,!0),v.E_.NETWORK;throw lt(Ze)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii("Known Authorities: ".concat(this.authorityOptions.knownAuthorities||v.YM.NOT_APPLICABLE)),this.logger.verbosePii("Authority Metadata: ".concat(this.authorityOptions.authorityMetadata||v.YM.NOT_APPLICABLE)),this.logger.verbosePii("Canonical Authority: ".concat(e.canonical_authority||v.YM.NOT_APPLICABLE));const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),De(e,t,!1),v.E_.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const t=(n=this.hostnameAndPort,Mt(Pt.metadata,n));if(t)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),De(e,t,!1),v.E_.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}var n;const r=He(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),v.E_.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===At)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),vi.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=Mt(JSON.parse(this.authorityOptions.cloudDiscoveryMetadata).metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),e)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),e;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(Cs){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),lt(Xe)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),vi.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var e;null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(Jn,this.correlationId);const t="".concat(v.YM.AAD_INSTANCE_DISCOVERY_ENDPT).concat(this.canonicalAuthority,"oauth2/v2.0/authorize"),n={};let r=null;try{const e=await this.networkInterface.sendGetRequestAsync(t,n);let o,i;if(function(e){return e.hasOwnProperty("tenant_discovery_endpoint")&&e.hasOwnProperty("metadata")}(e.body))o=e.body,i=o.metadata,this.logger.verbosePii("tenant_discovery_endpoint is: ".concat(o.tenant_discovery_endpoint));else{if(!function(e){return e.hasOwnProperty("error")&&e.hasOwnProperty("error_description")}(e.body))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(this.logger.warning("A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ".concat(e.status)),o=e.body,o.error===v.YM.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning("The CloudInstanceDiscoveryErrorResponse error is ".concat(o.error)),this.logger.warning("The CloudInstanceDiscoveryErrorResponse error description is ".concat(o.error_description)),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),i=[]}this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Mt(i,this.hostnameAndPort)}catch(o){if(o instanceof T.lR)this.logger.error("There was a network error while attempting to get the cloud discovery instance metadata.\nError: ".concat(o.errorCode,"\nError Description: ").concat(o.errorMessage));else{const e=o;this.logger.error("A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ".concat(e.name,"\nError Description: ").concat(e.message))}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=vi.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(e=>e&&kt.getDomainFromUrl(e).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let n;if(t&&t.azureCloudInstance!==w){const e=t.tenant?t.tenant:v.YM.DEFAULT_COMMON_TENANT;n="".concat(t.azureCloudInstance,"/").concat(e,"/")}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return v.YM.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw pe(I)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Ot.has(e)}static isPublicCloudAuthority(e){return v.YM.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,n){const r=new kt(e);r.validateAsUri();const o=r.getUrlComponents();let i="".concat(t,".").concat(o.HostNameAndPort);this.isPublicCloudAuthority(o.HostNameAndPort)&&(i="".concat(t,".").concat(v.YM.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX));const a=kt.constructAuthorityUriFromObject((0,f.A)((0,f.A)({},r.getUrlComponents()),{},{HostNameAndPort:i})).urlString;return n?"".concat(a,"?").concat(n):a}static replaceWithRegionalInformation(e,t){const n=(0,f.A)({},e);return n.authorization_endpoint=vi.buildRegionalAuthorityString(n.authorization_endpoint,t),n.token_endpoint=vi.buildRegionalAuthorityString(n.token_endpoint,t),n.end_session_endpoint&&(n.end_session_endpoint=vi.buildRegionalAuthorityString(n.end_session_endpoint,t)),n}static transformCIAMAuthority(e){let t=e;const n=new kt(e).getUrlComponents();if(0===n.PathSegments.length&&n.HostNameAndPort.endsWith(v.YM.CIAM_AUTH_URL)){const e=n.HostNameAndPort.split(".")[0];t="".concat(t).concat(e).concat(v.YM.AAD_TENANT_DOMAIN_SUFFIX)}return t}}function yi(e){return e.endsWith(v.YM.FORWARD_SLASH)?e:"".concat(e).concat(v.YM.FORWARD_SLASH)}vi.reservedTenantDomains=new Set(["{tenant}","{tenantid}",v.v2.COMMON,v.v2.CONSUMERS,v.v2.ORGANIZATIONS]);const Ci="no_tokens_found",wi="native_account_unavailable",Ti="refresh_token_expired",bi="bad_token",Ai=["interaction_required","consent_required","login_required",bi],Si=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],Ei={[Ci]:"No refresh token found in the cache. Please sign-in.",[wi]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Ti]:"Refresh token has expired.",[bi]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."};class Ii extends T.lR{constructor(e,t,n,r,o,i,a,s){super(e,t,n),Object.setPrototypeOf(this,Ii.prototype),this.timestamp=r||v.YM.EMPTY_STRING,this.traceId=o||v.YM.EMPTY_STRING,this.correlationId=i||v.YM.EMPTY_STRING,this.claims=a||v.YM.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=s}}function _i(e,t,n){const r=!!e&&Ai.indexOf(e)>-1,o=!!n&&Si.indexOf(n)>-1,i=!!t&&Ai.some(e=>t.indexOf(e)>-1);return r||i||o}function ki(e){return new Ii(e,Ei[e])}class Ri{static setRequestState(e,t,n){const r=Ri.generateLibraryState(e,n);return t?"".concat(r).concat(v.YM.RESOURCE_DELIM).concat(t):r}static generateLibraryState(e,t){if(!e)throw pe($);const n={id:e.createNewGuid()};t&&(n.meta=t);const r=JSON.stringify(n);return e.base64Encode(r)}static parseRequestState(e,t){if(!e)throw pe($);if(!t)throw pe(P);try{const n=t.split(v.YM.RESOURCE_DELIM),r=n[0],o=n.length>1?n.slice(1).join(v.YM.RESOURCE_DELIM):v.YM.EMPTY_STRING,i=e.base64Decode(r),a=JSON.parse(i);return{userRequestState:o||v.YM.EMPTY_STRING,libraryState:a}}catch(Cs){throw pe(P)}}}const Pi="home_account_id",Oi="UPN";class Ni{constructor(){if(!window.localStorage)throw(0,Ko.jz)(zo.xz)}getItem(e){return window.localStorage.getItem(e)}setItem(e,t){window.localStorage.setItem(e,t)}removeItem(e){window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}}class Mi{constructor(){if(!window.sessionStorage)throw(0,Ko.jz)(zo.xz)}getItem(e){return window.sessionStorage.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}}function Li(e,t){if(!t)return null;try{return Ri.parseRequestState(e,t).libraryState.meta}catch(Cs){throw pe(P)}}const xi=864e5;class Ui{getItem(e){const t="".concat(encodeURIComponent(e)),n=document.cookie.split(";");for(let r=0;r<n.length;r++){const e=n[r],[o,...i]=decodeURIComponent(e).trim().split("="),a=i.join("=");if(o===t)return a}return""}setItem(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o="".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t),";path=/;SameSite=Lax;");if(n){const e=function(e){const t=new Date,n=new Date(t.getTime()+e*xi);return n.toUTCString()}(n);o+="expires=".concat(e,";")}r&&(o+="Secure;"),document.cookie=o}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),t=[];return e.forEach(e=>{const n=decodeURIComponent(e).trim().split("=");t.push(n[0])}),t}containsKey(e){return this.getKeys().includes(e)}}class Di extends Ht{constructor(e,t,n,r,o,i){super(e,n,r,o),this.cacheConfig=t,this.logger=r,this.internalStorage=new ui,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupBrowserStorage(this.cacheConfig.temporaryCacheLocation),this.cookieStorage=new Ui,t.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps()),this.performanceClient=i}setupBrowserStorage(e){try{switch(e){case Tr.Al.LocalStorage:return new Ni;case Tr.Al.SessionStorage:return new Mi;case Tr.Al.MemoryStorage:}}catch(Cs){this.logger.error(Cs)}return this.cacheConfig.cacheLocation=Tr.Al.MemoryStorage,new ui}migrateCacheEntries(){const e="".concat(v.YM.CACHE_PREFIX,".").concat(v.Gd.ID_TOKEN),t="".concat(v.YM.CACHE_PREFIX,".").concat(v.Gd.CLIENT_INFO),n="".concat(v.YM.CACHE_PREFIX,".").concat(v.Gd.ERROR),r="".concat(v.YM.CACHE_PREFIX,".").concat(v.Gd.ERROR_DESC),o=[this.browserStorage.getItem(e),this.browserStorage.getItem(t),this.browserStorage.getItem(n),this.browserStorage.getItem(r)];[v.Gd.ID_TOKEN,v.Gd.CLIENT_INFO,v.Gd.ERROR,v.Gd.ERROR_DESC].forEach((e,t)=>{const n=o[t];n&&this.setTemporaryCache(e,n,!0)})}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");const e=this.getItem(Tr.dh.ACCOUNT_KEYS),t=this.getItem("".concat(Tr.dh.TOKEN_KEYS,".").concat(this.clientId));if(e&&t)return void this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration.");this.browserStorage.getKeys().forEach(e=>{if(this.isCredentialKey(e)){const t=this.getItem(e);if(t){const n=this.validateAndParseJson(t);if(n&&n.hasOwnProperty("credentialType"))switch(n.credentialType){case v.aG.ID_TOKEN:if(ke(n)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii("BrowserCacheManager:createKeyMaps - idToken with key: ".concat(e," found, saving key to token key map"));const t=n,r=this.updateCredentialCacheKey(e,t);return void this.addTokenKey(r,v.aG.ID_TOKEN)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii("BrowserCacheManager:createKeyMaps - failed idToken validation on key: ".concat(e));break;case v.aG.ACCESS_TOKEN:case v.aG.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(_e(n)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii("BrowserCacheManager:createKeyMaps - accessToken with key: ".concat(e," found, saving key to token key map"));const t=n,r=this.updateCredentialCacheKey(e,t);return void this.addTokenKey(r,v.aG.ACCESS_TOKEN)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii("BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ".concat(e));break;case v.aG.REFRESH_TOKEN:if(Re(n)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii("BrowserCacheManager:createKeyMaps - refreshToken with key: ".concat(e," found, saving key to token key map"));const t=n,r=this.updateCredentialCacheKey(e,t);return void this.addTokenKey(r,v.aG.REFRESH_TOKEN)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii("BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ".concat(e))}}}if(this.isAccountKey(e)){const t=this.getItem(e);if(t){const n=this.validateAndParseJson(t);n&&Et.isAccountEntity(n)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii("BrowserCacheManager:createKeyMaps - account with key: ".concat(e," found, saving key to account key map")),this.addAccountKeyToMap(e))}}})}validateAndParseJson(e){try{const t=JSON.parse(e);return t&&"object"===typeof t?t:null}catch(t){return null}}getItem(e){return this.browserStorage.getItem(e)}setItem(e,t){this.browserStorage.setItem(e,t)}getAccount(e,t){this.logger.trace("BrowserCacheManager.getAccount called");const n=this.getCachedAccountEntity(e);return this.updateOutdatedCachedAccount(e,n,t)}getCachedAccountEntity(e){const t=this.getItem(e);if(!t)return this.removeAccountKeyFromMap(e),null;const n=this.validateAndParseJson(t);return n&&Et.isAccountEntity(n)?Ht.toObject(new Et,n):(this.removeAccountKeyFromMap(e),null)}setAccount(e){this.logger.trace("BrowserCacheManager.setAccount called");const t=e.generateAccountKey();this.setItem(t,JSON.stringify(e)),this.addAccountKeyToMap(t)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");const e=this.getItem(Tr.dh.ACCOUNT_KEYS);return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii("BrowserCacheManager.addAccountKeyToMap called with key: ".concat(e));const t=this.getAccountKeys();-1===t.indexOf(e)?(t.push(e),this.setItem(Tr.dh.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii("BrowserCacheManager.removeAccountKeyFromMap called with key: ".concat(e));const t=this.getAccountKeys(),n=t.indexOf(e);n>-1?(t.splice(n,1),this.setItem(Tr.dh.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}async removeAccount(e){super.removeAccount(e),this.removeAccountKeyFromMap(e)}removeOutdatedAccount(e){this.removeItem(e),this.removeAccountKeyFromMap(e)}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,v.aG.ID_TOKEN)}async removeAccessToken(e){super.removeAccessToken(e),this.removeTokenKey(e,v.aG.ACCESS_TOKEN)}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,v.aG.REFRESH_TOKEN)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");const e=this.getItem("".concat(Tr.dh.TOKEN_KEYS,".").concat(this.clientId));if(e){const t=this.validateAndParseJson(e);if(t&&t.hasOwnProperty("idToken")&&t.hasOwnProperty("accessToken")&&t.hasOwnProperty("refreshToken"))return t;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}addTokenKey(e,t){this.logger.trace("BrowserCacheManager addTokenKey called");const n=this.getTokenKeys();switch(t){case v.aG.ID_TOKEN:-1===n.idToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),n.idToken.push(e));break;case v.aG.ACCESS_TOKEN:-1===n.accessToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),n.accessToken.push(e));break;case v.aG.REFRESH_TOKEN:-1===n.refreshToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),n.refreshToken.push(e));break;default:throw this.logger.error("BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ".concat(t)),pe(X)}this.setItem("".concat(Tr.dh.TOKEN_KEYS,".").concat(this.clientId),JSON.stringify(n))}removeTokenKey(e,t){this.logger.trace("BrowserCacheManager removeTokenKey called");const n=this.getTokenKeys();switch(t){case v.aG.ID_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ".concat(e," from map"));const r=n.idToken.indexOf(e);r>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),n.idToken.splice(r,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case v.aG.ACCESS_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ".concat(e," from map"));const o=n.accessToken.indexOf(e);o>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),n.accessToken.splice(o,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case v.aG.REFRESH_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ".concat(e," from map"));const i=n.refreshToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),n.refreshToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error("BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ".concat(t)),pe(X)}this.setItem("".concat(Tr.dh.TOKEN_KEYS,".").concat(this.clientId),JSON.stringify(n))}getIdTokenCredential(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,v.aG.ID_TOKEN),null;const n=this.validateAndParseJson(t);return n&&ke(n)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,v.aG.ID_TOKEN),null)}setIdTokenCredential(e){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const t=be(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,v.aG.ID_TOKEN)}getAccessTokenCredential(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,v.aG.ACCESS_TOKEN),null;const n=this.validateAndParseJson(t);return n&&_e(n)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,v.aG.ACCESS_TOKEN),null)}setAccessTokenCredential(e){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const t=be(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,v.aG.ACCESS_TOKEN)}getRefreshTokenCredential(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,v.aG.REFRESH_TOKEN),null;const n=this.validateAndParseJson(t);return n&&Re(n)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,v.aG.REFRESH_TOKEN),null)}setRefreshTokenCredential(e){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const t=be(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,v.aG.REFRESH_TOKEN)}getAppMetadata(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&(r=e,(o=n)&&0===r.indexOf(v.GU)&&o.hasOwnProperty("clientId")&&o.hasOwnProperty("environment"))?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),n):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null);var r,o}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");const t=function(e){let{environment:t,clientId:n}=e;return[v.GU,t,n].join(v.LR.CACHE_KEY_SEPARATOR).toLowerCase()}(e);this.setItem(t,JSON.stringify(e))}getServerTelemetry(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){const n=0===e.indexOf(v.gT.CACHE_KEY);let r=!0;return t&&(r=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),n&&r}(e,n)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),n):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)}setServerTelemetry(e,t){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t))}getAuthorityMetadata(e){const t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){return!!t&&0===e.indexOf(v.u0.CACHE_KEY)&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri")}(e,n)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),n):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(e=>this.isAuthorityMetadata(e))}setWrapperMetadata(e,t){this.internalStorage.setItem(Tr.H3.WRAPPER_SKU,e),this.internalStorage.setItem(Tr.H3.WRAPPER_VER,t)}getWrapperMetadata(){return[this.internalStorage.getItem(Tr.H3.WRAPPER_SKU)||v.YM.EMPTY_STRING,this.internalStorage.getItem(Tr.H3.WRAPPER_VER)||v.YM.EMPTY_STRING]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(){const e=this.generateCacheKey(v.Gd.ACTIVE_ACCOUNT_FILTERS),t=this.getItem(e);if(!t){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");const e=this.generateCacheKey(v.Gd.ACTIVE_ACCOUNT),t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;const n=this.getAccountInfoFilteredBy({localAccountId:t});return n?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(n),n):null}const n=this.validateAndParseJson(t);return n?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:n.homeAccountId,localAccountId:n.localAccountId,tenantId:n.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){const t=this.generateCacheKey(v.Gd.ACTIVE_ACCOUNT_FILTERS),n=this.generateCacheKey(v.Gd.ACTIVE_ACCOUNT);if(e){this.logger.verbose("setActiveAccount: Active account set");const r={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(t,JSON.stringify(r)),this.browserStorage.setItem(n,e.localAccountId)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(t),this.browserStorage.removeItem(n)}getThrottlingCache(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){let n=!1;e&&(n=0===e.indexOf(v.Xw.THROTTLING_PREFIX));let r=!0;return t&&(r=t.hasOwnProperty("throttleTime")),n&&r}(e,n)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),n):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)}setThrottlingCache(e,t){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t))}getTemporaryCache(e,t){const n=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const e=this.cookieStorage.getItem(n);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),e}const r=this.temporaryCacheStorage.getItem(n);if(!r){if(this.cacheConfig.cacheLocation===Tr.Al.LocalStorage){const e=this.browserStorage.getItem(n);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),e}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),r}setTemporaryCache(e,t,n){const r=n?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(r,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(r,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}async clear(){await this.removeAllAccounts(),this.removeAppMetadata(),this.temporaryCacheStorage.getKeys().forEach(e=>{-1===e.indexOf(v.YM.CACHE_PREFIX)&&-1===e.indexOf(this.clientId)||this.removeTemporaryItem(e)}),this.browserStorage.getKeys().forEach(e=>{-1===e.indexOf(v.YM.CACHE_PREFIX)&&-1===e.indexOf(this.clientId)||this.browserStorage.removeItem(e)}),this.internalStorage.clear()}async clearTokensAndKeysWithClaims(e,t){e.addQueueMeasurement(dr,t);const n=this.getTokenKeys(),r=[];n.accessToken.forEach(e=>{const t=this.getAccessTokenCredential(e);null!==t&&void 0!==t&&t.requestedClaimsHash&&e.includes(t.requestedClaimsHash.toLowerCase())&&r.push(this.removeAccessToken(e))}),await Promise.all(r),r.length>0&&this.logger.warning("".concat(r.length," access tokens with claims in the cache keys have been removed from the cache."))}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):ut.startsWith(e,v.YM.CACHE_PREFIX)||ut.startsWith(e,v.Gd.ADAL_ID_TOKEN)?e:"".concat(v.YM.CACHE_PREFIX,".").concat(this.clientId,".").concat(e)}generateAuthorityKey(e){const{libraryState:{id:t}}=Ri.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey("".concat(Tr._p.AUTHORITY,".").concat(t))}generateNonceKey(e){const{libraryState:{id:t}}=Ri.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey("".concat(Tr._p.NONCE_IDTOKEN,".").concat(t))}generateStateKey(e){const{libraryState:{id:t}}=Ri.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey("".concat(Tr._p.REQUEST_STATE,".").concat(t))}getCachedAuthority(e){const t=this.generateStateKey(e),n=this.getTemporaryCache(t);if(!n)return null;const r=this.generateAuthorityKey(n);return this.getTemporaryCache(r)}updateCacheEntries(e,t,n,r,o){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const i=this.generateStateKey(e);this.setTemporaryCache(i,e,!1);const a=this.generateNonceKey(e);this.setTemporaryCache(a,t,!1);const s=this.generateAuthorityKey(e);if(this.setTemporaryCache(s,n,!1),o){const e={credential:o.homeAccountId,type:Pi};this.setTemporaryCache(Tr._p.CCS_CREDENTIAL,JSON.stringify(e),!0)}else if(r){const e={credential:r,type:Oi};this.setTemporaryCache(Tr._p.CCS_CREDENTIAL,JSON.stringify(e),!0)}}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.temporaryCacheStorage.getKeys().forEach(t=>{-1!==t.indexOf(e)&&this.removeTemporaryItem(t)}),this.removeTemporaryItem(this.generateStateKey(e)),this.removeTemporaryItem(this.generateNonceKey(e)),this.removeTemporaryItem(this.generateAuthorityKey(e))),this.removeTemporaryItem(this.generateCacheKey(Tr._p.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(Tr._p.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(Tr._p.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(Tr._p.CORRELATION_ID)),this.removeTemporaryItem(this.generateCacheKey(Tr._p.CCS_CREDENTIAL)),this.removeTemporaryItem(this.generateCacheKey(Tr._p.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){const t=this.generateStateKey(e),n=this.temporaryCacheStorage.getItem(t);this.logger.infoPii("BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ".concat(n)),this.resetRequestCache(n||v.YM.EMPTY_STRING)}}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.temporaryCacheStorage.getKeys().forEach(t=>{if(-1===t.indexOf(Tr._p.REQUEST_STATE))return;const n=this.temporaryCacheStorage.getItem(t);if(!n)return;const r=Li(this.cryptoImpl,n);r&&r.interactionType===e&&(this.logger.infoPii("BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ".concat(n)),this.resetRequestCache(n))}),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const t=Ro(JSON.stringify(e));this.setTemporaryCache(Tr._p.REQUEST_PARAMS,t,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");const t=this.getTemporaryCache(Tr._p.REQUEST_PARAMS,!0);if(!t)throw Ao(Yr);let n;try{n=JSON.parse(ci(t))}catch(Cs){throw this.logger.errorPii("Attempted to parse: ".concat(t)),this.logger.error("Parsing cached token request threw with error: ".concat(Cs)),Ao(Vr)}if(this.removeTemporaryItem(this.generateCacheKey(Tr._p.REQUEST_PARAMS)),!n.authority){const t=this.generateAuthorityKey(e),r=this.getTemporaryCache(t);if(!r)throw Ao(Wr);n.authority=r}return n}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(Tr._p.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){const t=this.getInteractionInProgress();return e?t===this.clientId:!!t}getInteractionInProgress(){const e="".concat(v.YM.CACHE_PREFIX,".").concat(Tr._p.INTERACTION_STATUS_KEY);return this.getTemporaryCache(e,!1)}setInteractionInProgress(e){const t="".concat(v.YM.CACHE_PREFIX,".").concat(Tr._p.INTERACTION_STATUS_KEY);if(e){if(this.getInteractionInProgress())throw Ao(Mr);this.setTemporaryCache(t,this.clientId,!1)}else e||this.getInteractionInProgress()!==this.clientId||this.removeTemporaryItem(t)}getLegacyLoginHint(){const e=this.getTemporaryCache(v.Gd.ADAL_ID_TOKEN);e&&(this.browserStorage.removeItem(v.Gd.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));const t=this.getTemporaryCache(v.Gd.ID_TOKEN,!0);t&&(this.browserStorage.removeItem(this.generateCacheKey(v.Gd.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));const n=t||e;if(n){const e=ye(n,ci);if(e.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),e.preferred_username;if(e.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),e.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(e,t){const n=be(t);if(e!==n){const r=this.getItem(e);if(r)return this.browserStorage.removeItem(e),this.setItem(n,r),this.logger.verbose("Updated an outdated ".concat(t.credentialType," cache key")),n;this.logger.error("Attempted to update an outdated ".concat(t.credentialType," cache key but no item matching the outdated key was found in storage"))}return e}async hydrateCache(e,t){var n,r,o;const i=Ae(null===(n=e.account)||void 0===n?void 0:n.homeAccountId,null===(r=e.account)||void 0===r?void 0:r.environment,e.idToken,this.clientId,e.tenantId);let a;t.claims&&(a=await this.cryptoImpl.hashString(t.claims));const s={idToken:i,accessToken:Se(null===(o=e.account)||void 0===o?void 0:o.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?e.expiresOn.getTime()/1e3:0,e.extExpiresOn?e.extExpiresOn.getTime()/1e3:0,ci,void 0,e.tokenType,void 0,t.sshKid,t.claims,a)};return this.saveCacheRecord(s)}async saveCacheRecord(e,t,n){try{await super.saveCacheRecord(e,t,n)}catch(Cs){if(Cs instanceof Dt&&this.performanceClient&&n)try{const e=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:e.refreshToken.length,cacheIdCount:e.idToken.length,cacheAtCount:e.accessToken.length},n)}catch(Cs){}throw Cs}}}var Hi=n(498);class qi{constructor(e){this.eventCallbacks=new Map,this.logger=e||new m.V({})}addEventCallback(e,t,n){if("undefined"!==typeof window){const r=n||qo();return this.eventCallbacks.has(r)?(this.logger.error("Event callback with id: ".concat(r," is already registered. Please provide a unique id or remove the existing callback and try again.")),null):(this.eventCallbacks.set(r,[e,t||[]]),this.logger.verbose("Event callback registered with id: ".concat(r)),r)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose("Event callback ".concat(e," removed."))}emitEvent(e,t,n,r){if("undefined"!==typeof window){const o={eventType:e,interactionType:t||null,payload:n||null,error:r||null,timestamp:Date.now()};this.eventCallbacks.forEach((t,n)=>{let[r,i]=t;(0===i.length||i.includes(e))&&(this.logger.verbose("Emitting event to callback ".concat(n,": ").concat(e)),r.apply(null,[o]))})}}}class Fi extends T.lR{constructor(e,t,n,r,o){super(e,t,n),this.name="ServerError",this.errorNo=r,this.status=o,Object.setPrototypeOf(this,Fi.prototype)}}class Bi{static generateThrottlingStorageKey(e){return"".concat(v.Xw.THROTTLING_PREFIX,".").concat(JSON.stringify(e))}static preProcess(e,t){const n=Bi.generateThrottlingStorageKey(t),r=e.getThrottlingCache(n);if(r){var o;if(r.throttleTime<Date.now())return void e.removeItem(n);throw new Fi((null===(o=r.errorCodes)||void 0===o?void 0:o.join(" "))||v.YM.EMPTY_STRING,r.errorMessage,r.subError)}}static postProcess(e,t,n){if(Bi.checkResponseStatus(n)||Bi.checkResponseForRetryAfter(n)){const r={throttleTime:Bi.calculateThrottleTime(parseInt(n.headers[v.OK.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(Bi.generateThrottlingStorageKey(t),r)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&(e.headers.hasOwnProperty(v.OK.RETRY_AFTER)&&(e.status<200||e.status>=300))}static calculateThrottleTime(e){const t=e<=0?0:e,n=Date.now()/1e3;return Math.floor(1e3*Math.min(n+(t||v.Xw.DEFAULT_THROTTLE_TIME_SECONDS),n+v.Xw.DEFAULT_MAX_THROTTLE_TIME_SECONDS))}static removeThrottle(e,t,n,r){const o={clientId:t,authority:n.authority,scopes:n.scopes,homeAccountIdentifier:r,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid},i=this.generateThrottlingStorageKey(o);e.removeItem(i)}}const Ki="client_id",zi="redirect_uri",Gi="response_type",ji="token_type",Yi="req_cnf",Vi="return_spa_code",Wi="x-client-xtra-sku",Qi="brk_client_id",$i="brk_redirect_uri";class Xi{static validateRedirectUri(e){if(!e)throw lt(qe)}static validatePrompt(e){const t=[];for(const n in v._M)t.push(v._M[n]);if(t.indexOf(e)<0)throw lt(je)}static validateClaims(e){try{JSON.parse(e)}catch(Cs){throw lt(Ye)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw lt($e);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([v.iF.PLAIN,v.iF.S256].indexOf(e)<0)throw lt(Qe)}}class Ji{constructor(e,t){this.parameters=new Map,this.performanceClient=t,this.correlationId=e}addResponseTypeCode(){this.parameters.set(Gi,encodeURIComponent(v.YM.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(Gi,encodeURIComponent("".concat(v.YM.TOKEN_RESPONSE_TYPE," ").concat(v.YM.ID_TOKEN_RESPONSE_TYPE)))}addResponseMode(e){this.parameters.set("response_mode",encodeURIComponent(e||v.p.QUERY))}addNativeBroker(){this.parameters.set("nativebroker",encodeURIComponent("1"))}addScopes(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v.aZ;!t||n.includes("openid")||e.includes("openid")||n.push("openid");const r=t?[...e||[],...n]:e||[],o=new dt(r);this.parameters.set("scope",encodeURIComponent(o.printScopes()))}addClientId(e){this.parameters.set(Ki,encodeURIComponent(e))}addRedirectUri(e){Xi.validateRedirectUri(e),this.parameters.set(zi,encodeURIComponent(e))}addPostLogoutRedirectUri(e){Xi.validateRedirectUri(e),this.parameters.set("post_logout_redirect_uri",encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set("id_token_hint",encodeURIComponent(e))}addDomainHint(e){this.parameters.set("domain_hint",encodeURIComponent(e))}addLoginHint(e){this.parameters.set("login_hint",encodeURIComponent(e))}addCcsUpn(e){this.parameters.set(v.OK.CCS_HEADER,encodeURIComponent("UPN:".concat(e)))}addCcsOid(e){this.parameters.set(v.OK.CCS_HEADER,encodeURIComponent("Oid:".concat(e.uid,"@").concat(e.utid)))}addSid(e){this.parameters.set("sid",encodeURIComponent(e))}addClaims(e,t){const n=this.addClientCapabilitiesToClaims(e,t);Xi.validateClaims(n),this.parameters.set("claims",encodeURIComponent(n))}addCorrelationId(e){this.parameters.set("client-request-id",encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set("x-client-SKU",e.sku),this.parameters.set("x-client-VER",e.version),e.os&&this.parameters.set("x-client-OS",e.os),e.cpu&&this.parameters.set("x-client-CPU",e.cpu)}addApplicationTelemetry(e){null!==e&&void 0!==e&&e.appName&&this.parameters.set("x-app-name",e.appName),null!==e&&void 0!==e&&e.appVersion&&this.parameters.set("x-app-ver",e.appVersion)}addPrompt(e){Xi.validatePrompt(e),this.parameters.set("".concat("prompt"),encodeURIComponent(e))}addState(e){e&&this.parameters.set("state",encodeURIComponent(e))}addNonce(e){this.parameters.set("nonce",encodeURIComponent(e))}addCodeChallengeParams(e,t){if(Xi.validateCodeChallengeParams(e,t),!e||!t)throw lt($e);this.parameters.set("code_challenge",encodeURIComponent(e)),this.parameters.set("code_challenge_method",encodeURIComponent(t))}addAuthorizationCode(e){this.parameters.set("code",encodeURIComponent(e))}addDeviceCode(e){this.parameters.set("device_code",encodeURIComponent(e))}addRefreshToken(e){this.parameters.set("refresh_token",encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set("code_verifier",encodeURIComponent(e))}addClientSecret(e){this.parameters.set("client_secret",encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set("client_assertion",encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set("client_assertion_type",encodeURIComponent(e))}addOboAssertion(e){this.parameters.set("assertion",encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set("requested_token_use",encodeURIComponent(e))}addGrantType(e){this.parameters.set("grant_type",encodeURIComponent(e))}addClientInfo(){this.parameters.set(v.JR,"1")}addExtraQueryParameters(e){Object.entries(e).forEach(e=>{let[t,n]=e;!this.parameters.has(t)&&n&&this.parameters.set(t,n)})}addClientCapabilitiesToClaims(e,t){let n;if(e)try{n=JSON.parse(e)}catch(Cs){throw lt(Ye)}else n={};return t&&t.length>0&&(n.hasOwnProperty(v.Fq.ACCESS_TOKEN)||(n[v.Fq.ACCESS_TOKEN]={}),n[v.Fq.ACCESS_TOKEN][v.Fq.XMS_CC]={values:t}),JSON.stringify(n)}addUsername(e){this.parameters.set(v.Tq.username,encodeURIComponent(e))}addPassword(e){this.parameters.set(v.Tq.password,encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(ji,v.IO.POP),this.parameters.set(Yi,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(ji,v.IO.SSH),this.parameters.set(Yi,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set("x-client-current-telemetry",e.generateCurrentRequestHeaderValue()),this.parameters.set("x-client-last-telemetry",e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set("x-ms-lib-capability",v.Xw.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(e){this.parameters.set("logout_hint",encodeURIComponent(e))}addBrokerParameters(e){const t={};t[Qi]=e.brokerClientId,t[$i]=e.brokerRedirectUri,this.addExtraQueryParameters(t)}createQueryString(){const e=new Array;return this.parameters.forEach((t,n)=>{e.push("".concat(n,"=").concat(t))}),function(e,t,n){if(!t)return;const r=e.get(Ki);r&&e.has(Qi)&&(null===n||void 0===n||n.addFields({embeddedClientId:r,embeddedRedirectUri:e.get(zi)},t))}(this.parameters,this.correlationId,this.performanceClient),e.join("&")}}async function Zi(e,t,n,r,o,i,a){null===a||void 0===a||a.addQueueMeasurement($n,i);const s=vi.transformCIAMAuthority(yi(e)),c=new vi(s,t,n,r,o,i,a);try{return await fi(c.resolveEndpointsAsync.bind(c),Xn,o,a,i)(),c}catch(Cs){throw pe(I)}}class ea{constructor(e,t){this.config=function(e){let{authOptions:t,systemOptions:n,loggerOptions:r,cacheOptions:o,storageInterface:i,networkInterface:a,cryptoInterface:s,clientCredentials:c,libraryInfo:l,telemetry:u,serverTelemetryManager:d,persistencePlugin:h,serializableCache:g}=e;const p=(0,f.A)((0,f.A)({},Bt),r);return{authOptions:(v=t,(0,f.A)({clientCapabilities:[],azureCloudOptions:Yt,skipAuthorityMetadataCache:!1,instanceAware:!1},v)),systemOptions:(0,f.A)((0,f.A)({},Ft),n),loggerOptions:p,cacheOptions:(0,f.A)((0,f.A)({},Kt),o),storageInterface:i||new qt(t.clientId,fe,new m.V(p)),networkInterface:a||zt,cryptoInterface:s||fe,clientCredentials:c||jt,libraryInfo:(0,f.A)((0,f.A)({},Gt),l),telemetry:(0,f.A)((0,f.A)({},Vt),u),serverTelemetryManager:d||null,persistencePlugin:h||null,serializableCache:g||null};var v}(e),this.logger=new m.V(this.config.loggerOptions,me,ve),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t[v.OK.CONTENT_TYPE]=v.YM.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Pi:try{const n=gt(e.credential);t[v.OK.CCS_HEADER]="Oid:".concat(n.uid,"@").concat(n.utid)}catch(Cs){this.logger.verbose("Could not parse home account ID for CCS Header: "+Cs)}break;case Oi:t[v.OK.CCS_HEADER]="UPN: ".concat(e.credential)}return t}async executePostToTokenEndpoint(e,t,n,r,o,i){var a;i&&(null===(a=this.performanceClient)||void 0===a||a.addQueueMeasurement(i,o));const s=await this.sendPostRequest(r,e,{body:t,headers:n},o);return this.config.serverTelemetryManager&&s.status<500&&429!==s.status&&this.config.serverTelemetryManager.clearTelemetryCache(),s}async sendPostRequest(e,t,n,r){let o;Bi.preProcess(this.cacheManager,e);try{var i,a;o=await fi(this.networkClient.sendPostRequestAsync.bind(this.networkClient),pn,this.logger,this.performanceClient,r)(t,n);const e=o.headers||{};null===(i=this.performanceClient)||void 0===i||i.addFields({refreshTokenSize:(null===(a=o.body.refresh_token)||void 0===a?void 0:a.length)||0,httpVerToken:e[v.OK.X_MS_HTTP_VERSION]||"",requestId:e[v.OK.X_MS_REQUEST_ID]||""},r)}catch(Cs){if(Cs instanceof Ar){const t=Cs.responseHeaders;var s;if(t)null===(s=this.performanceClient)||void 0===s||s.addFields({httpVerToken:t[v.OK.X_MS_HTTP_VERSION]||"",requestId:t[v.OK.X_MS_REQUEST_ID]||"",contentTypeHeader:t[v.OK.CONTENT_TYPE]||void 0,contentLengthHeader:t[v.OK.CONTENT_LENGTH]||void 0,httpStatus:Cs.httpStatus},r);throw Cs.error}throw Cs instanceof T.lR?Cs:pe(_)}return Bi.postProcess(this.cacheManager,e,o),o}async updateAuthority(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Bn,t);const r="https://".concat(e,"/").concat(this.authority.tenant,"/"),o=await Zi(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=o}createTokenQueryParameters(e){const t=new Ji(e.correlationId,this.performanceClient);return e.embeddedClientId&&t.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenQueryParameters&&t.addExtraQueryParameters(e.tokenQueryParameters),t.addCorrelationId(e.correlationId),t.createQueryString()}}const ta="sw";class na{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Yn,e.correlationId);const r=await fi(this.generateKid.bind(this),Yn,t,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:o}}async generateKid(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Vn,e.correlationId);return{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:ta}}async signPopToken(e,t,n){return this.signPayload(e,t,n)}async signPayload(e,t,n,r){const{resourceRequestMethod:o,resourceRequestUri:i,shrClaims:a,shrNonce:s,shrOptions:c}=n,l=i?new kt(i):void 0,u=null===l||void 0===l?void 0:l.getUrlComponents();return this.cryptoUtils.signJwt((0,f.A)({at:e,ts:we(),m:null===o||void 0===o?void 0:o.toUpperCase(),u:null===u||void 0===u?void 0:u.HostNameAndPort,nonce:s||this.cryptoUtils.createNewGuid(),p:null===u||void 0===u?void 0:u.AbsolutePath,q:null!==u&&void 0!==u&&u.QueryString?[[],u.QueryString]:void 0,client_claims:a||void 0},r),t,c,n.correlationId)}}class ra{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class oa{constructor(e,t,n,r,o,i,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=n,this.logger=r,this.serializableCache=o,this.persistencePlugin=i,this.performanceClient=a}validateServerAuthorizationCodeResponse(e,t){if(!e.state||!t)throw e.state?pe(N,"Cached State"):pe(N,"Server State");let n,r;try{n=decodeURIComponent(e.state)}catch(Cs){throw pe(P,e.state)}try{r=decodeURIComponent(t)}catch(Cs){throw pe(P,e.state)}if(n!==r)throw pe(O);if(e.error||e.error_description||e.suberror){const t=function(e){var t,n;const r="code=",o=null===(t=e.error_uri)||void 0===t?void 0:t.lastIndexOf(r);return o&&o>=0?null===(n=e.error_uri)||void 0===n?void 0:n.substring(o+5):void 0}(e);if(_i(e.error,e.error_description,e.suberror))throw new Ii(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",t);throw new Fi(e.error||"",e.error_description,e.suberror,t)}}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){var n;const r="Error(s): ".concat(e.error_codes||v.YM.NOT_AVAILABLE," - Timestamp: ").concat(e.timestamp||v.YM.NOT_AVAILABLE," - Description: ").concat(e.error_description||v.YM.NOT_AVAILABLE," - Correlation ID: ").concat(e.correlation_id||v.YM.NOT_AVAILABLE," - Trace ID: ").concat(e.trace_id||v.YM.NOT_AVAILABLE),o=null!==(n=e.error_codes)&&void 0!==n&&n.length?e.error_codes[0]:void 0,i=new Fi(e.error,r,e.suberror,o,e.status);if(t&&e.status&&e.status>=v.t3.SERVER_ERROR_RANGE_START&&e.status<=v.t3.SERVER_ERROR_RANGE_END)return void this.logger.warning("executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n".concat(i));if(t&&e.status&&e.status>=v.t3.CLIENT_ERROR_RANGE_START&&e.status<=v.t3.CLIENT_ERROR_RANGE_END)return void this.logger.warning("executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n".concat(i));if(_i(e.error,e.error_description,e.suberror))throw new Ii(e.error,e.error_description,e.suberror,e.timestamp||v.YM.EMPTY_STRING,e.trace_id||v.YM.EMPTY_STRING,e.correlation_id||v.YM.EMPTY_STRING,e.claims||v.YM.EMPTY_STRING,o);throw i}}async handleServerTokenResponse(e,t,n,r,o,i,a,s,c){var l;let u,d;if(null===(l=this.performanceClient)||void 0===l||l.addQueueMeasurement(Wn,e.correlation_id),e.id_token){if(u=ye(e.id_token||v.YM.EMPTY_STRING,this.cryptoObj.base64Decode),o&&o.nonce&&u.nonce!==o.nonce)throw pe(M);if(r.maxAge||0===r.maxAge){const e=u.auth_time;if(!e)throw pe(L);Ce(e,r.maxAge)}}this.homeAccountIdentifier=Et.generateHomeAccountId(e.client_info||v.YM.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,u),o&&o.state&&(d=Ri.parseRequestState(this.cryptoObj,o.state)),e.key_id=e.key_id||r.sshKid||void 0;const h=this.generateCacheRecord(e,t,n,r,u,i,o);let g;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),g=new ra(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(g)),a&&!s&&h.account){const e=h.account.generateAccountKey();if(!this.cacheStorage.getAccount(e,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await oa.generateAuthenticationResult(this.cryptoObj,t,h,!1,r,u,d,void 0,c)}await this.cacheStorage.saveCacheRecord(h,r.storeInCache,r.correlationId)}finally{this.persistencePlugin&&this.serializableCache&&g&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(g))}return oa.generateAuthenticationResult(this.cryptoObj,t,h,!1,r,u,d,e,c)}generateCacheRecord(e,t,n,r,o,i,a){const s=t.getPreferredCache();if(!s)throw pe(W);const c=St(o);let l,u;e.id_token&&o&&(l=Ae(this.homeAccountIdentifier,s,e.id_token,this.clientId,c||""),u=ia(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,o,e.client_info,s,c,a,void 0,this.logger));let d=null;if(e.access_token){const o=e.scope?dt.fromString(e.scope):new dt(r.scopes||[]),a=("string"===typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,l=("string"===typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,u=("string"===typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,h=n+a,g=h+l,p=u&&u>0?n+u:void 0;d=Se(this.homeAccountIdentifier,s,e.access_token,this.clientId,c||t.tenant||"",o.printScopes(),h,g,this.cryptoObj.base64Decode,p,e.token_type,i,e.key_id,r.claims,r.requestedClaimsHash)}let h=null;if(e.refresh_token){let t;if(e.refresh_token_expires_in){t=n+("string"===typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)}h=Ee(this.homeAccountIdentifier,s,e.refresh_token,this.clientId,e.foci,i,t)}let g=null;return e.foci&&(g={clientId:this.clientId,environment:s,familyId:e.foci}),{account:u,idToken:l,accessToken:d,refreshToken:h,appMetadata:g}}static async generateAuthenticationResult(e,t,n,r,o,i,a,s,c){var l,u,d,h,g;let p,f,m=v.YM.EMPTY_STRING,y=[],C=null,w=v.YM.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType!==v.IO.POP||o.popKid)m=n.accessToken.secret;else{const t=new na(e),{secret:r,keyId:i}=n.accessToken;if(!i)throw pe(ae);m=await t.signPopToken(r,i,o)}y=dt.fromString(n.accessToken.target).asArray(),C=new Date(1e3*Number(n.accessToken.expiresOn)),p=new Date(1e3*Number(n.accessToken.extendedExpiresOn)),n.accessToken.refreshOn&&(f=new Date(1e3*Number(n.accessToken.refreshOn)))}n.appMetadata&&(w=n.appMetadata.familyId===v.hB?v.hB:"");const T=(null===i||void 0===i?void 0:i.oid)||(null===i||void 0===i?void 0:i.sub)||"",b=(null===i||void 0===i?void 0:i.tid)||"";null!==s&&void 0!==s&&s.spa_accountid&&n.account&&(n.account.nativeAccountId=null===s||void 0===s?void 0:s.spa_accountid);const A=n.account?Ct(n.account.getAccountInfo(),void 0,i,null===(l=n.idToken)||void 0===l?void 0:l.secret):null;return{authority:t.canonicalAuthority,uniqueId:T,tenantId:b,scopes:y,account:A,idToken:(null===n||void 0===n||null===(u=n.idToken)||void 0===u?void 0:u.secret)||"",idTokenClaims:i||{},accessToken:m,fromCache:r,expiresOn:C,extExpiresOn:p,refreshOn:f,correlationId:o.correlationId,requestId:c||v.YM.EMPTY_STRING,familyId:w,tokenType:(null===(d=n.accessToken)||void 0===d?void 0:d.tokenType)||v.YM.EMPTY_STRING,state:a?a.userRequestState:v.YM.EMPTY_STRING,cloudGraphHostName:(null===(h=n.account)||void 0===h?void 0:h.cloudGraphHostName)||v.YM.EMPTY_STRING,msGraphHost:(null===(g=n.account)||void 0===g?void 0:g.msGraphHost)||v.YM.EMPTY_STRING,code:null===s||void 0===s?void 0:s.spa_code,fromNativeBroker:!1}}}function ia(e,t,n,r,o,i,a,s,c,l,u){null===u||void 0===u||u.verbose("setCachedAccount called");const d=e.getAccountKeys().find(e=>e.startsWith(n));let h=null;d&&(h=e.getAccount(d,u));const g=h||Et.createAccount({homeAccountId:n,idTokenClaims:o,clientInfo:i,environment:a,cloudGraphHostName:null===c||void 0===c?void 0:c.cloud_graph_host_name,msGraphHost:null===c||void 0===c?void 0:c.msgraph_host,nativeAccountId:l},t,r),p=g.tenantProfiles||[],f=s||g.realm;if(f&&!p.find(e=>e.tenantId===f)){const e=yt(n,g.localAccountId,f,o);p.push(e)}return g.tenantProfiles=p,g}async function aa(e,t,n){if("string"===typeof e)return e;return e({clientId:t,tokenEndpoint:n})}class sa extends ea{constructor(e,t){var n;super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=null===(n=this.config.authOptions.authority.options.OIDCOptions)||void 0===n?void 0:n.defaultScopes}async getAuthCodeUrl(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Hn,e.correlationId);const n=await fi(this.createAuthCodeUrlQueryString.bind(this),jn,this.logger,this.performanceClient,e.correlationId)(e);return kt.appendQueryString(this.authority.authorizationEndpoint,n)}async acquireToken(e,t){var n,r;if(null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Kn,e.correlationId),!e.code)throw pe(q);const o=we(),i=await fi(this.executeTokenRequest.bind(this),zn,this.logger,this.performanceClient,e.correlationId)(this.authority,e),a=null===(r=i.headers)||void 0===r?void 0:r[v.OK.X_MS_REQUEST_ID],s=new oa(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(i.body),fi(s.handleServerTokenResponse.bind(s),Wn,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,o,e,t,void 0,void 0,void 0,a)}handleFragmentResponse(e,t){if(new oa(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,t),!e.code)throw pe(re);return e}getLogoutUri(e){if(!e)throw lt(We);const t=this.createLogoutUrlQueryString(e);return kt.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){var n,r;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(zn,t.correlationId);const o=this.createTokenQueryParameters(t),i=kt.appendQueryString(e.tokenEndpoint,o),a=await fi(this.createTokenRequestBody.bind(this),Gn,this.logger,this.performanceClient,t.correlationId)(t);let s;if(t.clientInfo)try{const e=ht(t.clientInfo,this.cryptoUtils.base64Decode);s={credential:"".concat(e.uid).concat(v.LR.CLIENT_INFO_SEPARATOR).concat(e.utid),type:Pi}}catch(Cs){this.logger.verbose("Could not parse client info for CCS Header: "+Cs)}const c=this.createTokenRequestHeaders(s||t.ccsCredential),l={clientId:(null===(r=t.tokenBodyParameters)||void 0===r?void 0:r.clientId)||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return fi(this.executePostToTokenEndpoint.bind(this),mn,this.logger,this.performanceClient,t.correlationId)(i,a,c,l,t.correlationId,mn)}async createTokenRequestBody(e){var t,n;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Gn,e.correlationId);const r=new Ji(e.correlationId,this.performanceClient);if(r.addClientId(e.embeddedClientId||(null===(n=e.tokenBodyParameters)||void 0===n?void 0:n[Ki])||this.config.authOptions.clientId),this.includeRedirectUri?r.addRedirectUri(e.redirectUri):Xi.validateRedirectUri(e.redirectUri),r.addScopes(e.scopes,!0,this.oidcDefaultScopes),r.addAuthorizationCode(e.code),r.addLibraryInfo(this.config.libraryInfo),r.addApplicationTelemetry(this.config.telemetry.application),r.addThrottling(),this.serverTelemetryManager&&!Wt(this.config)&&r.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&r.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&r.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const t=this.config.clientCredentials.clientAssertion;r.addClientAssertion(await aa(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),r.addClientAssertionType(t.assertionType)}if(r.addGrantType(v.$x.AUTHORIZATION_CODE_GRANT),r.addClientInfo(),e.authenticationScheme===v.IO.POP){const t=new na(this.cryptoUtils,this.performanceClient);let n;if(e.popKid)n=this.cryptoUtils.encodeKid(e.popKid);else{n=(await fi(t.generateCnf.bind(t),Yn,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}r.addPopToken(n)}else if(e.authenticationScheme===v.IO.SSH){if(!e.sshJwk)throw lt(et);r.addSshJwk(e.sshJwk)}let o;if((!ut.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.clientInfo)try{const t=ht(e.clientInfo,this.cryptoUtils.base64Decode);o={credential:"".concat(t.uid).concat(v.LR.CLIENT_INFO_SEPARATOR).concat(t.utid),type:Pi}}catch(Cs){this.logger.verbose("Could not parse client info for CCS Header: "+Cs)}else o=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&o)switch(o.type){case Pi:try{const e=gt(o.credential);r.addCcsOid(e)}catch(Cs){this.logger.verbose("Could not parse home account ID for CCS Header: "+Cs)}break;case Oi:r.addCcsUpn(o.credential)}return e.embeddedClientId&&r.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenBodyParameters&&r.addExtraQueryParameters(e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[Vi]||r.addExtraQueryParameters({[Vi]:"1"}),r.createQueryString()}async createAuthCodeUrlQueryString(e){var t,n;const r=e.correlationId||this.config.cryptoInterface.createNewGuid();null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(jn,r);const o=new Ji(r,this.performanceClient);o.addClientId(e.embeddedClientId||(null===(n=e.extraQueryParameters)||void 0===n?void 0:n[Ki])||this.config.authOptions.clientId);const i=[...e.scopes||[],...e.extraScopesToConsent||[]];if(o.addScopes(i,!0,this.oidcDefaultScopes),o.addRedirectUri(e.redirectUri),o.addCorrelationId(r),o.addResponseMode(e.responseMode),o.addResponseTypeCode(),o.addLibraryInfo(this.config.libraryInfo),Wt(this.config)||o.addApplicationTelemetry(this.config.telemetry.application),o.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&o.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&o.addPrompt(e.prompt),e.domainHint&&o.addDomainHint(e.domainHint),e.prompt!==v._M.SELECT_ACCOUNT)if(e.sid&&e.prompt===v._M.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),o.addSid(e.sid);else if(e.account){const t=this.extractAccountSid(e.account);let n=this.extractLoginHint(e.account);if(n&&e.domainHint&&(this.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),n=null),n){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),o.addLoginHint(n);try{const t=gt(e.account.homeAccountId);o.addCcsOid(t)}catch(Cs){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(t&&e.prompt===v._M.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),o.addSid(t);try{const t=gt(e.account.homeAccountId);o.addCcsOid(t)}catch(Cs){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),o.addLoginHint(e.loginHint),o.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),o.addLoginHint(e.account.username);try{const t=gt(e.account.homeAccountId);o.addCcsOid(t)}catch(Cs){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),o.addLoginHint(e.loginHint),o.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&o.addNonce(e.nonce),e.state&&o.addState(e.state),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&o.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.embeddedClientId&&o.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),this.addExtraQueryParams(e,o),e.nativeBroker&&(o.addNativeBroker(),e.authenticationScheme===v.IO.POP)){const t=new na(this.cryptoUtils);let n;if(e.popKid)n=this.cryptoUtils.encodeKid(e.popKid);else{n=(await fi(t.generateCnf.bind(t),Yn,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}o.addPopToken(n)}return o.createQueryString()}createLogoutUrlQueryString(e){const t=new Ji(e.correlationId,this.performanceClient);return e.postLogoutRedirectUri&&t.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&t.addCorrelationId(e.correlationId),e.idTokenHint&&t.addIdTokenHint(e.idTokenHint),e.state&&t.addState(e.state),e.logoutHint&&t.addLogoutHint(e.logoutHint),this.addExtraQueryParams(e,t),t.createQueryString()}addExtraQueryParams(e,t){!(e.extraQueryParameters&&e.extraQueryParameters.hasOwnProperty("instance_aware"))&&this.config.authOptions.instanceAware&&(e.extraQueryParameters=e.extraQueryParameters||{},e.extraQueryParameters.instance_aware="true"),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters)}extractAccountSid(e){var t;return(null===(t=e.idTokenClaims)||void 0===t?void 0:t.sid)||null}extractLoginHint(e){var t;return(null===(t=e.idTokenClaims)||void 0===t?void 0:t.login_hint)||null}}function ca(e){const{skus:t,libraryName:n,libraryVersion:r,extensionName:o,extensionVersion:i}=e,a=new Map([[0,[n,r]],[2,[o,i]]]);let s=[];if(null!==t&&void 0!==t&&t.length){if(s=t.split(","),s.length<4)return t}else s=Array.from({length:4},()=>"|");return a.forEach((e,t)=>{var n,r;2===e.length&&null!==(n=e[0])&&void 0!==n&&n.length&&null!==(r=e[1])&&void 0!==r&&r.length&&function(e){const{skuArr:t,index:n,skuName:r,skuVersion:o}=e;if(n>=t.length)return;t[n]=[r,o].join("|")}({skuArr:s,index:t,skuName:e[0],skuVersion:e[1]})}),s.join(",")}class la{constructor(e,t){this.cacheOutcome=v.Rv.NOT_APPLICABLE,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||v.YM.EMPTY_STRING,this.wrapperVer=e.wrapperVer||v.YM.EMPTY_STRING,this.telemetryCacheKey=v.gT.CACHE_KEY+v.LR.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e="".concat(this.apiId).concat(v.gT.VALUE_SEPARATOR).concat(this.cacheOutcome),t=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();null!==n&&void 0!==n&&n.length&&t.push("broker_error=".concat(n));const r=t.join(v.gT.VALUE_SEPARATOR),o=[e,this.getRegionDiscoveryFields()].join(v.gT.VALUE_SEPARATOR);return[v.gT.SCHEMA_VERSION,o,r].join(v.gT.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=la.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*t).join(v.gT.VALUE_SEPARATOR),r=e.errors.slice(0,t).join(v.gT.VALUE_SEPARATOR),o=e.errors.length,i=[o,t<o?v.gT.OVERFLOW_TRUE:v.gT.OVERFLOW_FALSE].join(v.gT.VALUE_SEPARATOR);return[v.gT.SCHEMA_VERSION,e.cacheHits,n,r,i].join(v.gT.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=v.gT.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof T.lR?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(v.gT.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),t=la.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey);else{const n={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n)}}static maxErrorsToSend(e){let t,n=0,r=0;const o=e.errors.length;for(t=0;t<o;t++){const o=e.failedRequests[2*t]||v.YM.EMPTY_STRING,i=e.failedRequests[2*t+1]||v.YM.EMPTY_STRING,a=e.errors[t]||v.YM.EMPTY_STRING;if(r+=o.toString().length+i.toString().length+a.length+3,!(r<v.gT.MAX_LAST_HEADER_BYTES))break;n+=1}return n}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||v.YM.EMPTY_STRING),e.push(this.regionSource||v.YM.EMPTY_STRING),e.push(this.regionOutcome||v.YM.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return ca(e)}}class ua{constructor(e,t,n,r,o,i,a,s,c){this.config=e,this.browserStorage=t,this.browserCrypto=n,this.networkClient=this.config.system.networkClient,this.eventHandler=o,this.navigationClient=i,this.nativeMessageHandler=s,this.correlationId=c||qo(),this.logger=r.clone(Tr.Q1.MSAL_SKU,Zo,this.correlationId),this.performanceClient=a}async clearCacheOnLogout(e){if(e){Et.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{await this.browserStorage.removeAccount(Et.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch(t){this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),await this.browserStorage.clear(),await this.browserCrypto.clearKeystore()}catch(Cs){this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const t=e||this.config.auth.redirectUri;return kt.getAbsoluteUrl(t,jo())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");const n={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new la(n,this.browserStorage)}async getDiscoveredAuthority(e){const{account:t}=e,n=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(dn,this.correlationId);const r={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},o=e.requestAuthority||this.config.auth.authority,i=null!==n&&void 0!==n&&n.length?"true"===n:this.config.auth.instanceAware,a=t&&i?this.config.auth.authority.replace(kt.getDomainFromUrl(o),t.environment):o,s=vi.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),c=await fi(Zi,$n,this.logger,this.performanceClient,this.correlationId)(s,this.config.system.networkClient,this.browserStorage,r,this.logger,this.correlationId,this.performanceClient);if(t&&!c.isAlias(t.environment))throw lt(at);return c}}async function da(e,t,n){e.addQueueMeasurement(gr,n);const r=pi(ha,pr,t,e,n)(e,t,n);return{verifier:r,challenge:await fi(ga,fr,t,e,n)(r,e,t,n)}}function ha(e,t,n){try{const r=new Uint8Array(32);pi(Do,vr,t,e,n)(r);return ko(r)}catch(Cs){throw Ao(Er)}}async function ga(e,t,n,r){t.addQueueMeasurement(fr,r);try{const o=await fi(Uo,mr,n,t,r)(e,t,r);return ko(new Uint8Array(o))}catch(Cs){throw Ao(Er)}}async function pa(e,t,n,r){n.addQueueMeasurement(In,e.correlationId);const o=e.authority||t.auth.authority,i=[...e&&e.scopes||[]],a=(0,f.A)((0,f.A)({},e),{},{correlationId:e.correlationId,authority:o,scopes:i});if(a.authenticationScheme){if(a.authenticationScheme===v.IO.SSH){if(!e.sshJwk)throw lt(et);if(!e.sshKid)throw lt(tt)}r.verbose('Authentication Scheme set to "'.concat(a.authenticationScheme,'" as configured in Auth request'))}else a.authenticationScheme=v.IO.BEARER,r.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return t.cache.claimsBasedCachingEnabled&&e.claims&&!ut.isEmptyObj(e.claims)&&(a.requestedClaimsHash=await Bo(e.claims)),a}async function fa(e,t,n,r,o){r.addQueueMeasurement(_n,e.correlationId);const i=await fi(pa,In,o,r,e.correlationId)(e,n,r,o);return(0,f.A)((0,f.A)((0,f.A)({},e),i),{},{account:t,forceRefresh:e.forceRefresh||!1})}class ma extends ua{async initializeAuthorizationCodeRequest(e){this.performanceClient.addQueueMeasurement(Dn,this.correlationId);const t=await fi(da,gr,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId),n=(0,f.A)((0,f.A)({},e),{},{redirectUri:e.redirectUri,code:v.YM.EMPTY_STRING,codeVerifier:t.verifier});return e.codeChallenge=t.challenge,e.codeChallengeMethod=v.YM.S256_CODE_CHALLENGE_METHOD,n}initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",null===e||void 0===e?void 0:e.correlationId);const t=(0,f.A)({correlationId:this.correlationId||qo()},e);if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const n=this.getLogoutHintFromIdTokenClaims(e.account);n&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=n)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return e&&null===e.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId):e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=kt.getAbsoluteUrl(e.postLogoutRedirectUri,jo())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=kt.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,jo())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=kt.getAbsoluteUrl(jo(),jo())),t}getLogoutHintFromIdTokenClaims(e){const t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(Ln,this.correlationId);const t=await fi(this.getClientConfiguration.bind(this),xn,this.logger,this.performanceClient,this.correlationId)(e);return new sa(t,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:t,requestAuthority:n,requestAzureCloudOptions:r,requestExtraQueryParameters:o,account:i}=e;this.performanceClient.addQueueMeasurement(xn,this.correlationId);const a=await fi(this.getDiscoveredAuthority.bind(this),dn,this.logger,this.performanceClient,this.correlationId)({requestAuthority:n,requestAzureCloudOptions:r,requestExtraQueryParameters:o,account:i}),s=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:s.loggerCallback,piiLoggingEnabled:s.piiLoggingEnabled,logLevel:s.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:Tr.Q1.MSAL_SKU,version:Zo,cpu:v.YM.EMPTY_STRING,os:v.YM.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,t){this.performanceClient.addQueueMeasurement(Un,this.correlationId);const n=this.getRedirectUri(e.redirectUri),r={interactionType:t},o=Ri.setRequestState(this.browserCrypto,e&&e.state||v.YM.EMPTY_STRING,r),i=await fi(pa,In,this.logger,this.performanceClient,this.correlationId)((0,f.A)((0,f.A)({},e),{},{correlationId:this.correlationId}),this.config,this.performanceClient,this.logger),a=(0,f.A)((0,f.A)({},i),{},{redirectUri:n,state:o,nonce:e.nonce||qo(),responseMode:this.config.auth.OIDCOptions.serverResponseType});if(e.loginHint||e.sid)return a;const s=e.account||this.browserStorage.getActiveAccount();if(s&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii("Setting validated request account: ".concat(s.homeAccountId),this.correlationId),a.account=s),!a.loginHint&&!s){const e=this.browserStorage.getLegacyLoginHint();e&&(a.loginHint=e)}return a}}function va(e){if(null==e)throw new TypeError("Cannot destructure "+e)}var ya=n(335);const Ca="user_switch",wa={[Ca]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class Ta extends T.lR{constructor(e,t,n){super(e,t),Object.setPrototypeOf(this,Ta.prototype),this.name="NativeAuthError",this.ext=n}}function ba(e){return!(!e.ext||!e.ext.status||"PERSISTENT_ERROR"!==e.ext.status&&"DISABLED"!==e.ext.status)||(!(!e.ext||!e.ext.error||-2147186943!==e.ext.error)||"ContentError"===e.errorCode)}function Aa(e,t,n){if(n&&n.status)switch(n.status){case"ACCOUNT_UNAVAILABLE":return ki(wi);case"USER_INTERACTION_REQUIRED":return new Ii(e,t);case"USER_CANCEL":return Ao(Ur);case"NO_NETWORK":return Ao(Zr)}return new Ta(e,wa[e]||t,n)}class Sa extends ea{constructor(e,t){super(e,t)}async acquireToken(e){var t,n;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(yn,e.correlationId);const r=we(),o=await fi(this.executeTokenRequest.bind(this),vn,this.logger,this.performanceClient,e.correlationId)(e,this.authority),i=null===(n=o.headers)||void 0===n?void 0:n[v.OK.X_MS_REQUEST_ID],a=new oa(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return a.validateTokenResponse(o.body),fi(a.handleServerTokenResponse.bind(a),Wn,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,r,e,void 0,void 0,!0,e.forceCache,i)}async acquireTokenByRefreshToken(e){var t;if(!e)throw lt(Ve);if(null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(wn,e.correlationId),!e.account)throw pe(Y);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await fi(this.acquireTokenWithCachedRefreshToken.bind(this),Cn,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(Cs){const n=Cs instanceof Ii&&Cs.errorCode===Ci,r=Cs instanceof Fi&&Cs.errorCode===v.I.INVALID_GRANT_ERROR&&Cs.subError===v.I.CLIENT_MISMATCH_ERROR;if(n||r)return fi(this.acquireTokenWithCachedRefreshToken.bind(this),Cn,this.logger,this.performanceClient,e.correlationId)(e,!1);throw Cs}return fi(this.acquireTokenWithCachedRefreshToken.bind(this),Cn,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Cn,e.correlationId);const r=pi(this.cacheManager.getRefreshToken.bind(this.cacheManager),hr,this.logger,this.performanceClient,e.correlationId)(e.account,t,void 0,this.performanceClient,e.correlationId);if(!r)throw ki(Ci);if(r.expiresOn&&Te(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw ki(Ti);const o=(0,f.A)((0,f.A)({},e),{},{refreshToken:r.secret,authenticationScheme:e.authenticationScheme||v.IO.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Pi}});try{return await fi(this.acquireToken.bind(this),yn,this.logger,this.performanceClient,e.correlationId)(o)}catch(Cs){if(Cs instanceof Ii&&Cs.subError===bi){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const e=be(r);this.cacheManager.removeRefreshToken(e)}throw Cs}}async executeTokenRequest(e,t){var n,r;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(vn,e.correlationId);const o=this.createTokenQueryParameters(e),i=kt.appendQueryString(t.tokenEndpoint,o),a=await fi(this.createTokenRequestBody.bind(this),Tn,this.logger,this.performanceClient,e.correlationId)(e),s=this.createTokenRequestHeaders(e.ccsCredential),c={clientId:(null===(r=e.tokenBodyParameters)||void 0===r?void 0:r.clientId)||this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return fi(this.executePostToTokenEndpoint.bind(this),fn,this.logger,this.performanceClient,e.correlationId)(i,a,s,c,e.correlationId,fn)}async createTokenRequestBody(e){var t,n,r;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Tn,e.correlationId);const o=e.correlationId,i=new Ji(o,this.performanceClient);if(i.addClientId(e.embeddedClientId||(null===(n=e.tokenBodyParameters)||void 0===n?void 0:n[Ki])||this.config.authOptions.clientId),e.redirectUri&&i.addRedirectUri(e.redirectUri),i.addScopes(e.scopes,!0,null===(r=this.config.authOptions.authority.options.OIDCOptions)||void 0===r?void 0:r.defaultScopes),i.addGrantType(v.$x.REFRESH_TOKEN_GRANT),i.addClientInfo(),i.addLibraryInfo(this.config.libraryInfo),i.addApplicationTelemetry(this.config.telemetry.application),i.addThrottling(),this.serverTelemetryManager&&!Wt(this.config)&&i.addServerTelemetry(this.serverTelemetryManager),i.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&i.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const t=this.config.clientCredentials.clientAssertion;i.addClientAssertion(await aa(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),i.addClientAssertionType(t.assertionType)}if(e.authenticationScheme===v.IO.POP){const t=new na(this.cryptoUtils,this.performanceClient);let n;if(e.popKid)n=this.cryptoUtils.encodeKid(e.popKid);else{n=(await fi(t.generateCnf.bind(t),Yn,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}i.addPopToken(n)}else if(e.authenticationScheme===v.IO.SSH){if(!e.sshJwk)throw lt(et);i.addSshJwk(e.sshJwk)}if((!ut.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&i.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Pi:try{const t=gt(e.ccsCredential.credential);i.addCcsOid(t)}catch(Cs){this.logger.verbose("Could not parse home account ID for CCS Header: "+Cs)}break;case Oi:i.addCcsUpn(e.ccsCredential.credential)}return e.embeddedClientId&&i.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenBodyParameters&&i.addExtraQueryParameters(e.tokenBodyParameters),i.createQueryString()}}class Ea extends ea{constructor(e,t){super(e,t)}async acquireToken(e){try{var t;const[n,r]=await this.acquireCachedToken((0,f.A)((0,f.A)({},e),{},{scopes:null!==(t=e.scopes)&&void 0!==t&&t.length?e.scopes:[...v.aZ]}));if(r===v.Rv.PROACTIVELY_REFRESHED){this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");new Sa(this.config,this.performanceClient).acquireTokenByRefreshToken(e).catch(()=>{})}return n}catch(Cs){if(Cs instanceof ge&&Cs.errorCode===ee){return new Sa(this.config,this.performanceClient).acquireTokenByRefreshToken(e)}throw Cs}}async acquireCachedToken(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(An,e.correlationId);let n=v.Rv.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!ut.isEmptyObj(e.claims))throw this.setCacheOutcome(v.Rv.FORCE_REFRESH_OR_CLAIMS,e.correlationId),pe(ee);if(!e.account)throw pe(Y);const r=e.account.tenantId||function(e){var t;const n=null===(t=new kt(e).getUrlComponents().PathSegments.slice(-1)[0])||void 0===t?void 0:t.toLowerCase();switch(n){case v.v2.COMMON:case v.v2.ORGANIZATIONS:case v.v2.CONSUMERS:return;default:return n}}(e.authority),o=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,o,r,this.performanceClient,e.correlationId);if(!i)throw this.setCacheOutcome(v.Rv.NO_CACHED_ACCESS_TOKEN,e.correlationId),pe(ee);if(a=i.cachedAt,Number(a)>we()||Te(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(v.Rv.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),pe(ee);var a;i.refreshOn&&Te(i.refreshOn,0)&&(n=v.Rv.PROACTIVELY_REFRESHED);const s=e.authority||this.authority.getPreferredCache(),c={account:this.cacheManager.readAccountFromCache(e.account),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,o,r,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(n,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await fi(this.generateResultFromCacheRecord.bind(this),Sn,this.logger,this.performanceClient,e.correlationId)(c,e),n]}setCacheOutcome(e,t){var n,r;null===(n=this.serverTelemetryManager)||void 0===n||n.setCacheOutcome(e),null===(r=this.performanceClient)||void 0===r||r.addFields({cacheOutcome:e},t),e!==v.Rv.NOT_APPLICABLE&&this.logger.info("Token refresh is required due to cache outcome: ".concat(e))}async generateResultFromCacheRecord(e,t){var n;let r;if(null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Sn,t.correlationId),e.idToken&&(r=ye(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||0===t.maxAge){var o;const e=null===(o=r)||void 0===o?void 0:o.auth_time;if(!e)throw pe(L);Ce(e,t.maxAge)}return oa.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)}}class Ia extends ma{async acquireToken(e){this.performanceClient.addQueueMeasurement(an,e.correlationId);const t=this.initializeServerTelemetryManager(Tr.sA.acquireTokenSilent_silentFlow),n=await fi(this.getClientConfiguration.bind(this),xn,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),r=new Ea(n,this.performanceClient);this.logger.verbose("Silent auth client created");try{const t=(await fi(r.acquireCachedToken.bind(r),An,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),t}catch(o){throw o instanceof bo&&o.errorCode===oo&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),o}}logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(null===t||void 0===t?void 0:t.account)}}const _a=["prompt"],ka=["scopes"];class Ra extends ua{constructor(e,t,n,r,o,i,a,s,c,l,u,d){var h;super(e,t,n,r,o,i,s,c,d),this.apiId=a,this.accountId=l,this.nativeMessageHandler=c,this.nativeStorageManager=u,this.silentCacheClient=new Ia(e,this.nativeStorageManager,n,r,o,i,s,c,d),this.serverTelemetryManager=this.initializeServerTelemetryManager(this.apiId);const g=this.nativeMessageHandler.getExtensionId()===Tr.JD.PREFERRED_EXTENSION_ID?"chrome":null!==(h=this.nativeMessageHandler.getExtensionId())&&void 0!==h&&h.length?"unknown":void 0;this.skus=la.makeExtraSkuString({libraryName:Tr.Q1.MSAL_SKU,libraryVersion:Zo,extensionName:g,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters=(0,f.A)((0,f.A)({},e.extraParameters),{},{[Wi]:this.skus})}async acquireToken(e){this.performanceClient.addQueueMeasurement(gn,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const t=this.performanceClient.startMeasurement(gn,e.correlationId),n=we();try{const r=await this.initializeNativeRequest(e);try{const e=await this.acquireTokensFromCache(this.accountId,r);return t.end({success:!0,isNativeBroker:!1,fromCache:!0}),e}catch(Cs){this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const o=Object.assign({},(va(r),r)),i={method:Tr.Ct.GetToken,request:o},a=await this.nativeMessageHandler.sendMessage(i),s=this.validateNativeResponse(a);return await this.handleNativeResponse(s,r,n).then(e=>(t.end({success:!0,isNativeBroker:!0,requestId:e.requestId}),this.serverTelemetryManager.clearNativeBrokerErrorCode(),e)).catch(e=>{throw t.end({success:!1,errorCode:e.errorCode,subErrorCode:e.subError,isNativeBroker:!0}),e})}catch(Cs){throw Cs instanceof Ta&&this.serverTelemetryManager.setNativeBrokerErrorCode(Cs.errorCode),Cs}}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:dt.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}async acquireTokensFromCache(e,t){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),pe(Q);const n=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!n)throw pe(Q);try{const e=this.createSilentCacheRequest(t,n),r=await this.silentCacheClient.acquireToken(e),o=(0,f.A)((0,f.A)({},n),{},{idTokenClaims:null===r||void 0===r?void 0:r.idTokenClaims,idToken:null===r||void 0===r?void 0:r.idToken});return(0,f.A)((0,f.A)({},r),{},{account:o})}catch(Cs){throw Cs}}async acquireTokenRedirect(e,t){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const n=Object.assign({},(va(e),e));delete n.onRedirectNavigate;const r=await this.initializeNativeRequest(n),o={method:Tr.Ct.GetToken,request:r};try{const e=await this.nativeMessageHandler.sendMessage(o);this.validateNativeResponse(e)}catch(Cs){if(Cs instanceof Ta&&(this.serverTelemetryManager.setNativeBrokerErrorCode(Cs.errorCode),ba(Cs)))throw Cs}this.browserStorage.setTemporaryCache(Tr._p.NATIVE_REQUEST,JSON.stringify(r),!0);const i={apiId:Tr.sA.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),await this.navigationClient.navigateExternal(a,i)}async handleRedirectPromise(e,t){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const n=this.browserStorage.getCachedNativeRequest();if(!n)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&(null===e||void 0===e||e.addFields({errorCode:"no_cached_request"},t)),null;const{prompt:r}=n,o=(0,pt.A)(n,_a);r&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Tr._p.NATIVE_REQUEST));const i={method:Tr.Ct.GetToken,request:o},a=we();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const e=await this.nativeMessageHandler.sendMessage(i);this.validateNativeResponse(e);const t=this.handleNativeResponse(e,o,a);this.browserStorage.setInteractionInProgress(!1);const n=await t;return this.serverTelemetryManager.clearNativeBrokerErrorCode(),n}catch(Cs){throw this.browserStorage.setInteractionInProgress(!1),Cs}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,t,n){var r;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const o=ye(e.id_token,ci),i=this.createHomeAccountIdentifier(e,o);if(i!==(null===(r=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId}))||void 0===r?void 0:r.homeAccountId)&&e.account.id!==t.accountId)throw Aa(Ca);const a=await this.getDiscoveredAuthority({requestAuthority:t.authority}),s=ia(this.browserStorage,a,i,ci,o,e.client_info,void 0,o.tid,void 0,e.account.id,this.logger),c=await this.generateAuthenticationResult(e,t,o,s,a.canonicalAuthority,n);return this.cacheAccount(s),this.cacheNativeTokens(e,t,i,o,e.access_token,c.tenantId,n),c}createHomeAccountIdentifier(e,t){return Et.generateHomeAccountId(e.client_info||v.YM.EMPTY_STRING,wt,this.logger,this.browserCrypto,t)}generateScopes(e,t){return e.scope?dt.fromString(e.scope):dt.fromString(t.scope)}async generatePopAccessToken(e,t){if(t.tokenType===v.IO.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const n=new na(this.browserCrypto),r={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw pe(ae);return n.signPopToken(e.access_token,t.keyId,r)}return e.access_token}async generateAuthenticationResult(e,t,n,r,o,i){const a=this.addTelemetryFromNativeResponse(e),s=e.scope?dt.fromString(e.scope):dt.fromString(t.scope),c=e.account.properties||{},l=c.UID||n.oid||n.sub||v.YM.EMPTY_STRING,u=c.TenantId||n.tid||v.YM.EMPTY_STRING,d=Ct(r.getAccountInfo(),void 0,n,e.id_token);d.nativeAccountId!==e.account.id&&(d.nativeAccountId=e.account.id);const h=await this.generatePopAccessToken(e,t),g=t.tokenType===v.IO.POP?v.IO.POP:v.IO.BEARER;return{authority:o,uniqueId:l,tenantId:u,scopes:s.asArray(),account:d,idToken:e.id_token,idTokenClaims:n,accessToken:h,fromCache:!!a&&this.isResponseFromCache(a),expiresOn:new Date(1e3*Number(i+e.expires_in)),tokenType:g,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}cacheAccount(e){this.browserStorage.setAccount(e),this.browserStorage.removeAccountContext(e).catch(e=>{this.logger.error("Error occurred while removing account context from browser storage. ".concat(e))})}cacheNativeTokens(e,t,n,r,o,i,a){const s=Ae(n,t.authority,e.id_token||"",t.clientId,r.tid||""),c=a+(t.tokenType===v.IO.POP?v.YM.SHR_NONCE_VALIDITY:("string"===typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0),l=this.generateScopes(e,t),u={idToken:s,accessToken:Se(n,t.authority,o,t.clientId,r.tid||i,l.printScopes(),c,0,ci,void 0,t.tokenType,void 0,t.keyId)};this.nativeStorageManager.saveCacheRecord(u,t.storeInCache)}addTelemetryFromNativeResponse(e){const t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw(0,T.pz)(ya.W,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch(Cs){this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return"undefined"===typeof e.is_cached?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const t=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const n=new kt(t);n.validateAsUri();const{scopes:r}=e,o=(0,pt.A)(e,ka),i=new dt(r||[]);i.appendScopes(v.aZ);const a=(0,f.A)((0,f.A)({},o),{},{accountId:this.accountId,clientId:this.config.auth.clientId,authority:n.urlString,scope:i.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:(()=>{switch(this.apiId){case Tr.sA.ssoSilent:case Tr.sA.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),v._M.NONE}if(e.prompt)switch(e.prompt){case v._M.NONE:case v._M.CONSENT:case v._M.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace("initializeNativeRequest: prompt = ".concat(e.prompt," is not compatible with native flow")),Ao(fo)}else this.logger.trace("initializeNativeRequest: prompt was not provided")})(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:(0,f.A)((0,f.A)({},e.extraQueryParameters),e.tokenQueryParameters),extendedExpiryToken:!1,keyId:e.popKid});if(a.signPopToken&&e.popKid)throw Ao(vo);if(this.handleExtraBrokerParams(a),a.extraParameters=a.extraParameters||{},a.extraParameters.telemetry=Tr.JD.MATS_TELEMETRY,e.authenticationScheme===v.IO.POP){const t={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},n=new na(this.browserCrypto);let r;if(a.keyId)r=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:a.keyId})),a.signPopToken=!1;else{const o=await fi(n.generateCnf.bind(n),Yn,this.logger,this.performanceClient,e.correlationId)(t,this.logger);r=o.reqCnfString,a.keyId=o.kid,a.signPopToken=!0}a.reqCnf=r}return this.addRequestSKUs(a),a}handleExtraBrokerParams(e){var t;const n=e.extraParameters&&e.extraParameters.hasOwnProperty(Qi)&&e.extraParameters.hasOwnProperty($i)&&e.extraParameters.hasOwnProperty(Ki);if(!e.embeddedClientId&&!n)return;let r="";const o=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[$i],r=e.extraParameters[Ki]),e.extraParameters={child_client_id:r,child_redirect_uri:o},null===(t=this.performanceClient)||void 0===t||t.addFields({embeddedClientId:r,embeddedRedirectUri:o},e.correlationId)}}class Pa{constructor(e,t,n,r){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=r,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=n,this.handshakeEvent=n.startMeasurement(lr)}async sendMessage(e){this.logger.trace("NativeMessageHandler - sendMessage called.");const t={channel:Tr.JD.CHANNEL_ID,extensionId:this.extensionId,responseId:qo(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii("NativeMessageHandler - Sending request to browser extension: ".concat(JSON.stringify(t))),this.messageChannel.port1.postMessage(t),new Promise((e,n)=>{this.resolvers.set(t.responseId,{resolve:e,reject:n})})}static async createProvider(e,t,n){e.trace("NativeMessageHandler - createProvider called.");try{const r=new Pa(e,t,n,Tr.JD.PREFERRED_EXTENSION_ID);return await r.sendHandshakeRequest(),r}catch(Cs){const o=new Pa(e,t,n);return await o.sendHandshakeRequest(),o}}async sendHandshakeRequest(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:Tr.JD.CHANNEL_ID,extensionId:this.extensionId,responseId:qo(),body:{method:Tr.Ct.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=e=>{this.onChannelMessage(e)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((t,n)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:n}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),n(Ao(uo)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;const t=e.data;if(t.channel&&t.channel===Tr.JD.CHANNEL_ID&&(!t.extensionId||t.extensionId===this.extensionId)&&t.body.method===Tr.Ct.HandshakeRequest){const e=this.handshakeResolvers.get(t.responseId);if(!e)return void this.logger.trace("NativeMessageHandler.onWindowMessage - resolver can't be found for request ".concat(t.responseId));this.logger.verbose(t.extensionId?"Extension with id: ".concat(t.extensionId," not installed"):"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),e.reject(Ao(ho))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const t=e.data,n=this.resolvers.get(t.responseId),r=this.handshakeResolvers.get(t.responseId);try{const e=t.body.method;if(e===Tr.Ct.Response){if(!n)return;const e=t.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii("NativeMessageHandler - Received response from browser extension: ".concat(JSON.stringify(e))),"Success"!==e.status)n.reject(Aa(e.code,e.description,e.ext));else{if(!e.result)throw(0,T.pz)(ya.W,"Event does not contain result.");e.result.code&&e.result.description?n.reject(Aa(e.result.code,e.result.description,e.result.ext)):n.resolve(e.result)}this.resolvers.delete(t.responseId)}else if(e===Tr.Ct.HandshakeResponse){if(!r)return void this.logger.trace("NativeMessageHandler.onChannelMessage - resolver can't be found for request ".concat(t.responseId));clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose("NativeMessageHandler - Received HandshakeResponse from extension: ".concat(this.extensionId)),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),r.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(o){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii("Error parsing response from WAM Extension: ".concat(o)),this.logger.errorPii("Unable to parse ".concat(e)),n?n.reject(o):r&&r.reject(o)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(e,t,n,r){if(t.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return t.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!n)return t.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(r)switch(r){case v.IO.BEARER:case v.IO.POP:return t.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return t.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}class Oa{constructor(e,t,n,r,o){this.authModule=e,this.browserStorage=t,this.authCodeRequest=n,this.logger=r,this.performanceClient=o}async handleCodeResponse(e,t){let n;this.performanceClient.addQueueMeasurement(Fn,t.correlationId);try{n=this.authModule.handleFragmentResponse(e,t.state)}catch(Cs){throw Cs instanceof Fi&&Cs.subError===Ur?Ao(Ur):Cs}return fi(this.handleCodeResponseFromServer.bind(this),qn,this.logger,this.performanceClient,t.correlationId)(n,t)}async handleCodeResponseFromServer(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.performanceClient.addQueueMeasurement(qn,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await fi(this.authModule.updateAuthority.bind(this.authModule),Bn,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId),n&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const e=this.createCcsCredentials(t);e&&(this.authCodeRequest.ccsCredential=e)}return await fi(this.authModule.acquireToken.bind(this.authModule),Kn,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:Pi}:e.loginHint?{credential:e.loginHint,type:Oi}:null}}function Na(e,t,n){const r=_t(e);if(!r)throw It(e)?(n.error("A ".concat(t," is present in the iframe but it does not contain known properties. It's likely that the ").concat(t," has been replaced by code running on the redirectUri page.")),n.errorPii("The ".concat(t," detected is: ").concat(e)),Ao(Pr)):(n.error("The request has returned to the redirectUri but a ".concat(t," is not present. It's likely that the ").concat(t," has been removed or the page has been redirected by code running on the redirectUri page.")),Ao(kr));return r}class Ma extends ma{constructor(e,t,n,r,o,i,a,s,c,l){super(e,t,n,r,o,i,a,c,l),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=s}acquireToken(e){try{var t;const n={popupName:this.generatePopupName(e.scopes||v.aZ,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:null!==(t=e.popupWindowParent)&&void 0!==t?t:window};return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,n)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),n.popup=this.openSizedPopup("about:blank",n),this.acquireTokenPopupAsync(e,n))}catch(Cs){return Promise.reject(Cs)}}logout(e){try{var t;this.logger.verbose("logoutPopup called");const n=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(n),popupWindowAttributes:(null===e||void 0===e?void 0:e.popupWindowAttributes)||{},popupWindowParent:null!==(t=null===e||void 0===e?void 0:e.popupWindowParent)&&void 0!==t?t:window},o=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(n,r,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(n,r,o,i))}catch(Cs){return Promise.reject(Cs)}}async acquireTokenPopupAsync(e,t){this.logger.verbose("acquireTokenPopupAsync called");const n=this.initializeServerTelemetryManager(Tr.sA.acquireTokenPopup),r=await fi(this.initializeAuthorizationRequest.bind(this),Un,this.logger,this.performanceClient,this.correlationId)(e,Tr.X8.Popup);Xo(r.authority);try{const o=await fi(this.initializeAuthorizationCodeRequest.bind(this),Dn,this.logger,this.performanceClient,this.correlationId)(r),i=await fi(this.createAuthCodeClient.bind(this),Ln,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:r.authority,requestAzureCloudOptions:r.azureCloudOptions,requestExtraQueryParameters:r.extraQueryParameters,account:r.account}),a=Pa.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);let s;a&&(s=this.performanceClient.startMeasurement(hn,e.correlationId));const c=await i.getAuthCodeUrl((0,f.A)((0,f.A)({},r),{},{nativeBroker:a})),l=new Oa(i,this.browserStorage,o,this.logger,this.performanceClient),u=this.initiateAuthRequest(c,t);this.eventHandler.emitEvent(Hi.B.POPUP_OPENED,Tr.X8.Popup,{popupWindow:u},null);const d=await this.monitorPopupForHash(u,t.popupWindowParent),h=pi(Na,Qn,this.logger,this.performanceClient,this.correlationId)(d,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(Bi.removeThrottle(this.browserStorage,this.config.auth.clientId,o),h.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),s&&s.end({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw Ao(go);const e=new Ra(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Tr.sA.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,h.accountId,this.nativeStorage,r.correlationId),{userRequestState:t}=Ri.parseRequestState(this.browserCrypto,r.state);return await e.acquireToken((0,f.A)((0,f.A)({},r),{},{state:t,prompt:void 0}))}return await l.handleCodeResponse(h,r)}catch(Cs){var o;throw null===(o=t.popup)||void 0===o||o.close(),Cs instanceof T.lR&&(Cs.setCorrelationId(this.correlationId),n.cacheFailedRequest(Cs)),Cs}}async logoutPopupAsync(e,t,n,r){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(Hi.B.LOGOUT_START,Tr.X8.Popup,e);const o=this.initializeServerTelemetryManager(Tr.sA.logoutPopup);try{await this.clearCacheOnLogout(e.account);const c=await fi(this.createAuthCodeClient.bind(this),Ln,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:n,account:e.account||void 0});try{c.authority.endSessionEndpoint}catch(l){var i;if(null!==(i=e.account)&&void 0!==i&&i.homeAccountId&&e.postLogoutRedirectUri&&c.authority.protocolMode===C){var a,s;if(this.browserStorage.removeAccount(null===(a=e.account)||void 0===a?void 0:a.homeAccountId),this.eventHandler.emitEvent(Hi.B.LOGOUT_SUCCESS,Tr.X8.Popup,e),r){const e={apiId:Tr.sA.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=kt.getAbsoluteUrl(r,jo());await this.navigationClient.navigateInternal(t,e)}return void(null===(s=t.popup)||void 0===s||s.close())}}const u=c.getLogoutUri(e);this.eventHandler.emitEvent(Hi.B.LOGOUT_SUCCESS,Tr.X8.Popup,e);const d=this.openPopup(u,t);if(this.eventHandler.emitEvent(Hi.B.POPUP_OPENED,Tr.X8.Popup,{popupWindow:d},null),await this.monitorPopupForHash(d,t.popupWindowParent).catch(()=>{}),r){const e={apiId:Tr.sA.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=kt.getAbsoluteUrl(r,jo());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii("Redirecting main window to: ".concat(t)),await this.navigationClient.navigateInternal(t,e)}else this.logger.verbose("No main window navigation requested")}catch(Cs){var c;throw null===(c=t.popup)||void 0===c||c.close(),Cs instanceof T.lR&&(Cs.setCorrelationId(this.correlationId),o.cacheFailedRequest(Cs)),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(Hi.B.LOGOUT_FAILURE,Tr.X8.Popup,null,Cs),this.eventHandler.emitEvent(Hi.B.LOGOUT_END,Tr.X8.Popup),Cs}this.eventHandler.emitEvent(Hi.B.LOGOUT_END,Tr.X8.Popup)}initiateAuthRequest(e,t){if(e)return this.logger.infoPii("Navigate to: ".concat(e)),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),Ao(_r)}monitorPopupForHash(e,t){return new Promise((t,n)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const r=setInterval(()=>{if(e.closed)return this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(r),void n(Ao(Ur));let o="";try{o=e.location.href}catch(Cs){}if(!o||"about:blank"===o)return;clearInterval(r);let i="";const a=this.config.auth.OIDCOptions.serverResponseType;e&&(i=a===v.zL.QUERY?e.location.search:e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),t(i)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let n;if(t.popup?(n=t.popup,this.logger.verbosePii("Navigating popup window to: ".concat(e)),n.location.assign(e)):"undefined"===typeof t.popup&&(this.logger.verbosePii("Opening popup window to: ".concat(e)),n=this.openSizedPopup(e,t)),!n)throw Ao(xr);return n.focus&&n.focus(),this.currentWindow=n,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),n}catch(Cs){throw this.logger.error("error opening popup "+Cs.message),this.browserStorage.setInteractionInProgress(!1),Ao(Lr)}}openSizedPopup(e,t){var n,r,o,i;let{popupName:a,popupWindowAttributes:s,popupWindowParent:c}=t;const l=c.screenLeft?c.screenLeft:c.screenX,u=c.screenTop?c.screenTop:c.screenY,d=c.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,h=c.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let g=null===(n=s.popupSize)||void 0===n?void 0:n.width,p=null===(r=s.popupSize)||void 0===r?void 0:r.height,f=null===(o=s.popupPosition)||void 0===o?void 0:o.top,m=null===(i=s.popupPosition)||void 0===i?void 0:i.left;return(!g||g<0||g>d)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),g=Tr.Q1.POPUP_WIDTH),(!p||p<0||p>h)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),p=Tr.Q1.POPUP_HEIGHT),(!f||f<0||f>h)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),f=Math.max(0,h/2-Tr.Q1.POPUP_HEIGHT/2+u)),(!m||m<0||m>d)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),m=Math.max(0,d/2-Tr.Q1.POPUP_WIDTH/2+l)),c.open(e,a,"width=".concat(g,", height=").concat(p,", top=").concat(f,", left=").concat(m,", scrollbars=yes"))}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(Tr.X8.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,t){return"".concat(Tr.Q1.POPUP_NAME_PREFIX,".").concat(this.config.auth.clientId,".").concat(e.join("-"),".").concat(t,".").concat(this.correlationId)}generateLogoutPopupName(e){const t=e.account&&e.account.homeAccountId;return"".concat(Tr.Q1.POPUP_NAME_PREFIX,".").concat(this.config.auth.clientId,".").concat(t,".").concat(this.correlationId)}}class La{constructor(e,t,n,r,o){this.authModule=e,this.browserStorage=t,this.authCodeRequest=n,this.logger=r,this.performanceClient=o}async initiateAuthRequest(e,t){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){t.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(Tr._p.ORIGIN_URI,t.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(Tr._p.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest),this.logger.infoPii("RedirectHandler.initiateAuthRequest: Navigate to: ".concat(e));const n={apiId:Tr.sA.acquireTokenRedirect,timeout:t.redirectTimeout,noHistory:!1};if("function"===typeof t.onRedirectNavigate){this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback");return!1!==t.onRedirectNavigate(e)?(this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),void await t.navigationClient.navigateExternal(e,n)):void this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation")}return this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),void await t.navigationClient.navigateExternal(e,n)}throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),Ao(_r)}async handleCodeResponse(e,t){this.logger.verbose("RedirectHandler.handleCodeResponse called"),this.browserStorage.setInteractionInProgress(!1);const n=this.browserStorage.generateStateKey(t),r=this.browserStorage.getTemporaryCache(n);if(!r)throw pe(N,"Cached State");let o;try{o=this.authModule.handleFragmentResponse(e,r)}catch(Cs){throw Cs instanceof Fi&&Cs.subError===Ur?Ao(Ur):Cs}const i=this.browserStorage.generateNonceKey(r),a=this.browserStorage.getTemporaryCache(i);if(this.authCodeRequest.code=o.code,o.cloud_instance_host_name&&await fi(this.authModule.updateAuthority.bind(this.authModule),Bn,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(o.cloud_instance_host_name,this.authCodeRequest.correlationId),o.nonce=a||void 0,o.state=r,o.client_info)this.authCodeRequest.clientInfo=o.client_info;else{const e=this.checkCcsCredentials();e&&(this.authCodeRequest.ccsCredential=e)}const s=await this.authModule.acquireToken(this.authCodeRequest,o);return this.browserStorage.cleanRequestByState(t),s}checkCcsCredentials(){const e=this.browserStorage.getTemporaryCache(Tr._p.CCS_CREDENTIAL,!0);if(e)try{return JSON.parse(e)}catch(Cs){this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii("Cache credential could not be parsed: ".concat(e))}return null}}class xa extends ma{constructor(e,t,n,r,o,i,a,s,c,l){super(e,t,n,r,o,i,a,c,l),this.nativeStorage=s}async acquireToken(e){const t=await fi(this.initializeAuthorizationRequest.bind(this),Un,this.logger,this.performanceClient,this.correlationId)(e,Tr.X8.Redirect);this.browserStorage.updateCacheEntries(t.state,t.nonce,t.authority,t.loginHint||"",t.account||null);const n=this.initializeServerTelemetryManager(Tr.sA.acquireTokenRedirect),r=e=>{e.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.cleanRequestByState(t.state),this.eventHandler.emitEvent(Hi.B.RESTORE_FROM_BFCACHE,Tr.X8.Redirect))};try{const o=await fi(this.initializeAuthorizationCodeRequest.bind(this),Dn,this.logger,this.performanceClient,this.correlationId)(t),i=await fi(this.createAuthCodeClient.bind(this),Ln,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),a=new La(i,this.browserStorage,o,this.logger,this.performanceClient),s=await i.getAuthCodeUrl((0,f.A)((0,f.A)({},t),{},{nativeBroker:Pa.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)})),c=this.getRedirectStartPage(e.redirectStartPage);return this.logger.verbosePii("Redirect start page: ".concat(c)),window.addEventListener("pageshow",r),await a.initiateAuthRequest(s,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:c,onRedirectNavigate:e.onRedirectNavigate||this.config.auth.onRedirectNavigate})}catch(Cs){throw Cs instanceof T.lR&&(Cs.setCorrelationId(this.correlationId),n.cacheFailedRequest(Cs)),window.removeEventListener("pageshow",r),this.browserStorage.cleanRequestByState(t.state),Cs}}async handleRedirectPromise(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;const n=this.initializeServerTelemetryManager(Tr.sA.handleRedirectPromise);try{if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const[r,o]=this.getRedirectResponse(e||"");if(!r)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(Tr.X8.Redirect),"back_forward"!==function(){if("undefined"===typeof window||"undefined"===typeof window.performance||"function"!==typeof window.performance.getEntriesByType)return;const e=window.performance.getEntriesByType("navigation"),t=e.length?e[0]:void 0;return null===t||void 0===t?void 0:t.type}()?t.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const i=this.browserStorage.getTemporaryCache(Tr._p.ORIGIN_URI,!0)||v.YM.EMPTY_STRING,a=kt.removeHashFromUrl(i);if(a===kt.removeHashFromUrl(window.location.href)&&this.config.auth.navigateToLoginRequestUrl){this.logger.verbose("Current page is loginRequestUrl, handling response"),i.indexOf("#")>-1&&function(e){const t=e.split("#");t.shift(),window.location.hash=t.length>0?t.join("#"):""}(i);return await this.handleResponse(r,n)}if(!this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(r,n);if(!Go()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Tr._p.URL_HASH,o,!0);const e={apiId:Tr.sA.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let t=!0;if(i&&"null"!==i)this.logger.verbose("Navigating to loginRequestUrl: ".concat(i)),t=await this.navigationClient.navigateInternal(i,e);else{const n=function(){const e=new kt(window.location.href).getUrlComponents();return"".concat(e.Protocol,"//").concat(e.HostNameAndPort,"/")}();this.browserStorage.setTemporaryCache(Tr._p.ORIGIN_URI,n,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),t=await this.navigationClient.navigateInternal(n,e)}if(!t)return await this.handleResponse(r,n)}return null}catch(Cs){throw Cs instanceof T.lR&&(Cs.setCorrelationId(this.correlationId),n.cacheFailedRequest(Cs)),this.browserStorage.cleanRequestByInteractionType(Tr.X8.Redirect),Cs}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(t=this.config.auth.OIDCOptions.serverResponseType===v.zL.QUERY?window.location.search:window.location.hash);let n=_t(t);if(n){try{!function(e,t,n){if(!e.state)throw Ao(Rr);const r=Li(t,e.state);if(!r)throw Ao(Or);if(r.interactionType!==n)throw Ao(Nr)}(n,this.browserCrypto,Tr.X8.Redirect)}catch(Cs){return Cs instanceof T.lR&&this.logger.error("Interaction type validation failed due to ".concat(Cs.errorCode,": ").concat(Cs.errorMessage)),[null,""]}return(r=window).location.hash="","function"===typeof r.history.replaceState&&r.history.replaceState(null,"","".concat(r.location.origin).concat(r.location.pathname).concat(r.location.search)),this.logger.verbose("Hash contains known properties, returning response hash"),[n,t]}var r;const o=this.browserStorage.getTemporaryCache(Tr._p.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Tr._p.URL_HASH)),o&&(n=_t(o),n)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[n,o]):[null,""]}async handleResponse(e,t){const n=e.state;if(!n)throw Ao(Rr);const r=this.browserStorage.getCachedRequest(n);if(this.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw Ao(go);const t=new Ra(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Tr.sA.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,e.accountId,this.nativeStorage,r.correlationId),{userRequestState:o}=Ri.parseRequestState(this.browserCrypto,n);return t.acquireToken((0,f.A)((0,f.A)({},r),{},{state:o,prompt:void 0})).finally(()=>{this.browserStorage.cleanRequestByState(n)})}const o=this.browserStorage.getCachedAuthority(n);if(!o)throw Ao(Wr);const i=await fi(this.createAuthCodeClient.bind(this),Ln,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:o});Bi.removeThrottle(this.browserStorage,this.config.auth.clientId,r);return new La(i,this.browserStorage,r,this.logger,this.performanceClient).handleCodeResponse(e,n)}async logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e),n=this.initializeServerTelemetryManager(Tr.sA.logout);try{this.eventHandler.emitEvent(Hi.B.LOGOUT_START,Tr.X8.Redirect,e),await this.clearCacheOnLogout(t.account);const a={apiId:Tr.sA.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},s=await fi(this.createAuthCodeClient.bind(this),Ln,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:e&&e.authority,requestExtraQueryParameters:null===e||void 0===e?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(s.authority.protocolMode===C)try{s.authority.endSessionEndpoint}catch(i){var r,o;if(null!==(r=t.account)&&void 0!==r&&r.homeAccountId)return this.browserStorage.removeAccount(null===(o=t.account)||void 0===o?void 0:o.homeAccountId),void this.eventHandler.emitEvent(Hi.B.LOGOUT_SUCCESS,Tr.X8.Redirect,t)}const c=s.getLogoutUri(t);if(this.eventHandler.emitEvent(Hi.B.LOGOUT_SUCCESS,Tr.X8.Redirect,t),!e||"function"!==typeof e.onRedirectNavigate)return this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),void await this.navigationClient.navigateExternal(c,a);if(!1!==e.onRedirectNavigate(c))return this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),void await this.navigationClient.navigateExternal(c,a);this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation")}catch(Cs){throw Cs instanceof T.lR&&(Cs.setCorrelationId(this.correlationId),n.cacheFailedRequest(Cs)),this.eventHandler.emitEvent(Hi.B.LOGOUT_FAILURE,Tr.X8.Redirect,null,Cs),this.eventHandler.emitEvent(Hi.B.LOGOUT_END,Tr.X8.Redirect),Cs}this.eventHandler.emitEvent(Hi.B.LOGOUT_END,Tr.X8.Redirect)}getRedirectStartPage(e){const t=e||window.location.href;return kt.getAbsoluteUrl(t,jo())}}async function Ua(e,t,n,r,o){if(t.addQueueMeasurement(Pn,r),!e)throw n.info("Navigate url is empty"),Ao(_r);return o?fi(Ha,Nn,n,t,r)(e,o,t,r):pi(qa,Mn,n,t,r)(e)}async function Da(e,t,n,r,o,i,a){return r.addQueueMeasurement(On,i),new Promise((r,i)=>{t<Jo&&o.warning("system.loadFrameTimeout or system.iframeHashTimeout set to lower (".concat(t,"ms) than the default (").concat(Jo,"ms). This may result in timeouts."));const s=window.setTimeout(()=>{window.clearInterval(c),i(Ao(Hr))},t),c=window.setInterval(()=>{let t="";const n=e.contentWindow;try{t=n?n.location.href:""}catch(Cs){}if(!t||"about:blank"===t)return;let o="";n&&(o=a===v.zL.QUERY?n.location.search:n.location.hash),window.clearTimeout(s),window.clearInterval(c),r(o)},n)}).finally(()=>{pi(Ba,ur,o,r,i)(e)})}function Ha(e,t,n,r){return n.addQueueMeasurement(Nn,r),new Promise((n,r)=>{const o=Fa();window.setTimeout(()=>{o?(o.src=e,n(o)):r("Unable to load iframe")},t)})}function qa(e){const t=Fa();return t.src=e,t}function Fa(){const e=document.createElement("iframe");return e.className="msalSilentIframe",e.style.visibility="hidden",e.style.position="absolute",e.style.width=e.style.height="0",e.style.border="0",e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(e),e}function Ba(e){document.body===e.parentNode&&document.body.removeChild(e)}class Ka extends ma{constructor(e,t,n,r,o,i,a,s,c,l,u){super(e,t,n,r,o,i,s,l,u),this.apiId=a,this.nativeStorage=c}async acquireToken(e){this.performanceClient.addQueueMeasurement(sn,e.correlationId),e.loginHint||e.sid||e.account&&e.account.username||this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const t=(0,f.A)({},e);t.prompt?t.prompt!==v._M.NONE&&t.prompt!==v._M.NO_SESSION&&(this.logger.warning("SilentIframeClient. Replacing invalid prompt ".concat(t.prompt," with ").concat(v._M.NONE)),t.prompt=v._M.NONE):t.prompt=v._M.NONE;const n=await fi(this.initializeAuthorizationRequest.bind(this),Un,this.logger,this.performanceClient,e.correlationId)(t,Tr.X8.Silent);Xo(n.authority);const r=this.initializeServerTelemetryManager(this.apiId);let o;try{return o=await fi(this.createAuthCodeClient.bind(this),Ln,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),await fi(this.silentTokenHelper.bind(this),Rn,this.logger,this.performanceClient,e.correlationId)(o,n)}catch(Cs){if(Cs instanceof T.lR&&(Cs.setCorrelationId(this.correlationId),r.cacheFailedRequest(Cs)),!o||!(Cs instanceof T.lR)||Cs.errorCode!==Tr.Q1.INVALID_GRANT_ERROR)throw Cs;this.performanceClient.addFields({retryError:Cs.errorCode},this.correlationId);const i=await fi(this.initializeAuthorizationRequest.bind(this),Un,this.logger,this.performanceClient,e.correlationId)(t,Tr.X8.Silent);return await fi(this.silentTokenHelper.bind(this),Rn,this.logger,this.performanceClient,this.correlationId)(o,i)}}logout(){return Promise.reject(Ao(zr))}async silentTokenHelper(e,t){const n=t.correlationId;this.performanceClient.addQueueMeasurement(Rn,n);const r=await fi(this.initializeAuthorizationCodeRequest.bind(this),Dn,this.logger,this.performanceClient,n)(t),o=await fi(e.getAuthCodeUrl.bind(e),Hn,this.logger,this.performanceClient,n)((0,f.A)((0,f.A)({},t),{},{nativeBroker:Pa.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,t.authenticationScheme)})),i=new Oa(e,this.browserStorage,r,this.logger,this.performanceClient),a=await fi(Ua,Pn,this.logger,this.performanceClient,n)(o,this.performanceClient,this.logger,n,this.config.system.navigateFrameWait),s=this.config.auth.OIDCOptions.serverResponseType,c=await fi(Da,On,this.logger,this.performanceClient,n)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,n,s),l=pi(Na,Qn,this.logger,this.performanceClient,this.correlationId)(c,s,this.logger);if(l.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw Ao(go);const e=new Ra(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,l.accountId,this.browserStorage,n),{userRequestState:r}=Ri.parseRequestState(this.browserCrypto,t.state);return fi(e.acquireToken.bind(e),gn,this.logger,this.performanceClient,n)((0,f.A)((0,f.A)({},t),{},{state:r,prompt:t.prompt||v._M.NONE}))}return fi(i.handleCodeResponse.bind(i),Fn,this.logger,this.performanceClient,n)(l,t)}}class za extends ma{async acquireToken(e){this.performanceClient.addQueueMeasurement(ln,e.correlationId);const t=await fi(pa,In,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),n=(0,f.A)((0,f.A)({},e),t);e.redirectUri&&(n.redirectUri=this.getRedirectUri(e.redirectUri));const r=this.initializeServerTelemetryManager(Tr.sA.acquireTokenSilent_silentFlow),o=await this.createRefreshTokenClient({serverTelemetryManager:r,authorityUrl:n.authority,azureCloudOptions:n.azureCloudOptions,account:n.account});return fi(o.acquireTokenByRefreshToken.bind(o),wn,this.logger,this.performanceClient,e.correlationId)(n).catch(e=>{throw e.setCorrelationId(this.correlationId),r.cacheFailedRequest(e),e})}logout(){return Promise.reject(Ao(zr))}async createRefreshTokenClient(e){const t=await fi(this.getClientConfiguration.bind(this),xn,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new Sa(t,this.performanceClient)}}class Ga{constructor(e,t,n,r){this.isBrowserEnvironment="undefined"!==typeof window,this.config=e,this.storage=t,this.logger=n,this.cryptoObj=r}loadExternalTokens(e,t,n){if(!this.isBrowserEnvironment)throw Ao(Xr);const r=t.id_token?ye(t.id_token,ci):void 0,o={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},i=e.authority?new vi(vi.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,o,this.logger,e.correlationId||qo()):void 0,a=this.loadAccount(e,n.clientInfo||t.client_info||"",r,i),s=this.loadIdToken(t,a.homeAccountId,a.environment,a.realm),c=this.loadAccessToken(e,t,a.homeAccountId,a.environment,a.realm,n),l=this.loadRefreshToken(t,a.homeAccountId,a.environment);return this.generateAuthenticationResult(e,{account:a,idToken:s,accessToken:c,refreshToken:l},r,i)}loadAccount(e,t,n,r){if(this.logger.verbose("TokenCache - loading account"),e.account){const t=Et.createFromAccountInfo(e.account);return this.storage.setAccount(t),t}if(!r||!t&&!n)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),Ao(ro);const o=Et.generateHomeAccountId(t,r.authorityType,this.logger,this.cryptoObj,n),i=null===n||void 0===n?void 0:n.tid,a=ia(this.storage,r,o,ci,n,t,r.hostnameAndPort,i,void 0,void 0,this.logger);return this.storage.setAccount(a),a}loadIdToken(e,t,n,r){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const o=Ae(t,n,e.id_token,this.config.auth.clientId,r);return this.storage.setIdTokenCredential(o),o}loadAccessToken(e,t,n,r,o,i){if(!t.access_token)return this.logger.verbose("TokenCache - no access token found in response"),null;if(!t.expires_in)return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null;this.logger.verbose("TokenCache - loading access token");const a=t.scope?dt.fromString(t.scope):new dt(e.scopes),s=i.expiresOn||t.expires_in+(new Date).getTime()/1e3,c=i.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+(new Date).getTime()/1e3,l=Se(n,r,t.access_token,this.config.auth.clientId,o,a.printScopes(),s,c,ci);return this.storage.setAccessTokenCredential(l),l}loadRefreshToken(e,t,n){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const r=Ee(t,n,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return this.storage.setRefreshTokenCredential(r),r}generateAuthenticationResult(e,t,n,r){var o,i,a;let s,c="",l=[],u=null;null!==t&&void 0!==t&&t.accessToken&&(c=t.accessToken.secret,l=dt.fromString(t.accessToken.target).asArray(),u=new Date(1e3*Number(t.accessToken.expiresOn)),s=new Date(1e3*Number(t.accessToken.extendedExpiresOn)));const d=t.account;return{authority:r?r.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:l,account:d.getAccountInfo(),idToken:(null===(o=t.idToken)||void 0===o?void 0:o.secret)||"",idTokenClaims:n||{},accessToken:c,fromCache:!0,expiresOn:u,correlationId:e.correlationId||"",requestId:"",extExpiresOn:s,familyId:(null===(i=t.refreshToken)||void 0===i?void 0:i.familyId)||"",tokenType:(null===t||void 0===t||null===(a=t.accessToken)||void 0===a?void 0:a.tokenType)||"",state:e.state||"",cloudGraphHostName:d.cloudGraphHostName||"",msGraphHost:d.msGraphHost||"",fromNativeBroker:!1}}}class ja extends sa{constructor(e){super(e),this.includeRedirectUri=!1}}class Ya extends ma{constructor(e,t,n,r,o,i,a,s,c,l){super(e,t,n,r,o,i,s,c,l),this.apiId=a}async acquireToken(e){if(!e.code)throw Ao(io);const t=await fi(this.initializeAuthorizationRequest.bind(this),Un,this.logger,this.performanceClient,e.correlationId)(e,Tr.X8.Silent),n=this.initializeServerTelemetryManager(this.apiId);try{const r=(0,f.A)((0,f.A)({},t),{},{code:e.code}),o=await fi(this.getClientConfiguration.bind(this),xn,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:n,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),i=new ja(o);this.logger.verbose("Auth code client created");const a=new Oa(i,this.browserStorage,r,this.logger,this.performanceClient);return await fi(a.handleCodeResponseFromServer.bind(a),qn,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(Cs){throw Cs instanceof T.lR&&(Cs.setCorrelationId(this.correlationId),n.cacheFailedRequest(Cs)),Cs}}logout(){return Promise.reject(Ao(zr))}}function Va(e){const t=null===e||void 0===e?void 0:e.idTokenClaims;return null!==t&&void 0!==t&&t.tfp||null!==t&&void 0!==t&&t.acr?"B2C":null!==t&&void 0!==t&&t.tid?"9188040d-6c67-4c5b-b112-36a304b66dad"===(null===t||void 0===t?void 0:t.tid)?"MSA":"AAD":void 0}function Wa(e,t){try{Qo(e)}catch(Cs){throw t.end({success:!1},Cs),Cs}}class Qa{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new hi(this.logger,this.performanceClient):fe,this.eventHandler=new qi(this.logger),this.browserStorage=this.isBrowserEnvironment?new Di(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,function(e){const t=e.cloudDiscoveryMetadata;let n;if(t)try{n=JSON.parse(t)}catch(Cs){throw lt(Xe)}return{canonicalAuthority:e.authority?yi(e.authority):void 0,knownAuthorities:e.knownAuthorities,cloudDiscoveryMetadata:n}}(this.config.auth),this.performanceClient):((e,t)=>{const n={cacheLocation:Tr.Al.MemoryStorage,temporaryCacheLocation:Tr.Al.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new Di(e,n,fe,t)})(this.config.auth.clientId,this.logger);const t={cacheLocation:Tr.Al.MemoryStorage,temporaryCacheLocation:Tr.Al.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new Di(this.config.auth.clientId,t,this.browserCrypto,this.logger,void 0,this.performanceClient),this.tokenCache=new Ga(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this),this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}static async createController(e,t){const n=new Qa(e);return await n.initialize(t),n}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e){if(this.logger.trace("initialize called"),this.initialized)return void this.logger.info("initialize has already been called, exiting early.");if(!this.isBrowserEnvironment)return this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,void this.eventHandler.emitEvent(Hi.B.INITIALIZE_END);const t=(null===e||void 0===e?void 0:e.correlationId)||this.getRequestCorrelationId(),n=this.config.system.allowNativeBroker,r=this.performanceClient.startMeasurement(kn,t);if(this.eventHandler.emitEvent(Hi.B.INITIALIZE_START),n)try{this.nativeExtensionProvider=await Pa.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(Cs){this.logger.verbose(Cs)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),await fi(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),dr,this.logger,this.performanceClient,t)(this.performanceClient,t)),this.initialized=!0,this.eventHandler.emitEvent(Hi.B.INITIALIZE_END),r.end({allowNativeBroker:n,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),Wo(this.initialized),this.isBrowserEnvironment){const t=e||"";let n=this.redirectResponse.get(t);return"undefined"===typeof n?(n=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,n),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),n}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){const t=this.getAllAccounts(),n=this.browserStorage.getCachedNativeRequest(),r=n&&Pa.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e,o=r?null===n||void 0===n?void 0:n.correlationId:this.browserStorage.getTemporaryCache(Tr._p.CORRELATION_ID,!0)||"",i=this.performanceClient.startMeasurement(nn,o);let a;if(this.eventHandler.emitEvent(Hi.B.HANDLE_REDIRECT_START,Tr.X8.Redirect),r&&this.nativeExtensionProvider){this.logger.trace("handleRedirectPromise - acquiring token from native platform");const e=new Ra(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Tr.sA.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,n.accountId,this.nativeInternalStorage,n.correlationId);a=fi(e.handleRedirectPromise.bind(e),cr,this.logger,this.performanceClient,i.event.correlationId)(this.performanceClient,i.event.correlationId)}else{this.logger.trace("handleRedirectPromise - acquiring token from web flow");const t=this.createRedirectClient(o);a=fi(t.handleRedirectPromise.bind(t),sr,this.logger,this.performanceClient,i.event.correlationId)(e,i)}return a.then(e=>{if(e){t.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(Hi.B.LOGIN_SUCCESS,Tr.X8.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(Hi.B.ACQUIRE_TOKEN_SUCCESS,Tr.X8.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),i.end({success:!0,accountType:Va(e.account)})}else i.event.errorCode?i.end({success:!1}):i.discard();return this.eventHandler.emitEvent(Hi.B.HANDLE_REDIRECT_END,Tr.X8.Redirect),e}).catch(e=>{const n=e;throw t.length>0?this.eventHandler.emitEvent(Hi.B.ACQUIRE_TOKEN_FAILURE,Tr.X8.Redirect,null,n):this.eventHandler.emitEvent(Hi.B.LOGIN_FAILURE,Tr.X8.Redirect,null,n),this.eventHandler.emitEvent(Hi.B.HANDLE_REDIRECT_END,Tr.X8.Redirect),i.end({success:!1},n),e})}async acquireTokenRedirect(e){const t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);const n=this.performanceClient.startMeasurement(tn,t);n.add({accountType:Va(e.account),scenarioId:e.scenarioId});const r=e.onRedirectNavigate;if(r)e.onRedirectNavigate=e=>{const t="function"===typeof r?r(e):void 0;return!1!==t?n.end({success:!0}):n.discard(),t};else{const e=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=t=>{const r="function"===typeof e?e(t):void 0;return!1!==r?n.end({success:!0}):n.discard(),r}}const o=this.getAllAccounts().length>0;try{let r;if($o(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),o?this.eventHandler.emitEvent(Hi.B.ACQUIRE_TOKEN_START,Tr.X8.Redirect,e):this.eventHandler.emitEvent(Hi.B.LOGIN_START,Tr.X8.Redirect,e),this.nativeExtensionProvider&&this.canUseNative(e)){r=new Ra(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Tr.sA.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,n).catch(n=>{if(n instanceof Ta&&ba(n)){this.nativeExtensionProvider=void 0;return this.createRedirectClient(t).acquireToken(e)}if(n instanceof Ii){this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow");return this.createRedirectClient(t).acquireToken(e)}throw this.browserStorage.setInteractionInProgress(!1),n})}else{r=this.createRedirectClient(t).acquireToken(e)}return await r}catch(Cs){throw n.end({success:!1},Cs),o?this.eventHandler.emitEvent(Hi.B.ACQUIRE_TOKEN_FAILURE,Tr.X8.Redirect,null,Cs):this.eventHandler.emitEvent(Hi.B.LOGIN_FAILURE,Tr.X8.Redirect,null,Cs),Cs}}acquireTokenPopup(e){const t=this.getRequestCorrelationId(e),n=this.performanceClient.startMeasurement(en,t);n.add({scenarioId:e.scenarioId,accountType:Va(e.account)});try{this.logger.verbose("acquireTokenPopup called",t),Wa(this.initialized,n),this.browserStorage.setInteractionInProgress(!0)}catch(Cs){return Promise.reject(Cs)}const r=this.getAllAccounts();let o;if(r.length>0?this.eventHandler.emitEvent(Hi.B.ACQUIRE_TOKEN_START,Tr.X8.Popup,e):this.eventHandler.emitEvent(Hi.B.LOGIN_START,Tr.X8.Popup,e),this.canUseNative(e))o=this.acquireTokenNative((0,f.A)((0,f.A)({},e),{},{correlationId:t}),Tr.sA.acquireTokenPopup).then(e=>(this.browserStorage.setInteractionInProgress(!1),n.end({success:!0,isNativeBroker:!0,accountType:Va(e.account)}),e)).catch(n=>{if(n instanceof Ta&&ba(n)){this.nativeExtensionProvider=void 0;return this.createPopupClient(t).acquireToken(e)}if(n instanceof Ii){this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow");return this.createPopupClient(t).acquireToken(e)}throw this.browserStorage.setInteractionInProgress(!1),n});else{o=this.createPopupClient(t).acquireToken(e)}return o.then(e=>(r.length<this.getAllAccounts().length?this.eventHandler.emitEvent(Hi.B.LOGIN_SUCCESS,Tr.X8.Popup,e):this.eventHandler.emitEvent(Hi.B.ACQUIRE_TOKEN_SUCCESS,Tr.X8.Popup,e),n.end({success:!0,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:Va(e.account)}),e)).catch(e=>(r.length>0?this.eventHandler.emitEvent(Hi.B.ACQUIRE_TOKEN_FAILURE,Tr.X8.Popup,null,e):this.eventHandler.emitEvent(Hi.B.LOGIN_FAILURE,Tr.X8.Popup,null,e),n.end({success:!1},e),Promise.reject(e)))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var t,n;const r=this.getRequestCorrelationId(e),o=(0,f.A)((0,f.A)({},e),{},{prompt:e.prompt,correlationId:r});let i;if(this.ssoSilentMeasurement=this.performanceClient.startMeasurement(un,r),null===(t=this.ssoSilentMeasurement)||void 0===t||t.add({scenarioId:e.scenarioId,accountType:Va(e.account)}),Wa(this.initialized,this.ssoSilentMeasurement),null===(n=this.ssoSilentMeasurement)||void 0===n||n.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",r),this.eventHandler.emitEvent(Hi.B.SSO_SILENT_START,Tr.X8.Silent,o),this.canUseNative(o))i=this.acquireTokenNative(o,Tr.sA.ssoSilent).catch(e=>{if(e instanceof Ta&&ba(e)){this.nativeExtensionProvider=void 0;return this.createSilentIframeClient(o.correlationId).acquireToken(o)}throw e});else{i=this.createSilentIframeClient(o.correlationId).acquireToken(o)}return i.then(e=>{var t;return this.eventHandler.emitEvent(Hi.B.SSO_SILENT_SUCCESS,Tr.X8.Silent,e),null===(t=this.ssoSilentMeasurement)||void 0===t||t.end({success:!0,isNativeBroker:e.fromNativeBroker,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:Va(e.account)}),e}).catch(e=>{var t;throw this.eventHandler.emitEvent(Hi.B.SSO_SILENT_FAILURE,Tr.X8.Silent,null,e),null===(t=this.ssoSilentMeasurement)||void 0===t||t.end({success:!1},e),e}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);const n=this.performanceClient.startMeasurement($t,t);Wa(this.initialized,n),this.eventHandler.emitEvent(Hi.B.ACQUIRE_TOKEN_BY_CODE_START,Tr.X8.Silent,e),n.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw Ao(so);if(e.code){const r=e.code;let o=this.hybridAuthCodeResponses.get(r);return o?(this.logger.verbose("Existing acquireTokenByCode request found",t),n.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),o=this.acquireTokenByCodeAsync((0,f.A)((0,f.A)({},e),{},{correlationId:t})).then(e=>(this.eventHandler.emitEvent(Hi.B.ACQUIRE_TOKEN_BY_CODE_SUCCESS,Tr.X8.Silent,e),this.hybridAuthCodeResponses.delete(r),n.end({success:!0,isNativeBroker:e.fromNativeBroker,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:Va(e.account)}),e)).catch(e=>{throw this.hybridAuthCodeResponses.delete(r),this.eventHandler.emitEvent(Hi.B.ACQUIRE_TOKEN_BY_CODE_FAILURE,Tr.X8.Silent,null,e),n.end({success:!1},e),e}),this.hybridAuthCodeResponses.set(r,o)),await o}if(e.nativeAccountId){if(this.canUseNative(e,e.nativeAccountId)){const r=await this.acquireTokenNative((0,f.A)((0,f.A)({},e),{},{correlationId:t}),Tr.sA.acquireTokenByCode,e.nativeAccountId).catch(e=>{throw e instanceof Ta&&ba(e)&&(this.nativeExtensionProvider=void 0),e});return n.end({accountType:Va(r.account),success:!0}),r}throw Ao(lo)}throw Ao(ao)}catch(Cs){throw this.eventHandler.emitEvent(Hi.B.ACQUIRE_TOKEN_BY_CODE_FAILURE,Tr.X8.Silent,null,Cs),n.end({success:!1},Cs),Cs}}async acquireTokenByCodeAsync(e){var t;this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(ar,e.correlationId),null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement);const n=this.createSilentAuthCodeClient(e.correlationId);return await n.acquireToken(e).then(e=>{var t;return null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.end({success:!0,fromCache:e.fromCache,isNativeBroker:e.fromNativeBroker}),e}).catch(e=>{var t;throw null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.end({success:!1},e),e}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,t){switch(this.performanceClient.addQueueMeasurement(bn,e.correlationId),t){case Tr.nN.Default:case Tr.nN.AccessToken:case Tr.nN.AccessTokenAndRefreshToken:const t=this.createSilentCacheClient(e.correlationId);return fi(t.acquireToken.bind(t),an,this.logger,this.performanceClient,e.correlationId)(e);default:throw pe(ee)}}async acquireTokenByRefreshToken(e,t){switch(this.performanceClient.addQueueMeasurement(Xt,e.correlationId),t){case Tr.nN.Default:case Tr.nN.AccessTokenAndRefreshToken:case Tr.nN.RefreshToken:case Tr.nN.RefreshTokenAndNetwork:const t=this.createSilentRefreshClient(e.correlationId);return fi(t.acquireToken.bind(t),ln,this.logger,this.performanceClient,e.correlationId)(e);default:throw pe(ee)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(En,e.correlationId);const t=this.createSilentIframeClient(e.correlationId);return fi(t.acquireToken.bind(t),sn,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect((0,f.A)({correlationId:t},e))}async logoutRedirect(e){const t=this.getRequestCorrelationId(e);$o(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0);return this.createRedirectClient(t).logout(e)}logoutPopup(e){try{const t=this.getRequestCorrelationId(e);Qo(this.initialized),this.browserStorage.setInteractionInProgress(!0);return this.createPopupClient(t).logout(e)}catch(Cs){return Promise.reject(Cs)}}async clearCache(e){if(!this.isBrowserEnvironment)return void this.logger.info("in non-browser environment, returning early.");const t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)}getAllAccounts(e){return function(e,t,n,r){return e.verbose("getAllAccounts called"),n?t.getAllAccounts(r):[]}(this.logger,this.browserStorage,this.isBrowserEnvironment,e)}getAccount(e){return function(e,t,n){if(t.trace("getAccount called"),0===Object.keys(e).length)return t.warning("getAccount: No accountFilter provided"),null;const r=n.getAccountInfoFilteredBy(e);return r?(t.verbose("getAccount: Account matching provided filter found, returning"),r):(t.verbose("getAccount: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByUsername(e){return function(e,t,n){if(t.trace("getAccountByUsername called"),!e)return t.warning("getAccountByUsername: No username provided"),null;const r=n.getAccountInfoFilteredBy({username:e});return r?(t.verbose("getAccountByUsername: Account matching username found, returning"),t.verbosePii("getAccountByUsername: Returning signed-in accounts matching username: ".concat(e)),r):(t.verbose("getAccountByUsername: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByHomeId(e){return function(e,t,n){if(t.trace("getAccountByHomeId called"),!e)return t.warning("getAccountByHomeId: No homeAccountId provided"),null;const r=n.getAccountInfoFilteredBy({homeAccountId:e});return r?(t.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),t.verbosePii("getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ".concat(e)),r):(t.verbose("getAccountByHomeId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByLocalId(e){return function(e,t,n){if(t.trace("getAccountByLocalId called"),!e)return t.warning("getAccountByLocalId: No localAccountId provided"),null;const r=n.getAccountInfoFilteredBy({localAccountId:e});return r?(t.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),t.verbosePii("getAccountByLocalId: Returning signed-in accounts matching localAccountId: ".concat(e)),r):(t.verbose("getAccountByLocalId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}setActiveAccount(e){!function(e,t){t.setActiveAccount(e)}(e,this.browserStorage)}getActiveAccount(){return this.browserStorage.getActiveAccount()}async hydrateCache(e,t){this.logger.verbose("hydrateCache called");const n=Et.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return this.browserStorage.setAccount(n),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)}async acquireTokenNative(e,t,n){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw Ao(go);return new Ra(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.nativeExtensionProvider,n||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e)}canUseNative(e,t){if(this.logger.trace("canUseNative called"),!Pa.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case v._M.NONE:case v._M.CONSENT:case v._M.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace("canUseNative: prompt = ".concat(e.prompt," is not compatible with native flow, returning false")),!1}return!(!t&&!this.getNativeAccountId(e))||(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),!1)}getNativeAccountId(e){const t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new Ma(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new xa(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new Ka(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Tr.sA.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new Ia(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new za(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new Ya(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Tr.sA.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return Vo(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){"undefined"!==typeof window&&(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){"undefined"!==typeof window&&(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}handleAccountCacheChange(e){try{var t;null!==(t=e.key)&&void 0!==t&&t.includes(v.Gd.ACTIVE_ACCOUNT_FILTERS)&&this.eventHandler.emitEvent(Hi.B.ACTIVE_ACCOUNT_CHANGED);const n=e.newValue||e.oldValue;if(!n)return;const r=JSON.parse(n);if("object"!==typeof r||!Et.isAccountEntity(r))return;const o=Ht.toObject(new Et,r).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.eventHandler.emitEvent(Hi.B.ACCOUNT_ADDED,void 0,o)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.eventHandler.emitEvent(Hi.B.ACCOUNT_REMOVED,void 0,o))}catch(e){return}}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return null!==e&&void 0!==e&&e.correlationId?e.correlationId:this.isBrowserEnvironment?qo():v.YM.EMPTY_STRING}async loginRedirect(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect((0,f.A)({correlationId:t},e||Tr.uq))}loginPopup(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup((0,f.A)({correlationId:t},e||Tr.uq))}async acquireTokenSilent(e){const t=this.getRequestCorrelationId(e),n=this.performanceClient.startMeasurement(Jt,t);n.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),Wa(this.initialized,n),this.logger.verbose("acquireTokenSilent called",t);const r=e.account||this.getActiveAccount();if(!r)throw Ao(Gr);n.add({accountType:Va(r)});const o={clientId:this.config.auth.clientId,authority:e.authority||v.YM.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:r.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,shrOptions:e.shrOptions},i=JSON.stringify(o),a=this.activeSilentTokenRequests.get(i);if("undefined"===typeof a){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",t);const o=fi(this.acquireTokenSilentAsync.bind(this),Zt,this.logger,this.performanceClient,t)((0,f.A)((0,f.A)({},e),{},{correlationId:t}),r).then(t=>(this.activeSilentTokenRequests.delete(i),n.end({success:!0,fromCache:t.fromCache,isNativeBroker:t.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,accessTokenSize:t.accessToken.length,idTokenSize:t.idToken.length}),t)).catch(e=>{throw this.activeSilentTokenRequests.delete(i),n.end({success:!1},e),e});return this.activeSilentTokenRequests.set(i,o),(0,f.A)((0,f.A)({},await o),{},{state:e.state})}return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",t),n.discard(),(0,f.A)((0,f.A)({},await a),{},{state:e.state})}async acquireTokenSilentAsync(e,t){const n=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(Zt,e.correlationId),this.eventHandler.emitEvent(Hi.B.ACQUIRE_TOKEN_START,Tr.X8.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",n);const r=await fi(fa,_n,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),o=e.cacheLookupPolicy||Tr.nN.Default;return this.acquireTokenSilentNoIframe(r,o).catch(async e=>{const t=function(e,t){const n=!(e instanceof Ii&&e.subError!==bi),r=e.errorCode===Tr.Q1.INVALID_GRANT_ERROR||e.errorCode===ee,o=n&&r||e.errorCode===Ci||e.errorCode===Ti,i=Tr.JE.includes(t);return o&&i}(e,o);if(t){if(this.activeIframeRequest){if(o!==Tr.nN.Skip){const[t,n]=this.activeIframeRequest;this.logger.verbose("Iframe request is already in progress, awaiting resolution for request with correlationId: ".concat(n),r.correlationId);const i=this.performanceClient.startMeasurement(cn,r.correlationId);i.add({awaitIframeCorrelationId:n});const a=await t;if(i.end({success:a}),a)return this.logger.verbose("Parallel iframe request with correlationId: ".concat(n," succeeded. Retrying cache and/or RT redemption"),r.correlationId),this.acquireTokenSilentNoIframe(r,o);throw this.logger.info("Iframe request with correlationId: ".concat(n," failed. Interaction is required.")),e}return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",r.correlationId),fi(this.acquireTokenBySilentIframe.bind(this),En,this.logger,this.performanceClient,r.correlationId)(r)}{let e;return this.activeIframeRequest=[new Promise(t=>{e=t}),r.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",r.correlationId),fi(this.acquireTokenBySilentIframe.bind(this),En,this.logger,this.performanceClient,r.correlationId)(r).then(t=>(e(!0),t)).catch(t=>{throw e(!1),t}).finally(()=>{this.activeIframeRequest=void 0})}}throw e}).then(t=>(this.eventHandler.emitEvent(Hi.B.ACQUIRE_TOKEN_SUCCESS,Tr.X8.Silent,t),e.correlationId&&this.performanceClient.addFields({fromCache:t.fromCache,isNativeBroker:t.fromNativeBroker},e.correlationId),t)).catch(e=>{throw this.eventHandler.emitEvent(Hi.B.ACQUIRE_TOKEN_FAILURE,Tr.X8.Silent,null,e),e}).finally(()=>{document.removeEventListener("visibilitychange",n)})}async acquireTokenSilentNoIframe(e,t){return Pa.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,Tr.sA.acquireTokenSilent_silentFlow).catch(async e=>{if(e instanceof Ta&&ba(e))throw this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,pe(ee);throw e})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),fi(this.acquireTokenFromCache.bind(this),bn,this.logger,this.performanceClient,e.correlationId)(e,t).catch(n=>{if(t===Tr.nN.AccessToken)throw n;return this.eventHandler.emitEvent(Hi.B.ACQUIRE_TOKEN_NETWORK_START,Tr.X8.Silent,e),fi(this.acquireTokenByRefreshToken.bind(this),Xt,this.logger,this.performanceClient,e.correlationId)(e,t)}))}}class $a{static async createPublicClientApplication(e){const t=await async function(e,t){const n=new ti(e);return await n.initialize(),Qa.createController(n,t)}(e);return new $a(e,t)}constructor(e,t){this.controller=t||new Qa(new ti(e))}async initialize(e){return this.controller.initialize(e)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,t){return this.controller.hydrateCache(e,t)}clearCache(e){return this.controller.clearCache(e)}}var Xa=n(478),Ja=n(22),Za=n(261);const es=()=>{const e=(0,c.Zp)(),{instance:t}=(0,p.dk)(),{refreshAuth:o}=(0,Xa.As)(),[i,a]=(0,r.useState)(!0),[s,l]=(0,r.useState)(null),[u]=(0,r.useState)(()=>new Ja.A(t));return(0,r.useEffect)(()=>{(async()=>{try{const r=window.location.origin;console.log("\ud83d\udd10 Processing multi-domain authentication callback"),console.log("\ud83c\udf10 Current domain:",r);const{isValidProductionDomain:i}=n(872);if(!i(r)&&!r.includes("localhost"))throw new Error("Authentication not supported on domain: ".concat(r));console.log("\u2705 Valid production domain confirmed:",r);const s=await u.handleRedirectCallback();if(!s.success)throw new Error(s.error||"Multi-domain authentication callback failed");s.account?(console.log("\u2705 AuthCallback: Account processed successfully"),console.log("\ud83d\udc64 Account:",s.account.username)):s.noResult&&console.log("\u2139\ufe0f AuthCallback: No redirect result found"),console.log("\u2705 Callback processed successfully"),await o(),console.log("\u2705 AuthCallback: Auth state refreshed"),await new Promise(e=>setTimeout(e,1e3));const c=t.getAllAccounts(),l=t.getActiveAccount();if(0===c.length||!l)throw new Error("Authentication completed but no valid account found");console.log("\u2705 Multi-domain authentication successful"),console.log("\ud83d\udc64 Authenticated user:",l.username),console.log("\ud83d\udd04 Redirecting to /guidance"),a(!1),setTimeout(()=>{e("/guidance",{replace:!0})},800)}catch(s){console.error("\u274c Multi-domain authentication callback failed:",s);const n=s instanceof Error?s.message:"An unexpected error occurred";l(n),a(!1),setTimeout(()=>{const t=new URLSearchParams({auth_error:"multi_domain_callback_failed",message:n,domain:window.location.origin});console.log("\ud83d\udd04 AuthCallback: Redirecting to home with error context"),e("/?".concat(t.toString()),{replace:!0})},3e3)}})()},[e,u,o,t]),(0,Za.jsxs)("div",{className:"vimarsh-auth-callback",children:[(0,Za.jsx)("div",{className:"callback-container",children:(0,Za.jsx)("div",{className:"callback-content",children:i?(0,Za.jsxs)("div",{className:"spiritual-loader",children:[(0,Za.jsx)("div",{className:"om-symbol",children:"\ud83d\udd49\ufe0f"}),(0,Za.jsx)("h2",{children:"Connecting you to divine wisdom..."}),(0,Za.jsx)("p",{children:"Please wait while we complete your authentication."}),(0,Za.jsx)("div",{className:"loading-spinner"})]}):s?(0,Za.jsxs)("div",{className:"auth-error",children:[(0,Za.jsx)("div",{className:"error-symbol",children:"\u26a0\ufe0f"}),(0,Za.jsx)("h2",{children:"Authentication Issue"}),(0,Za.jsx)("p",{children:s}),(0,Za.jsx)("p",{children:"Redirecting you back to the home page..."})]}):(0,Za.jsxs)("div",{className:"auth-success",children:[(0,Za.jsx)("div",{className:"success-symbol",children:"\u2705"}),(0,Za.jsx)("h2",{children:"Authentication Successful"}),(0,Za.jsx)("p",{children:"Taking you to your spiritual guidance..."})]})})}),(0,Za.jsx)("style",{children:"\n        .vimarsh-auth-callback {\n          min-height: 100vh;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background: linear-gradient(135deg, var(--sacred-saffron, #ff9933) 0%, var(--krishna-blue, #1e3a8a) 100%);\n          font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n        }\n        \n        .callback-container {\n          text-align: center;\n          padding: 2rem;\n          max-width: 500px;\n          width: 100%;\n        }\n        \n        .callback-content {\n          background: rgba(255, 255, 255, 0.95);\n          padding: 3rem 2rem;\n          border-radius: 20px;\n          box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n          backdrop-filter: blur(10px);\n        }\n        \n        .spiritual-loader, .auth-error, .auth-success {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          gap: 1rem;\n        }\n        \n        .om-symbol, .error-symbol, .success-symbol {\n          font-size: 3rem;\n          margin-bottom: 0.5rem;\n          animation: pulse 2s infinite;\n        }\n        \n        .loading-spinner {\n          width: 40px;\n          height: 40px;\n          border: 3px solid #f3f3f3;\n          border-top: 3px solid var(--krishna-blue, #1e3a8a);\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n          margin-top: 1rem;\n        }\n        \n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n        \n        @keyframes pulse {\n          0%, 100% { transform: scale(1); opacity: 1; }\n          50% { transform: scale(1.1); opacity: 0.8; }\n        }\n        \n        .spiritual-loader {\n          color: var(--krishna-blue, #1e3a8a);\n        }\n        \n        .auth-error {\n          color: #dc2626;\n        }\n        \n        .auth-success {\n          color: #059669;\n        }\n        \n        h2 {\n          color: #374151;\n          margin: 0;\n          font-size: 1.5rem;\n          font-weight: 600;\n        }\n        \n        p {\n          color: #6b7280;\n          margin: 0;\n          line-height: 1.5;\n        }\n        \n        .auth-error h2 {\n          color: #dc2626;\n        }\n        \n        .auth-success h2 {\n          color: #059669;\n        }\n      "})]})},ts=e=>{let{children:t,requireAdmin:n=!1}=e;const{isAuthenticated:r,isLoading:o,account:i}=(0,Xa.As)(),a=(0,c.zy)();if(o)return(0,Za.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",fontSize:"16px"},children:(0,Za.jsx)("div",{children:"\ud83d\udd49\ufe0f Loading..."})});if(!r)return(0,Za.jsx)(c.C5,{to:"/",state:{from:a},replace:!0});if(n){const e=(null===i||void 0===i?void 0:i.username)||(null===i||void 0===i?void 0:i.name)||"";if(!(e.includes("admin")||e.includes("vedprakash@outlook.com")))return(0,Za.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",fontSize:"16px",textAlign:"center",padding:"20px"},children:[(0,Za.jsx)("h2",{children:"Access Denied"}),(0,Za.jsx)("p",{children:"You need administrator privileges to access this page."}),(0,Za.jsx)("button",{onClick:()=>window.history.back(),style:{marginTop:"20px",padding:"10px 20px",background:"#FF6B35",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Go Back"})]})}return(0,Za.jsx)(Za.Fragment,{children:t})};var ns=n(144);const rs=()=>{const{selectedPersonality:e}=(0,ns.EB)();return(0,r.useEffect)(()=>{if(document.body.classList.remove("spiritual-theme","scientific-theme","historical-theme","philosophical-theme"),e){const t=function(e,t){switch(e.toLowerCase()){case"scientific":return"scientific-theme";case"historical":return"historical-theme";case"philosophical":return"philosophical-theme";default:return t.toLowerCase().includes("rumi")?"philosophical-theme":"spiritual-theme"}}(e.domain,e.name);document.body.classList.add(t)}else document.body.classList.add("spiritual-theme")},[e]),null};const os={English:{code:"en",name:"English",nativeName:"English",flag:"\ud83c\uddfa\ud83c\uddf8",direction:"ltr",voiceCode:"en-US",scriptureLanguage:"English",culturalGreeting:"Namaste"},Hindi:{code:"hi",name:"Hindi",nativeName:"\u0939\u093f\u0928\u094d\u0926\u0940",flag:"\ud83c\uddee\ud83c\uddf3",direction:"ltr",voiceCode:"hi-IN",scriptureLanguage:"Sanskrit-Hindi",culturalGreeting:"\u0928\u092e\u0938\u094d\u0924\u0947"}},is={English:{signIn:"Sign In",signOut:"Sign Out",greeting:"Namaste",welcome:"Welcome to Vimarsh",welcomeMessage:"Connect with the divine wisdom of ancient scriptures. Please sign in to begin your spiritual journey.",spiritualGuidance:"Spiritual Guidance",voiceInput:"Voice Input",textInput:"Text Input",send:"Send",clear:"Clear",listening:"Listening...",processing:"Processing your question...",startListening:"Start Voice Input",stopListening:"Stop Listening",playResponse:"Play Response",pauseResponse:"Pause Response",voiceNotSupported:"Voice recognition not supported in this browser",askQuestion:"Ask your spiritual question...",citations:"Sources",relatedVerses:"Related Verses",moreFromThisSource:"More from this source",bhagavadGita:"Bhagavad Gita",mahabharata:"Mahabharata",srimadBhagavatam:"Srimad Bhagavatam",chapter:"Chapter",verse:"Verse",conversationHistory:"Conversation History",searchHistory:"Search History",exportChat:"Export Conversation",clearHistory:"Clear History",newConversation:"New Conversation",new:"New",searchConversations:"Search conversations...",sessions:"sessions",messages:"messages",exportTxt:"Export Text",exportJson:"Export JSON",exporting:"Exporting",noSearchResults:"No conversations found",tryDifferentSearch:"Try a different search term",noConversations:"No conversations yet",startFirstConversation:"Start your first spiritual conversation",exportSession:"Export this conversation",deleteSession:"Delete conversation",confirmDelete:"Confirm Delete",deleteSessionWarning:"This conversation will be permanently deleted. This action cannot be undone.",cancel:"Cancel",delete:"Delete",today:"Today",yesterday:"Yesterday",daysAgo:"days ago",recentConversations:"Recent Conversations",conversationArchive:"Conversation Archive",advancedSearch:"Advanced Search",language:"Language",allLanguages:"All Languages",dateRange:"Date Range",allTime:"All Time",thisWeek:"This Week",thisMonth:"This Month",thisYear:"This Year",minimumMessages:"Minimum Messages",conversationsFound:"conversations found",selected:"selected",selectAll:"Select All",clearSelection:"Clear Selection",exportSelected:"Export Selected",matchingMessages:"matching messages",you:"You",lordKrishna:"Lord Krishna",moreMatches:"more matches",errorOccurred:"An error occurred. Please try again.",networkError:"Network connection issue. Please check your internet.",loadingWisdom:"Loading divine wisdom...",noInternet:"No internet connection detected.",guidedByWisdom:"Guided by ancient wisdom, powered by modern technology",karmaQuote:"You have the right to perform action, but not to the fruits of action",switchToHindi:"Switch to Hindi",switchToEnglish:"Switch to English",languageChanged:"Language changed to English",welcomeToVimarsh:"Welcome to Vimarsh",pleaseSignIn:"Please sign in to continue",hideHistory:"Hide conversation history",showHistory:"Show conversation history",hideArchive:"Hide conversation archive",showArchive:"Show conversation archive",startConversation:"Start your spiritual journey by asking a question",lordKrishnaIsTyping:"Lord Krishna is responding...",sending:"Sending...",skipToMainContent:"Skip to main content",spiritualGuidanceApp:"Spiritual Guidance Application",conversationControls:"Conversation controls",welcomeHeading:"Welcome section",conversationMessages:"Conversation messages",yourMessage:"Your message",lordKrishnaMessage:"Lord Krishna's message",lordKrishnaResponse:"Lord Krishna's response",notificationSettings:"Notification Settings",enableNotifications:"Enable Notifications",disableNotifications:"Disable Notifications",notificationsDescription:"Receive daily spiritual wisdom and meditation reminders",notificationPermissionDenied:"Notification permission was denied. Please enable in browser settings.",notificationError:"Failed to enable notifications. Please try again.",notificationsNotSupported:"Notifications Not Supported",notificationsSupportDescription:"Your browser doesn't support push notifications.",enabled:"Enabled",disabled:"Disabled",enable:"Enable",enabling:"Enabling...",close:"Close",notificationTypes:"Notification Types",dailyWisdom:"Daily Wisdom",meditationReminders:"Meditation Reminders",spiritualQuotes:"Spiritual Quotes",teachings:"Teachings",timingSettings:"Timing Settings",preferredTime:"Preferred Time",frequency:"Frequency",daily:"Daily",everyOtherDay:"Every Other Day",weekly:"Weekly",notificationLanguage:"Notification Language",english:"English",hindi:"Hindi",testNotification:"Test Notification",testNotificationDescription:"Send a test notification to verify settings",sendTest:"Send Test",testNotificationFailed:"Failed to send test notification"},Hindi:{signIn:"\u0938\u093e\u0907\u0928 \u0907\u0928 \u0915\u0930\u0947\u0902",signOut:"\u0938\u093e\u0907\u0928 \u0906\u0909\u091f",greeting:"\u0928\u092e\u0938\u094d\u0924\u0947",welcome:"\u0935\u093f\u092e\u0930\u094d\u0936 \u092e\u0947\u0902 \u0906\u092a\u0915\u093e \u0938\u094d\u0935\u093e\u0917\u0924 \u0939\u0948",welcomeMessage:"\u092a\u094d\u0930\u093e\u091a\u0940\u0928 \u0936\u093e\u0938\u094d\u0924\u094d\u0930\u094b\u0902 \u0915\u0940 \u0926\u093f\u0935\u094d\u092f \u092c\u0941\u0926\u094d\u0927\u093f \u0938\u0947 \u091c\u0941\u0921\u093c\u0947\u0902\u0964 \u0905\u092a\u0928\u0940 \u0906\u0927\u094d\u092f\u093e\u0924\u094d\u092e\u093f\u0915 \u092f\u093e\u0924\u094d\u0930\u093e \u0936\u0941\u0930\u0942 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0915\u0943\u092a\u092f\u093e \u0938\u093e\u0907\u0928 \u0907\u0928 \u0915\u0930\u0947\u0902\u0964",spiritualGuidance:"\u0906\u0927\u094d\u092f\u093e\u0924\u094d\u092e\u093f\u0915 \u092e\u093e\u0930\u094d\u0917\u0926\u0930\u094d\u0936\u0928",voiceInput:"\u0906\u0935\u093e\u091c\u093c \u0907\u0928\u092a\u0941\u091f",textInput:"\u091f\u0947\u0915\u094d\u0938\u094d\u091f \u0907\u0928\u092a\u0941\u091f",send:"\u092d\u0947\u091c\u0947\u0902",clear:"\u0938\u093e\u092b\u093c \u0915\u0930\u0947\u0902",listening:"\u0938\u0941\u0928 \u0930\u0939\u0947 \u0939\u0948\u0902...",processing:"\u0906\u092a\u0915\u0947 \u092a\u094d\u0930\u0936\u094d\u0928 \u092a\u0930 \u0935\u093f\u091a\u093e\u0930 \u0915\u0930 \u0930\u0939\u0947 \u0939\u0948\u0902...",welcomeToVimarsh:"\u0935\u093f\u092e\u0930\u094d\u0936 \u092e\u0947\u0902 \u0906\u092a\u0915\u093e \u0938\u094d\u0935\u093e\u0917\u0924 \u0939\u0948",pleaseSignIn:"\u091c\u093e\u0930\u0940 \u0930\u0916\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0915\u0943\u092a\u092f\u093e \u0938\u093e\u0907\u0928 \u0907\u0928 \u0915\u0930\u0947\u0902",hideHistory:"\u0935\u093e\u0930\u094d\u0924\u093e\u0932\u093e\u092a \u0907\u0924\u093f\u0939\u093e\u0938 \u091b\u0941\u092a\u093e\u090f\u0902",showHistory:"\u0935\u093e\u0930\u094d\u0924\u093e\u0932\u093e\u092a \u0907\u0924\u093f\u0939\u093e\u0938 \u0926\u093f\u0916\u093e\u090f\u0902",hideArchive:"\u0935\u093e\u0930\u094d\u0924\u093e\u0932\u093e\u092a \u0938\u0902\u0917\u094d\u0930\u0939 \u091b\u0941\u092a\u093e\u090f\u0902",showArchive:"\u0935\u093e\u0930\u094d\u0924\u093e\u0932\u093e\u092a \u0938\u0902\u0917\u094d\u0930\u0939 \u0926\u093f\u0916\u093e\u090f\u0902",startConversation:"\u092a\u094d\u0930\u0936\u094d\u0928 \u092a\u0942\u091b\u0915\u0930 \u0905\u092a\u0928\u0940 \u0906\u0927\u094d\u092f\u093e\u0924\u094d\u092e\u093f\u0915 \u092f\u093e\u0924\u094d\u0930\u093e \u0936\u0941\u0930\u0942 \u0915\u0930\u0947\u0902",lordKrishnaIsTyping:"\u092d\u0917\u0935\u093e\u0928 \u0915\u0943\u0937\u094d\u0923 \u0909\u0924\u094d\u0924\u0930 \u0926\u0947 \u0930\u0939\u0947 \u0939\u0948\u0902...",sending:"\u092d\u0947\u091c \u0930\u0939\u0947 \u0939\u0948\u0902...",skipToMainContent:"\u092e\u0941\u0916\u094d\u092f \u0938\u093e\u092e\u0917\u094d\u0930\u0940 \u092a\u0930 \u091c\u093e\u090f\u0902",spiritualGuidanceApp:"\u0906\u0927\u094d\u092f\u093e\u0924\u094d\u092e\u093f\u0915 \u092e\u093e\u0930\u094d\u0917\u0926\u0930\u094d\u0936\u0928 \u0905\u0928\u0941\u092a\u094d\u0930\u092f\u094b\u0917",conversationControls:"\u0935\u093e\u0930\u094d\u0924\u093e\u0932\u093e\u092a \u0928\u093f\u092f\u0902\u0924\u094d\u0930\u0923",welcomeHeading:"\u0938\u094d\u0935\u093e\u0917\u0924 \u0905\u0928\u0941\u092d\u093e\u0917",conversationMessages:"\u0935\u093e\u0930\u094d\u0924\u093e\u0932\u093e\u092a \u0938\u0902\u0926\u0947\u0936",yourMessage:"\u0906\u092a\u0915\u093e \u0938\u0902\u0926\u0947\u0936",lordKrishnaMessage:"\u092d\u0917\u0935\u093e\u0928 \u0915\u0943\u0937\u094d\u0923 \u0915\u093e \u0938\u0902\u0926\u0947\u0936",lordKrishnaResponse:"\u092d\u0917\u0935\u093e\u0928 \u0915\u0943\u0937\u094d\u0923 \u0915\u093e \u0909\u0924\u094d\u0924\u0930",notificationSettings:"\u0938\u0942\u091a\u0928\u093e \u0938\u0947\u091f\u093f\u0902\u0917\u094d\u0938",enableNotifications:"\u0938\u0942\u091a\u0928\u093e\u090f\u0902 \u091a\u093e\u0932\u0942 \u0915\u0930\u0947\u0902",disableNotifications:"\u0938\u0942\u091a\u0928\u093e\u090f\u0902 \u092c\u0902\u0926 \u0915\u0930\u0947\u0902",notificationsDescription:"\u0926\u0948\u0928\u093f\u0915 \u0906\u0927\u094d\u092f\u093e\u0924\u094d\u092e\u093f\u0915 \u091c\u094d\u091e\u093e\u0928 \u0914\u0930 \u0927\u094d\u092f\u093e\u0928 \u0905\u0928\u0941\u0938\u094d\u092e\u093e\u0930\u0915 \u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u0915\u0930\u0947\u0902",notificationPermissionDenied:"\u0938\u0942\u091a\u0928\u093e \u0905\u0928\u0941\u092e\u0924\u093f \u0905\u0938\u094d\u0935\u0940\u0915\u093e\u0930 \u0915\u0930 \u0926\u0940 \u0917\u0908\u0964 \u0915\u0943\u092a\u092f\u093e \u092c\u094d\u0930\u093e\u0909\u091c\u093c\u0930 \u0938\u0947\u091f\u093f\u0902\u0917\u094d\u0938 \u092e\u0947\u0902 \u091a\u093e\u0932\u0942 \u0915\u0930\u0947\u0902\u0964",notificationError:"\u0938\u0942\u091a\u0928\u093e\u090f\u0902 \u091a\u093e\u0932\u0942 \u0915\u0930\u0928\u0947 \u092e\u0947\u0902 \u0935\u093f\u092b\u0932\u0964 \u0915\u0943\u092a\u092f\u093e \u092a\u0941\u0928\u0903 \u092a\u094d\u0930\u092f\u093e\u0938 \u0915\u0930\u0947\u0902\u0964",notificationsNotSupported:"\u0938\u0942\u091a\u0928\u093e\u090f\u0902 \u0938\u092e\u0930\u094d\u0925\u093f\u0924 \u0928\u0939\u0940\u0902",notificationsSupportDescription:"\u0906\u092a\u0915\u093e \u092c\u094d\u0930\u093e\u0909\u091c\u093c\u0930 \u092a\u0941\u0936 \u0938\u0942\u091a\u0928\u093e\u0913\u0902 \u0915\u093e \u0938\u092e\u0930\u094d\u0925\u0928 \u0928\u0939\u0940\u0902 \u0915\u0930\u0924\u093e\u0964",enabled:"\u091a\u093e\u0932\u0942",disabled:"\u092c\u0902\u0926",enable:"\u091a\u093e\u0932\u0942 \u0915\u0930\u0947\u0902",enabling:"\u091a\u093e\u0932\u0942 \u0915\u0930 \u0930\u0939\u0947 \u0939\u0948\u0902...",close:"\u092c\u0902\u0926 \u0915\u0930\u0947\u0902",notificationTypes:"\u0938\u0942\u091a\u0928\u093e \u092a\u094d\u0930\u0915\u093e\u0930",dailyWisdom:"\u0926\u0948\u0928\u093f\u0915 \u091c\u094d\u091e\u093e\u0928",meditationReminders:"\u0927\u094d\u092f\u093e\u0928 \u0905\u0928\u0941\u0938\u094d\u092e\u093e\u0930\u0915",spiritualQuotes:"\u0906\u0927\u094d\u092f\u093e\u0924\u094d\u092e\u093f\u0915 \u0909\u0926\u094d\u0927\u0930\u0923",teachings:"\u0936\u093f\u0915\u094d\u0937\u093e\u090f\u0902",timingSettings:"\u0938\u092e\u092f \u0938\u0947\u091f\u093f\u0902\u0917\u094d\u0938",preferredTime:"\u092a\u0938\u0902\u0926\u0940\u0926\u093e \u0938\u092e\u092f",frequency:"\u0906\u0935\u0943\u0924\u094d\u0924\u093f",daily:"\u0926\u0948\u0928\u093f\u0915",everyOtherDay:"\u0939\u0930 \u0926\u0942\u0938\u0930\u0947 \u0926\u093f\u0928",weekly:"\u0938\u093e\u092a\u094d\u0924\u093e\u0939\u093f\u0915",notificationLanguage:"\u0938\u0942\u091a\u0928\u093e \u092d\u093e\u0937\u093e",english:"\u0905\u0902\u0917\u094d\u0930\u0947\u091c\u0940",hindi:"\u0939\u093f\u0902\u0926\u0940",testNotification:"\u092a\u0930\u0940\u0915\u094d\u0937\u0923 \u0938\u0942\u091a\u0928\u093e",testNotificationDescription:"\u0938\u0947\u091f\u093f\u0902\u0917\u094d\u0938 \u0938\u0924\u094d\u092f\u093e\u092a\u093f\u0924 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u092a\u0930\u0940\u0915\u094d\u0937\u0923 \u0938\u0942\u091a\u0928\u093e \u092d\u0947\u091c\u0947\u0902",sendTest:"\u092a\u0930\u0940\u0915\u094d\u0937\u0923 \u092d\u0947\u091c\u0947\u0902",testNotificationFailed:"\u092a\u0930\u0940\u0915\u094d\u0937\u0923 \u0938\u0942\u091a\u0928\u093e \u092d\u0947\u091c\u0928\u0947 \u092e\u0947\u0902 \u0935\u093f\u092b\u0932",startListening:"\u0906\u0935\u093e\u091c\u093c \u0938\u0941\u0928\u0928\u093e \u0936\u0941\u0930\u0942 \u0915\u0930\u0947\u0902",stopListening:"\u0906\u0935\u093e\u091c\u093c \u0938\u0941\u0928\u0928\u093e \u092c\u0902\u0926 \u0915\u0930\u0947\u0902",playResponse:"\u0909\u0924\u094d\u0924\u0930 \u0938\u0941\u0928\u0947\u0902",pauseResponse:"\u0930\u094b\u0915\u0947\u0902",voiceNotSupported:"\u0907\u0938 \u092c\u094d\u0930\u093e\u0909\u091c\u093c\u0930 \u092e\u0947\u0902 \u0906\u0935\u093e\u091c\u093c \u092a\u0939\u091a\u093e\u0928 \u0938\u092e\u0930\u094d\u0925\u093f\u0924 \u0928\u0939\u0940\u0902 \u0939\u0948",askQuestion:"\u0905\u092a\u0928\u093e \u0906\u0927\u094d\u092f\u093e\u0924\u094d\u092e\u093f\u0915 \u092a\u094d\u0930\u0936\u094d\u0928 \u092a\u0942\u091b\u0947\u0902...",citations:"\u0938\u094d\u0930\u094b\u0924",relatedVerses:"\u0938\u0902\u092c\u0902\u0927\u093f\u0924 \u0936\u094d\u0932\u094b\u0915",moreFromThisSource:"\u0907\u0938 \u0938\u094d\u0930\u094b\u0924 \u0938\u0947 \u0914\u0930",bhagavadGita:"\u092d\u0917\u0935\u0926\u094d\u0917\u0940\u0924\u093e",mahabharata:"\u092e\u0939\u093e\u092d\u093e\u0930\u0924",srimadBhagavatam:"\u0936\u094d\u0930\u0940\u092e\u0926\u094d\u092d\u093e\u0917\u0935\u0924\u092e\u094d",chapter:"\u0905\u0927\u094d\u092f\u093e\u092f",verse:"\u0936\u094d\u0932\u094b\u0915",conversationHistory:"\u092c\u093e\u0924\u091a\u0940\u0924 \u0915\u093e \u0907\u0924\u093f\u0939\u093e\u0938",searchHistory:"\u0916\u094b\u091c \u0907\u0924\u093f\u0939\u093e\u0938",exportChat:"\u092c\u093e\u0924\u091a\u0940\u0924 \u0928\u093f\u0930\u094d\u092f\u093e\u0924 \u0915\u0930\u0947\u0902",clearHistory:"\u0907\u0924\u093f\u0939\u093e\u0938 \u0938\u093e\u092b\u093c \u0915\u0930\u0947\u0902",newConversation:"\u0928\u092f\u093e \u0935\u093e\u0930\u094d\u0924\u093e\u0932\u093e\u092a",new:"\u0928\u092f\u093e",searchConversations:"\u0935\u093e\u0930\u094d\u0924\u093e\u0932\u093e\u092a \u0916\u094b\u091c\u0947\u0902...",sessions:"\u0938\u0924\u094d\u0930",messages:"\u0938\u0902\u0926\u0947\u0936",exportTxt:"\u092a\u093e\u0920 \u0928\u093f\u0930\u094d\u092f\u093e\u0924 \u0915\u0930\u0947\u0902",exportJson:"JSON \u0928\u093f\u0930\u094d\u092f\u093e\u0924 \u0915\u0930\u0947\u0902",exporting:"\u0928\u093f\u0930\u094d\u092f\u093e\u0924 \u0915\u0930 \u0930\u0939\u0947 \u0939\u0948\u0902",noSearchResults:"\u0915\u094b\u0908 \u0935\u093e\u0930\u094d\u0924\u093e\u0932\u093e\u092a \u0928\u0939\u0940\u0902 \u092e\u093f\u0932\u093e",tryDifferentSearch:"\u0905\u0932\u0917 \u0916\u094b\u091c \u0936\u092c\u094d\u0926 \u0906\u091c\u093c\u092e\u093e\u090f\u0902",noConversations:"\u0905\u092d\u0940 \u0924\u0915 \u0915\u094b\u0908 \u0935\u093e\u0930\u094d\u0924\u093e\u0932\u093e\u092a \u0928\u0939\u0940\u0902",startFirstConversation:"\u0905\u092a\u0928\u093e \u092a\u0939\u0932\u093e \u0906\u0927\u094d\u092f\u093e\u0924\u094d\u092e\u093f\u0915 \u0935\u093e\u0930\u094d\u0924\u093e\u0932\u093e\u092a \u0936\u0941\u0930\u0942 \u0915\u0930\u0947\u0902",exportSession:"\u0907\u0938 \u0935\u093e\u0930\u094d\u0924\u093e\u0932\u093e\u092a \u0915\u094b \u0928\u093f\u0930\u094d\u092f\u093e\u0924 \u0915\u0930\u0947\u0902",deleteSession:"\u0935\u093e\u0930\u094d\u0924\u093e\u0932\u093e\u092a \u0939\u091f\u093e\u090f\u0902",confirmDelete:"\u0939\u091f\u093e\u0928\u0947 \u0915\u0940 \u092a\u0941\u0937\u094d\u091f\u093f \u0915\u0930\u0947\u0902",deleteSessionWarning:"\u092f\u0939 \u0935\u093e\u0930\u094d\u0924\u093e\u0932\u093e\u092a \u0938\u094d\u0925\u093e\u092f\u0940 \u0930\u0942\u092a \u0938\u0947 \u0939\u091f\u093e \u0926\u093f\u092f\u093e \u091c\u093e\u090f\u0917\u093e\u0964 \u092f\u0939 \u0915\u094d\u0930\u093f\u092f\u093e \u092a\u0942\u0930\u094d\u0935\u0935\u0924 \u0928\u0939\u0940\u0902 \u0915\u0940 \u091c\u093e \u0938\u0915\u0924\u0940\u0964",cancel:"\u0930\u0926\u094d\u0926 \u0915\u0930\u0947\u0902",delete:"\u0939\u091f\u093e\u090f\u0902",today:"\u0906\u091c",yesterday:"\u0915\u0932",daysAgo:"\u0926\u093f\u0928 \u092a\u0939\u0932\u0947",recentConversations:"\u0939\u093e\u0932 \u0915\u0940 \u092c\u093e\u0924\u091a\u0940\u0924",conversationArchive:"\u092c\u093e\u0924\u091a\u0940\u0924 \u0938\u0902\u0917\u094d\u0930\u0939",advancedSearch:"\u0909\u0928\u094d\u0928\u0924 \u0916\u094b\u091c",language:"\u092d\u093e\u0937\u093e",allLanguages:"\u0938\u092d\u0940 \u092d\u093e\u0937\u093e\u090f\u0901",dateRange:"\u0926\u093f\u0928\u093e\u0902\u0915 \u0938\u0940\u092e\u093e",allTime:"\u0938\u092d\u0940 \u0938\u092e\u092f",thisWeek:"\u0907\u0938 \u0938\u092a\u094d\u0924\u093e\u0939",thisMonth:"\u0907\u0938 \u092e\u0939\u0940\u0928\u0947",thisYear:"\u0907\u0938 \u0935\u0930\u094d\u0937",minimumMessages:"\u0928\u094d\u092f\u0942\u0928\u0924\u092e \u0938\u0902\u0926\u0947\u0936",conversationsFound:"\u092c\u093e\u0924\u091a\u0940\u0924 \u092e\u093f\u0932\u0940",selected:"\u091a\u0941\u0928\u093e \u0917\u092f\u093e",selectAll:"\u0938\u092d\u0940 \u091a\u0941\u0928\u0947\u0902",clearSelection:"\u091a\u092f\u0928 \u0938\u093e\u092b\u093c \u0915\u0930\u0947\u0902",exportSelected:"\u091a\u092f\u0928\u093f\u0924 \u0928\u093f\u0930\u094d\u092f\u093e\u0924 \u0915\u0930\u0947\u0902",matchingMessages:"\u092e\u0947\u0932 \u0916\u093e\u0924\u0947 \u0938\u0902\u0926\u0947\u0936",you:"\u0906\u092a",lordKrishna:"\u092d\u0917\u0935\u093e\u0928 \u0915\u0943\u0937\u094d\u0923",moreMatches:"\u0914\u0930 \u092e\u0948\u091a",errorOccurred:"\u090f\u0915 \u0924\u094d\u0930\u0941\u091f\u093f \u0939\u0941\u0908\u0964 \u0915\u0943\u092a\u092f\u093e \u092a\u0941\u0928\u0903 \u092a\u094d\u0930\u092f\u093e\u0938 \u0915\u0930\u0947\u0902\u0964",networkError:"\u0928\u0947\u091f\u0935\u0930\u094d\u0915 \u0915\u0928\u0947\u0915\u094d\u0936\u0928 \u0915\u0940 \u0938\u092e\u0938\u094d\u092f\u093e\u0964 \u0915\u0943\u092a\u092f\u093e \u0905\u092a\u0928\u093e \u0907\u0902\u091f\u0930\u0928\u0947\u091f \u091c\u093e\u0902\u091a\u0947\u0902\u0964",loadingWisdom:"\u0926\u093f\u0935\u094d\u092f \u091c\u094d\u091e\u093e\u0928 \u0932\u094b\u0921 \u0915\u0930 \u0930\u0939\u0947 \u0939\u0948\u0902...",noInternet:"\u0907\u0902\u091f\u0930\u0928\u0947\u091f \u0915\u0928\u0947\u0915\u094d\u0936\u0928 \u0928\u0939\u0940\u0902 \u092e\u093f\u0932\u093e\u0964",guidedByWisdom:"\u092a\u094d\u0930\u093e\u091a\u0940\u0928 \u091c\u094d\u091e\u093e\u0928 \u0926\u094d\u0935\u093e\u0930\u093e \u0928\u093f\u0930\u094d\u0926\u0947\u0936\u093f\u0924, \u0906\u0927\u0941\u0928\u093f\u0915 \u0924\u0915\u0928\u0940\u0915 \u0926\u094d\u0935\u093e\u0930\u093e \u0938\u0902\u091a\u093e\u0932\u093f\u0924",karmaQuote:"\u0915\u0930\u094d\u092e\u0923\u094d\u092f\u0947\u0935\u093e\u0927\u093f\u0915\u093e\u0930\u0938\u094d\u0924\u0947 \u092e\u093e \u092b\u0932\u0947\u0937\u0941 \u0915\u0926\u093e\u091a\u0928",switchToHindi:"\u0939\u093f\u0928\u094d\u0926\u0940 \u092e\u0947\u0902 \u092c\u0926\u0932\u0947\u0902",switchToEnglish:"\u0905\u0902\u0917\u094d\u0930\u0947\u091c\u0940 \u092e\u0947\u0902 \u092c\u0926\u0932\u0947\u0902",languageChanged:"\u092d\u093e\u0937\u093e \u0939\u093f\u0928\u094d\u0926\u0940 \u092e\u0947\u0902 \u092c\u0926\u0932 \u0917\u0908"}},as=(0,r.createContext)(null),ss=e=>{let{children:t,defaultLanguage:n="English"}=e;const[o,i]=(0,r.useState)(()=>{const e=localStorage.getItem("vimarsh_language");if(e&&("English"===e||"Hindi"===e))return e;return navigator.language.startsWith("hi")?"Hindi":n});(0,r.useEffect)(()=>{const e=os[o];document.documentElement.lang=e.code,document.documentElement.dir=e.direction,localStorage.setItem("vimarsh_language",o),document.title="English"===o?"Vimarsh - Spiritual AI Guidance":"\u0935\u093f\u092e\u0930\u094d\u0936 - \u0906\u0927\u094d\u092f\u093e\u0924\u094d\u092e\u093f\u0915 AI \u092e\u093e\u0930\u094d\u0917\u0926\u0930\u094d\u0936\u0928",console.log("\ud83c\udf0d Language changed to ".concat(o," (").concat(e.code,")"))},[o]);const a=os[o],s=is[o],c="rtl"===a.direction,l={currentLanguage:o,currentLanguageConfig:a,translations:s,setLanguage:e=>{i(e)},toggleLanguage:()=>{i(e=>"English"===e?"Hindi":"English")},t:e=>is[o][e]||e,isRTL:c};return(0,Za.jsx)(as.Provider,{value:l,children:t})};var cs=n(872);const ls=()=>{const e=(0,cs.getCurrentDomainConfig)(),t=(0,cs.getAuthConfig)();return console.info("\ud83d\udd10 Building MSAL configuration for production domain:",e.domain),console.info("\ud83d\udd17 Redirect URI:",e.redirectUri),console.info("\ud83c\udfe0 Logout URI:",e.postLogoutRedirectUri),console.info("\u2705 Valid production domain:",(0,cs.isValidProductionDomain)(e.domain)),{auth:{clientId:cs.ENTRA_ID_CONFIG.clientId,authority:cs.ENTRA_ID_CONFIG.authority,redirectUri:e.redirectUri,postLogoutRedirectUri:e.postLogoutRedirectUri,navigateToLoginRequestUrl:!0},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!0,claimsBasedCachingEnabled:!0,secureCookies:!1},system:{allowNativeBroker:!1,windowHashTimeout:6e4,iframeHashTimeout:6e3,loadFrameTimeout:0,navigateFrameWait:1e3,asyncPopups:!1,allowRedirectInIframe:!0,loggerOptions:{loggerCallback:(n,r,o)=>{if(o)return;if(!t.enableDebugLogging&&!t.usePlaceholder)return;const i="\ud83d\udd10 MSAL [".concat(e.domain,"]");switch(n){case m.$.Error:console.error("".concat(i," Error:"),r);break;case m.$.Warning:console.warn("".concat(i," Warning:"),r);break;case m.$.Info:console.info("".concat(i," Info:"),r);break;case m.$.Verbose:console.debug("".concat(i," Debug:"),r);break;default:console.log("".concat(i,":"),r)}},logLevel:t.enableDebugLogging?m.$.Info:m.$.Warning,piiLoggingEnabled:!1}}}};let us=null;const ds=(us||(us=ls()),us),hs=(cs.ENTRA_ID_CONFIG.scopes,cs.ENTRA_ID_CONFIG.scopes,(0,cs.getAuthConfig)());if(hs.enableDebugLogging){var gs;const e=(0,cs.getCurrentDomainConfig)();console.info("\ud83d\udd10 MSAL Configuration Summary:",{domain:e.domain,redirectUri:e.redirectUri,authority:cs.ENTRA_ID_CONFIG.authority,clientId:(null===(gs=cs.ENTRA_ID_CONFIG.clientId)||void 0===gs?void 0:gs.substring(0,8))+"...",environment:hs.usePlaceholder?"development (placeholder)":"configured"})}const ps=(0,r.lazy)(()=>n.e(446).then(n.bind(n,446))),fs=(0,r.lazy)(()=>Promise.all([n.e(484),n.e(128)]).then(n.bind(n,128))),ms=new $a(ds),vs=()=>(0,Za.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",background:"linear-gradient(135deg, #FFF8E1 0%, #FFE0B2 100%)",color:"#5D4037",fontFamily:"Inter, system-ui, sans-serif"},children:[(0,Za.jsx)("div",{style:{width:"40px",height:"40px",border:"3px solid #FF6B35",borderTop:"3px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),(0,Za.jsx)("p",{style:{marginTop:"16px",fontSize:"14px"},children:"Loading spiritual guidance..."}),(0,Za.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      "}})]});const ys=function(){const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{(async()=>{try{await ms.initialize(),console.log("\u2705 MSAL initialized successfully"),t(!0)}catch(e){console.error("\u274c MSAL initialization failed:",e),t(!0)}})()},[]),e?(0,Za.jsx)("div",{className:"App",children:(0,Za.jsx)(p.r7,{instance:ms,children:(0,Za.jsx)(Xa.OJ,{children:(0,Za.jsx)(ns.mx,{children:(0,Za.jsxs)(ss,{children:[(0,Za.jsx)(rs,{}),(0,Za.jsx)(d,{children:(0,Za.jsx)(r.Suspense,{fallback:(0,Za.jsx)(vs,{}),children:(0,Za.jsxs)(c.BV,{children:[(0,Za.jsx)(c.qh,{path:"/",element:(0,Za.jsx)(ps,{})}),(0,Za.jsx)(c.qh,{path:"/auth/callback",element:(0,Za.jsx)(es,{})}),(0,Za.jsx)(c.qh,{path:"/guidance",element:(0,Za.jsx)(ts,{children:(0,Za.jsx)(fs,{})})}),(0,Za.jsx)(c.qh,{path:"*",element:(0,Za.jsx)(ps,{})})]})})})]})})})})}):(0,Za.jsx)(vs,{})};i.createRoot(document.getElementById("root")).render((0,Za.jsx)(ys,{}))})();
//# sourceMappingURL=main.705c1a9f.js.map